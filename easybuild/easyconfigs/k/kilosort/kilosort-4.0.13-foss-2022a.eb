easyblock = 'PythonBundle'

name = 'kilosort'
version = '4.0.13'
homepage = 'https://github.com/MouseLand/Kilosort'
description = """
Kilosort4 is a Python package for spike sorting on GPUs with template matching.
The software uses new graph-based approaches to clustering that improve performance
compared to previous versions
"""
toolchain = {'name': 'foss', 'version': '2022a'}


dependencies = [
    ('Python', '3.10.4'),
    ('PyTorch', '1.12.1', '-CUDA-11.7.0'),
    ('SciPy-bundle', '2022.05'),
    ('matplotlib', '3.5.2'),
    ('h5py', '3.7.0'),
    ('scikit-learn', '1.2.2'),
    ('tqdm', '4.64.0'),
    ('numba', '0.56.4', '-CUDA-11.7.0'),
]

use_pip = True
exts_list = [
    ('faiss-cpu', '1.8.0', {
        'modulename': 'faiss',
        'source_urls': ['https://files.pythonhosted.org/packages/06/f0/47615aeed86433e6ed84ea1c5e6fc650723fead0d7c30d56c78689bdb0b6/'],
        'sources': ['faiss_cpu-1.8.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl'],
        'checksums': ['51aaef5a1255d0ea88ea7e52a2415f98c5dd2dd9cec10348d55136541eeec99f'],
    }),
    (name, version, {
        'checksums': ['6b3c24290a21f310a70f1ec4454d41c8a111babda145ccf1ec3f12046a48b5f8'],
    }),
]

sanity_pip_check = True

moduleclass = 'tools'
