# Contribution from the R Pepper @ University of Birmingham

easyblock = 'Binary'

name = 'king'
version = '2.2.7'

homepage = 'https://www.kingrelatedness.com/manual.shtml'
description = """KING is a toolset to explore genotype data from a genome-wide
  association study (GWAS) or a sequencing project"""

toolchain = {'name': 'foss', 'version': '2020b'}

source_urls = ['https://www.kingrelatedness.com/executables/']
sources = ['KING%scode.tar.gz' % version]
checksums = ['486e7e94dde16d427f9d3fc99a33fa3f72f67e2f61b7264b4579111c9fb95be3']

extract_sources = True

install_cmd = "mkdir -p %(installdir)s/bin && "
install_cmd += "g++ *.cpp -DWITH_OPENBLAS -DWITH_LAPACK -lopenblas -lm -lz -O2 -o king && "
install_cmd += "mv king %(installdir)s/bin"

sanity_check_paths = {
    'files': ['bin/king'],
    'dirs': [],
}

moduleclass = 'bio'
