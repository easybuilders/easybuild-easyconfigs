# This file is an EasyBuild reciPY as per https://github.com/hpcugent/easybuild
# Author: Pablo Escobar Lopez
# sciCORE - University of Basel
# SIB Swiss Institute of Bioinformatics 

easyblock='PackedBinary'

name = "KLayout"
version = "0.24.9"
versionsuffix = "-Python-%(pyver)s"

homepage = 'http://www.klayout.de/index.html'
description = """KLayout is a GDS and OASIS file viewer"""

toolchain = {'name': 'goolf', 'version': '1.7.20'}

source_urls = ['http://www.klayout.org/downloads/source/']
sources = ['%(namelower)s-%(version)s.tar.gz']

unpack_options = '--strip-components=1'

dependencies = [
    ('Python', '2.7.11'),
    ('zlib', '1.2.8'),
    ('Ruby', '2.3.3', '', True),
    ('Qt', '4.8.6'),
]

install_cmd = './build.sh -qt $EBROOTQT -ruby $EBROOTRUBY/bin/ruby -python $EBROOTPYTHON/bin/python -bin %(installdir)s/bin -platform linux-64-gcc-release -option -j4'

sanity_check_paths = {
    'files': ['bin/klayout'],
    'dirs': []
}

moduleclass = 'vis'
