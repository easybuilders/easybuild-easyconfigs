easyblock = 'PythonBundle'

name = 'CONCORD'
version = '1.0.13'
versionsuffix = '-CUDA-%(cudaver)s'

homepage = 'https://github.com/Gartner-Lab/Concord'
description = """Revealing the underlying cell-state landscape from single-cell data requires
overcoming the critical obstacles of batch integration, denoising, and dimensionality reduction.
We present CONCORD, a unified framework that simultaneously addresses these challenges within
a single self-supervised model. At its core, CONCORD implements a unified probabilistic sampling
strategy that corrects batch effects via dataset-aware sampling and enhances biological resolution
through hard-negative sampling."""

toolchain = {'name': 'foss', 'version': '2024a'}

builddependencies = [
    ('hatch-jupyter-builder', '0.9.1'),
    ('poetry', '1.8.3'),
]

dependencies = [
    ('CUDA', '12.6.0', '', SYSTEM),
    ('Python', '3.12.3'),
    ('SciPy-bundle', '2024.05'),
    ('PyTorch', '2.7.1', versionsuffix),
    ('Faiss', '1.13.2', versionsuffix),
    ('tqdm', '4.66.5'),
    ('h5py', '3.12.1'),
    ('umap-learn', '0.5.7'),
    ('matplotlib', '3.9.2'),
    ('plotly.py', '5.24.1'),
    ('scanpy', '1.10.4'),
    ('scikit-learn', '1.5.2'),
    ('Seaborn', '0.13.2'),
    ('scikit-misc', '0.5.1'),
    ('build', '1.2.2.post1'),
    ('Pillow', '10.4.0'),
    ('rpy2', '3.6.4'),
    ('VisCello', '1.0.0', '-R-4.4.2'),
    ('wrapt', '1.16.0'),
    ('BeautifulSoup', '4.12.3'),
    ('Greenlet', '3.1.1'),
]

exts_list = [
    ('bs4', '0.0.2', {
        'checksums': ['a48685c58f50fe127722417bae83fe6badf500d54b55f7e39ffe43b798653925'],
    }),
    ('zope.interface', '6.2', {
        'checksums': ['3b6c62813c63c543a06394a636978b22dffa8c5410affc9331ce6cdb5bfa8565'],
    }),
    ('zope.event', '5.0', {
        'checksums': ['bac440d8d9891b4068e2b5a2c5e2c9765a9df762944bda6955f96bb9b91e67cd'],
    }),
    ('gevent', '24.2.1', {
        'checksums': ['432fc76f680acf7cf188c2ee0f5d3ab73b63c1f03114c7cd8a34cebbe5aa2056'],
    }),
    ('xmltodict', '0.13.0', {
        'checksums': ['341595a488e3e01a85a9d8911d8912fd922ede5fecc4dce437eb4b6c8d037e56'],
    }),
    ('suds_community', '1.2.0', {
        'modulename': 'suds',
        'checksums': ['ab3b24dc9ba06b5e6598e2a5d34d2a7d06c79e613d81cedc028475bfbd3bb90c'],
    }),
    ('grequests', '0.7.0', {
        'checksums': ['5c33f14268df5b8fa1107d8537815be6febbad6ec560524d6a404b7778cf6ba6'],
    }),
    ('url-normalize', '1.4.3', {
        'checksums': ['d23d3a070ac52a67b83a1c59a0e68f8608d1cd538783b401bc9de2c0fac999b2'],
    }),
    ('cattrs', '23.2.3', {
        'checksums': ['a934090d95abaa9e911dac357e3a8699e0b4b14f8529bcc7d2b1ad9d51672b9f'],
    }),
    ('requests_cache', '1.2.0', {
        'checksums': ['db1c709ca343cc1cd5b6c8b1a5387298eceed02306a6040760db538c885e3838'],
    }),
    ('colorlog', '6.8.2', {
        'checksums': ['3e3e079a41feb5a1b64f978b5ea4f46040a94f11f0e8bbb8261e3dbbeca64d44'],
    }),
    ('easydev', '0.12.1', {
        'checksums': ['b47b7e6f75316ac9045b46487930e16ddb567f3899310deee11d72d8e1f0a231'],
    }),
    ('bioservices', '1.11.2', {
        'checksums': ['31baaab4ab813b93f79995ba8cad431a16cbee99e1b0c6f9e419dd4be0c73a9e'],
    }),
    ('fastjsonschema', '2.19.1', {
        'checksums': ['e3126a94bdc4623d3de4485f8d468a12f02a67921315ddc87836d6e456dc789d'],
    }),
    ('jupyter_core', '5.7.1', {
        'checksums': ['de61a9d7fc71240f688b2fb5ab659fbb56979458dc66a71decd098e03c79e218'],
    }),
    ('nbformat', '5.10.3', {
        'checksums': ['60ed5e910ef7c6264b87d644f276b1b49e24011930deef54605188ddeb211685'],
    }),
    ('gseapy', '0.10.8', {
        'checksums': ['15be80bac73768501f5cecf6751aeb2e41416fd144bd6daa2ec453ad08a10ce0'],
    }),
    ('plottable', '0.1.5', {
        'checksums': ['235d762a31c82129dc5bf74205c103a14b1e4393d0f921cc0231be5de884041d'],
    }),
    ('concord-sc', version, {
        'modulename': 'concord',
        'sources': [{'download_filename': 'concord_sc-%(version)s.tar.gz', 'filename': SOURCE_TAR_GZ}],
        'checksums': ['96f5386128fd8256e9952e0689b47fcc22c0bba1f18a172f47ebaa728aa9f8c5'],
    }),
]

moduleclass = 'bio'
