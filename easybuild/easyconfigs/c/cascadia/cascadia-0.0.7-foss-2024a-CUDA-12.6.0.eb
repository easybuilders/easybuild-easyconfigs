easyblock = 'PythonBundle'

name = 'cascadia'
version = '0.0.7'
versionsuffix = '-CUDA-%(cudaver)s'

homepage = 'https://github.com/Noble-Lab/cascadia'
description = """Transformer deep learning model for de novo sequencing of
data-independent acquisition mass spectrometry data."""

toolchain = {'name': 'foss', 'version': '2024a'}

dependencies = [
    ('CUDA', '12.6.0', '', SYSTEM),
    ('Python', '3.12.3'),
    ('SciPy-bundle', '2024.05'),
    ('PyTorch', '2.7.1', versionsuffix),
    ('PyTorch-Lightning', '2.5.6', versionsuffix),
    ('Lightning', '2.5.6', versionsuffix),
    ('lxml', '5.3.0'),
    ('einops', '0.8.1'),
    ('dill', '0.3.9'),
    ('RDKit', '2025.03.3'),
    ('Pillow', '10.4.0'),
    ('tqdm', '4.66.5'),
    ('h5py', '3.12.1'),
    ('numba', '0.60.0'),
    ('tensorboard', '2.18.0'),
    ('SQLAlchemy', '2.0.36'),
    ('fastobo', '0.14.1'),
    ('pyteomics', '4.7.5'),
]

exts_list = [
    ('selfies', '2.2.0', {
        'checksums': ['68dc2a0d8ef507fc01919c4490d6b712c5e5edab8fb6b85c38223d55ac0c65e2'],
    }),
    (name, version, {
        # unpin torch and lighning upper version bound
        'preinstallopts': """sed -i '16,34s/[<>=!~][^"]*//g' pyproject.toml && """,
        'checksums': ['6e9fcc508f5adb4585841801f9da73dfcef716347054e0b517c7a546adeab347'],
    }),
]

moduleclass = 'bio'
