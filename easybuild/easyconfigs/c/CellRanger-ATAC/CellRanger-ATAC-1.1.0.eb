# Contribution from the Crick HPC team
# uploaded by J. Sassmannshausen
# for the module file, you need to run this command afterwards:
# /usr/share/lmod/lmod/libexec/sh_to_modulefile  %(installdir)s/sourceme.bash
# and add these lines:
#  prepend_path("PATH", pathJoin(root, "cellranger-atac-cs/1.1.0/bin"))
#  prepend_path("PATH", pathJoin(root, "bwa/v0.7.17"))
#  prepend_path("PATH", pathJoin(root, "lz4/v1.8.1.2"))
#  prepend_path("PATH", pathJoin(root, "cellranger-atac-tiny-fastq/1.0.0"))
#  prepend_path("PATH", pathJoin(root, "miniconda-atac-cs/4.3.21-miniconda-atac-cs-c10/bin"))

easyblock = 'Tarball'

name = 'CellRanger-ATAC'
version = '1.1.0'

homepage = 'https://support.10xgenomics.com'
description = """The Chromium Single Cell ATAC (Assay for
Transposase Accessible Chromatin) Solution.
"""

toolchain = SYSTEM

# you need to register at this URL and download the software manually
# You also will need to remove this link as the source does not exist:
# cellranger-atac-1.1.0/miniconda-atac-cs/4.3.21-miniconda-atac-cs-c10/lib/libstdc++.so.6.0.21

source_urls = ['https://support.10xgenomics.com/single-cell-atac/software/downloads/latest']
sources = ['%(namelower)s-%(version)s.tar.gz']
checksums = ['e45d97364a8187019ec0d59e1e67343d63fe883787dd94951c0ca31ba724ff25']

sanity_check_paths = {
    'dirs': ['bwa', 'cellranger-atac-cs', 'cellranger-atac-tiny-fastq',
             'cellranger-atac-tiny-ref', 'lz4', 'martian-cs', 'miniconda-atac-cs'],
    'files': ['cellranger-atac-shell', 'sourceme.bash'],
}

modextrapaths = {'PATH': ''}

moduleclass = 'bio'
