# updated: Denis Kristak (INUITS)
easyblock = 'PythonBundle'

name = 'cellpose-omni'
version = '0.6.5'

homepage = 'https://github.com/kevinjohncutler/cellpose-omni'
description = "Cellpose backend for Omnipose."

toolchain = {'name': 'foss', 'version': '2022a'}


dependencies = [
    ('Python', '3.10.4'),
    ('SciPy-bundle', '2022.05'),
    ('PyQt5', '5.15.5'),
    ('PyTorch', '1.12.0'),
    ('OpenCV', '4.6.0', '-contrib'),
    ('PyQtGraph', '0.13.3'),
    ('tqdm', '4.64.0'),
    ('numba', '0.56.4'),
]

exts_list = [
    ('natsort', '8.3.1', {
        'checksums': ['517595492dde570a4fd6b6a76f644440c1ba51e2338c8a671d7f0475fda8f9fd'],
    }),
    ('tifffile', '2022.10.10', {
        'checksums': ['50b61ba943b866d191295bc38a00191c9fdab23ece063544c7f1a264e3f6aa8e'],
    }),
    ('pyasn1-modules', '0.2.8', {
        'checksums': ['905f84c712230b2c592c19470d3ca8d552de726050d1d1716282a1f6146be65e'],
    }),
    ('rsa', '4.9', {
        'checksums': ['e38464a49c6c85d7f1351b0126661487a7e0a14a50f1675ec50eb34d4f20ef21'],
    }),
    ('googleapis-common-protos', '1.59.1', {
        'modulename': 'google.api',
        'preinstallopts': 'sed -i "s|protobuf>=3.19.5|protobuf>=3.19.4|g" setup.py && ',
        'checksums': ['b35d530fe825fb4227857bc47ad84c33c809ac96f312e13182bdeaa2abe1178a'],
    }),
    ('cachetools', '5.3.1', {
        'checksums': ['dce83f2d9b4e1f732a8cd44af8e8fab2dbe46201467fc98b3ef8f269092bf62b'],
    }),
    ('google-crc32c', '1.5.0', {
        'modulename': 'google_crc32c',
        'checksums': ['89284716bc6a5a415d4eaa11b1726d2d60a0cd12aadf5439828353662ede9dd7'],
    }),
    ('google-auth', '2.22.0', {
        'modulename': 'google.auth',
        'checksums': ['164cba9af4e6e4e40c3a4f90a1a6c12ee56f14c0b4868d1ca91b32826ab334ce'],
    }),
    ('google-cloud-core', '2.3.3', {
        'modulename': 'google.api',
        'checksums': ['37b80273c8d7eee1ae816b3a20ae43585ea50506cb0e60f3cf5be5f87f1373cb'],
    }),
    ('google-api-core', '2.11.1', {
        'modulename': 'google.api_core',
        'preinstallopts': 'sed -i "s|protobuf>=3.19.5|protobuf>=3.19.4|g" setup.py && ',
        'checksums': ['25d29e05a0058ed5f19c61c0a78b1b53adea4d9364b464d014fbda941f6d1c9a'],
    }),
    ('google-resumable-media', '2.5.0', {
        'modulename': 'google.resumable_media',
        'checksums': ['218931e8e2b2a73a58eb354a288e03a0fd5fb1c4583261ac6e4c078666468c93'],
    }),
    ('google-cloud-storage', '2.10.0', {
        'modulename': 'google.cloud.storage',
        'checksums': ['934b31ead5f3994e5360f9ff5750982c5b6b11604dc072bc452c25965e076dc7'],
    }),
    (name, version, {
        'modulename': 'cellpose',
        'patches': ['%(name)s-%(version)s_fix_deps_and_scm.patch'],
        'sources': ['v%(version)s.tar.gz'],
        'checksums': [
            {'v0.6.5.tar.gz': 'f60f199e2cc88d06009d7c407379b6b8ec0ec0cf401c2849d517bd0a7bf3fbe4'},
            {'cellpose-omni-0.6.5_fix_deps_and_scm.patch':
             '93e16cf1ea22972fcab6acc1519fc98024ac9a039854223ba3d4feb2580c645c'},
        ],
    }),
]

use_pip = True
sanity_pip_check = True

moduleclass = 'bio'
