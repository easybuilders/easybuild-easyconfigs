easyblock = 'MakeCp'

name = 'CAVIAR'
version = '20200820'

homepage = "https://github.com/fhormoz/caviar"
description = """CAusal Variants Identication in Associated Regions. A statistical framework
 that quantifies the probability of each variant to be causal while allowing an arbitrary
 number of causal variants."""

toolchain = {'name': 'foss', 'version': '2020a'}

sources = [{
    'filename': 'CAVIAR-20200820.tar.gz',
    'git_config': {
        'url': 'https://github.com/fhormoz',
        'repo_name': 'caviar',
        'commit': '135b58ba',
    },
}]
patches = ['caviar-lapack-blas.patch']
checksums = [
    'e5b14e667c8bded9d771bb7c5b2ed89a6bf900863f9173b0ded3b732b77105ee',  # caviar-lapack-blas.patch
]

dependencies = [
    ('GSL', '2.6'),
]

start_dir = "%(name)s-C++"

files_to_copy = [
    (['%(name)s-C++/%(name)s', '%(name)s-C++/e%(name)s', '%(name)s-C++/set%(name)s',
     '%(name)s-C++/mup%(name)s'], "bin"),
]

sanity_check_paths = {
    'files': ['bin/%s' % x for x in ['%(name)s', 'e%(name)s', 'set%(name)s', 'mup%(name)s']],
    'dirs': [''],
}

moduleclass = 'bio'
