# Author: J. Sassmannshausen (Imperial College London/UK)

easyblock = 'PythonBundle'

name = 'CellProfiler'
version = '4.2.4'

homepage = 'https://github.com/CellProfiler/CellProfiler'
description = """CellProfiler is a free open-source software designed to enable 
biologists without training in computer vision or programming to quantitatively 
measure phenotypes from thousands of images automatically."""

toolchain = {'name': 'foss', 'version': '2021a'}

builddependencies = [
    ('pkgconfig', '1.5.4', '-python'),
]

dependencies = [
    ('Python', '3.9.5'),
    ('SciPy-bundle', '2021.05'),
    ('boto3', '1.20.13'),
    ('HDF5', '1.10.7'),
    ('imageio', '2.10.5'),
    ('Pillow', '8.2.0'),
    ('PyZMQ', '22.3.0'),
    ('scikit-image', '0.18.3'),
    ('scikit-learn', '0.24.2'),
    ('wxPython', '4.1.1'),
    ('MariaDB', '10.6.4'),
    ('Java', '11', '', SYSTEM),
    ('GTK3', '3.24.29'),
]

use_pip = True
sanity_pip_check = True

exts_list = [
    ('cellprofiler-core', version, {
        'checksums': ['8990ddab4beab5d65adf0e55ea2c44579921de494f79d863778a4e709af6900c'],
    }),
    ('matplotlib', '3.1.3', {
        'checksums': ['db3121f12fb9b99f105d1413aebaeb3d943f269f3d262b45586d12765866f0c6'],
    }),
    ('h5py', '3.6.0', {
        'checksums': ['8752d2814a92aba4e2b2a5922d2782d0029102d99caaf3c201a566bc0b40db29'],
    }),
    ('charset-normalizer', '2.1.1', {
        'checksums': ['5a3d016c7c547f69d6f81fb0db9449ce888b418b5b9952cc5e6e66843e9dd845'],
    }),
    ('pydantic', '1.10.2', {
        'checksums': ['91b8e218852ef6007c2b98cd861601c6a09f1aa32bbbb74fab5b1c33d4a1e410'],
    }),
    ('deprecation', '2.1.0', {
        'checksums': ['72b3bde64e5d778694b0cf68178aed03d15e15477116add3fb773e581f9518ff'],
    }),
    ('centrosome', '1.2.1', {
        'checksums': ['97ff757196e157e1b9c93931607704e81d6d67bb968cbdbf1c1b93c5c3ac1735'],
    }),
    ('docutils', '0.15.2', {
        'checksums': ['a2aeea129088da402665e92e0b25b04b073c04b2dce4ab65caaa38b7ce2e1a99'],
    }),
    ('inflect', '6.0.2', {
        'checksums': ['f1a6bcb0105046f89619fde1a7d044c612c614c2d85ef182582d9dc9b86d309a'],
    }),
    ('Jinja2', '2.11.3', {
        'checksums': ['a6d58433de0ae800347cab1fa3043cebbabe8baa9d29e668f1c768cb87a333c6'],
    }),
    ('joblib', '1.2.0', {
        'checksums': ['e1cee4a79e4af22881164f218d4311f60074197fb707e082e803b61f6d137018'],
    }),
    ('mahotas', '1.4.13', {
        'checksums': ['a78dfe15045a20a0d9e01538b80f874580cd3525ae3eaa2c83ced51eb455879c'],
    }),
    ('mysqlclient', '1.4.6', {
        'checksums': ['f3fdaa9a38752a3b214a6fe79d7cae3653731a53e577821f9187e67cbecb2e16'],
        'modulename': 'MySQLdb',
    }),
    ('prokaryote', '2.4.4', {
        'checksums': ['0a147b8b9a0a7279aa773e6a8fe459eb49f6de479f7afe7203dc4ac10dc8b587'],
    }),
    ('python-bioformats', '4.0.6', {
        'checksums': ['35d424a77127415568412832dfea494a71027bfaa9d34c0efee5a9dcd7694303'],
        'modulename': 'bioformats',
    }),
    ('python-javabridge', '4.0.3', {
        'checksums': ['3fee0c235efcfe866f95695fdc0b6289eab2371043b32ff4ca6feff098de59c5'],
        'modulename': 'javabridge',
    }),
    ('sentry-sdk', '0.18.0', {
        'checksums': ['1d91a0059d2d8bb980bec169578035c2f2d4b93cd8a4fb5b85c81904d33e221a'],
    }),
    ('requests', '2.28.1', {
        'checksums': ['7c5599b102feddaa661c826c56ab4fee28bfd17f5abca1ebbe3e7f19d7c97983'],
    }),
    ('six', '1.16.0', {
        'checksums': ['1e61c37477a1626458e36f7b1d82aa5c9b094fa4802892072e49de9c60c4c926'],
    }),
    ('tifffile', '2022.4.8', {
        'checksums': ['d4a4057e5cb7afe6e24cf7bde42a163970b593afe44c17249894ede755cf3faa'],
    }),
    ('typing_extensions', '4.4.0', {
        'checksums': ['1511434bb92bf8dd198c12b1cc812e800d4181cfcb867674e0f8279cc93087aa'],
    }),
    (name, version, {
        'checksums': ['0416ccd71593e5a49c214e2a9643d6b39f7438cb06b30ccdb87a7712d86dde64'],
    }),
]

sanity_check_paths = {
    'files': ['bin/cellprofiler', 'bin/normalizer'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

sanity_check_commands = [
    "cellprofiler -h",
    "normalizer -h",
]

moduleclass = 'bio'
