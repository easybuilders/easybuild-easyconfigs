easyblock = 'Tarball'

name = 'cuDSS'
version = '0.6.0.5'

homepage = 'https://developer.nvidia.com/cudss'
description = """The NVIDIA cuDSS: A high-performance CUDA Library for Direct Sparse Solvers."""

toolchain = {'name': 'CUDAcore', 'version': '12.6.2'}
toolchainopts = {'optarch': 'False'}
local_cuda_major = '12'

sources = [f'lib%(namelower)s-linux-x86_64-%(version)s_cuda{local_cuda_major}-archive.tar.xz']
checksums = ['159ce1d4e3e4bba13b0bd15cf943e44b869c53b7a94f9bac980768c927f02e75']

sanity_check_paths = {
    'files': [
        "lib/libcudss.so",
        "lib/libcudss_commlayer_nccl.so",
        "lib/libcudss_commlayer_openmpi.so",
        "lib/libcudss_mtlayer_gomp.so",
        "lib/libcudss_static.a",
    ],
    'dirs': ['include', 'lib'],
}

accept_eula = True

moduleclass = 'numlib'
