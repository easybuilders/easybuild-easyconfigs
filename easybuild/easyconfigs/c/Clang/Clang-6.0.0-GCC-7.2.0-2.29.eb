##
# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
#
# Copyright:: Copyright 2013-2015 Dmitri Gribenko, Ward Poelmans
# Authors:: Dmitri Gribenko <gribozavr@gmail.com>
# Authors:: Ward Poelmans <wpoely86@gmail.com>
# License:: GPLv2 or later, MIT, three-clause BSD.
# $Id$
##

name = 'Clang'
version = '6.0.0'

homepage = 'http://clang.llvm.org/'
description = """C, C++, Objective-C compiler, based on LLVM.  Does not
 include C++ standard library -- use libstdc++ from GCC."""

# Clang also depends on libstdc++ during runtime, but this dependency is
# already specified as the toolchain.
toolchain = {'name': 'GCC', 'version': '7.2.0-2.29'}
# Do not set optarch to True: it will cause the build to fail
toolchainopts = {'optarch': False}

source_urls = ["http://llvm.org/releases/%(version)s"]
sources = [
    'llvm-%(version)s.src.tar.xz',
    'cfe-%(version)s.src.tar.xz',
    'compiler-rt-%(version)s.src.tar.xz',
    'polly-%(version)s.src.tar.xz',
    'openmp-%(version)s.src.tar.xz',
]
checksums = [
    '1ff53c915b4e761ef400b803f07261ade637b0c269d99569f18040f3dcee4408',  # llvm-6.0.0.src.tar.xz
    'e07d6dd8d9ef196cfc8e8bb131cbd6a2ed0b1caf1715f9d05b0f0eeaddb6df32',  # cfe-6.0.0.src.tar.xz
    'd0cc1342cf57e9a8d52f5498da47a3b28d24ac0d39cbc92308781b3ee0cea79a',  # compiler-rt-6.0.0.src.tar.xz
    '47e493a799dca35bc68ca2ceaeed27c5ca09b12241f87f7220b5f5882194f59c',  # polly-6.0.0.src.tar.xz
    '7c0e050d5f7da3b057579fb3ea79ed7dc657c765011b402eb5bbe5663a7c38fc',  # openmp-6.0.0.src.tar.xz
]

dependencies = [
    ('GMP', '6.1.2'),
]

builddependencies = [
    ('CMake', '3.10.3'),
    ('Python', '2.7.14', '-bare'),
    ('libxml2', '2.9.8'),
]

assertions = True

usepolly = True

moduleclass = 'compiler'
