diff -ru openmpi-1.6.3.orig/ompi/mca/btl/openib/btl_openib_component.c openmpi-1.6.3/ompi/mca/btl/openib/btl_openib_component.c
--- openmpi-1.6.3.orig/ompi/mca/btl/openib/btl_openib_component.c	2012-07-27 13:41:24.000000000 +0200
+++ openmpi-1.6.3/ompi/mca/btl/openib/btl_openib_component.c	2015-07-15 08:37:09.000000000 +0200
@@ -2495,7 +2495,9 @@
        we're most likely going to be using this component). The hook is to be set up 
        as early as possible in this function since we want most of the allocated resources 
        be aligned.*/ 
-    if (mca_btl_openib_component.use_memalign > 0) { 
+    if (mca_btl_openib_component.use_memalign > 0 &&
+        (opal_mem_hooks_support_level() &
+            (OPAL_MEMORY_FREE_SUPPORT | OPAL_MEMORY_CHUNK_SUPPORT)) != 0) { 
         mca_btl_openib_component.previous_malloc_hook = __malloc_hook; 
         __malloc_hook = btl_openib_malloc_hook;  
         malloc_hook_set = true; 
diff -ru openmpi-1.6.3.orig/ompi/mca/btl/openib/btl_openib_mca.c openmpi-1.6.3/ompi/mca/btl/openib/btl_openib_mca.c
--- openmpi-1.6.3.orig/ompi/mca/btl/openib/btl_openib_mca.c	2012-09-07 17:48:03.000000000 +0200
+++ openmpi-1.6.3/ompi/mca/btl/openib/btl_openib_mca.c	2015-07-15 08:35:17.000000000 +0200
@@ -636,14 +636,14 @@
             "Allocating memory more than btl_openib_memalign_threshhold"
             "bytes will automatically be algined to the value of btl_openib_memalign bytes."
             "memalign_threshhold defaults to the same value as mca_btl_openib_eager_limit.",
-            mca_btl_openib_component.eager_limit,
+            mca_btl_openib_module.super.btl_eager_limit,
             &ival,
             REGINT_GE_ZERO);
     if (ival < 0){
         orte_show_help("help-mpi-btl-openib.txt", "invalid mca param value",
                        true, "btl_openib_memalign_threshold must be positive",
                        "btl_openib_memalign_threshold is reset to btl_openib_eager_limit");
-        ival = mca_btl_openib_component.eager_limit;
+        ival = mca_btl_openib_module.super.btl_eager_limit;
     }
     mca_btl_openib_component.memalign_threshold = (size_t)ival;
 #endif
--- opal/etc/openmpi-mca-params.conf.orig 2015-06-05 16:21:25.535727000 +0200
+++ opal/etc/openmpi-mca-params.conf  2015-06-08 10:36:05.387902000 +0200
@@ -56,3 +56,6 @@
 
 # See "ompi_info --param all all" for a full listing of Open MPI MCA
 # parameters available and their default values.
+
+# Fix bug in the initialization of the value when using the infiniband module. (ref: http://www.open-mpi.org/community/lists/users/2015/05/26913.php)
+btl_openib_memalign_threshold=12288
