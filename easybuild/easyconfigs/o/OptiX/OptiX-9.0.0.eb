##
# Author:    Robert Mijakovic <robert.mijakovic@lxp.lu>
##
easyblock = 'Binary'

name = 'OptiX'
version = '9.0.0'

homepage = 'https://developer.nvidia.com/optix'
description = """OptiX is NVIDIA SDK for easy ray tracing performance.
 It provides a simple framework for accessing the GPUâ€™s massive ray tracing
 power using state-of-the-art GPU algorithms."""

toolchain = SYSTEM

sources = ['NVIDIA-OptiX-SDK-%(version)s-linux64-%(arch)s.sh']
checksums = [{
    'NVIDIA-OptiX-SDK-%(version)s-linux64-x86_64.sh':
    '72a03c27fd68040336b121ae37e1c9e357beffbc34e44c30a41b60958bf75f0f',
    'NVIDIA-OptiX-SDK-%(version)s-linux64-aarch64.sh':
    '2ef1ca9552938fae5a1ea561233b2c4e7d383359d9ef04b4c40093af0d69fa4b',
}]

download_instructions = f"""{name} requires registration and manual download from one of
https://developer.nvidia.com/designworks/optix/download
https://developer.nvidia.com/designworks/optix/downloads/legacy
Required download: {' '.join(sources)}"""

install_cmd = "./" + sources[0] + " --skip-license --prefix=%(installdir)s"

sanity_check_paths = {
    'files': ["include/optix.h", "include/optix_device.h"],
    'dirs': []
}

modextravars = {'OPTIX_HOME': '%(installdir)s'}

moduleclass = 'vis'
