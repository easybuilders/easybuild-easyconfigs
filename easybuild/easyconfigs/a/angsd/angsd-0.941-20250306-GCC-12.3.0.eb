easyblock = 'MakeCp'

name = 'angsd'
version = '0.941-20250306'
local_commit = '6b5d906'

homepage = 'https://www.popgen.dk/angsd/index.php/ANGSD'
description = """ANGSD is a software for analyzing next generation sequencing data.
The software can handle a number of different input types from mapped reads to imputed genotype probabilities.
Most methods take genotype uncertainty into account instead of basing the analysis on called genotypes.
This is especially useful for low and medium depth data.
The software is written in C++ and has been used on large sample sizes.
"""

toolchain = {'name': 'GCC', 'version': '12.3.0'}

source_urls = ['https://github.com/ANGSD/angsd/archive']
sources = [{'download_filename': '%s.tar.gz' % local_commit, 'filename': SOURCE_TAR_GZ}]
checksums = ['3d6c86f95a5e78f1ab6f88227fe33759bb65ee7c38de030d72a4f2093f5b1ff0']

dependencies = [('HTSlib', '1.18')]

buildopts = 'HTSSRC=$EBROOTHTSLIB/lib'

files_to_copy = [(['%(name)s'], 'bin')]

sanity_check_paths = {
    'files': ['bin/%(name)s'],
    'dirs': ['bin']
}

sanity_check_commands = ['%(name)s --help']

moduleclass = 'bio'
