##
# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
#
# Copyright:: Copyright 2012-2014 Uni.Lu/LCSB, NTUA
# Authors::   Maxime Schmitt <maxime.schmitt@telecom-bretagne.eu>, Fotis Georgatos <fotis@cern.ch>
# License::   MIT/GPL
# $Id$
#
##

easyblock = 'ConfigureMake'

name = 'ABySS'
version = '2.0.2'

homepage = 'http://www.bcgsc.ca/platform/bioinfo/software/abyss'
description = """Assembly By Short Sequences - a de novo, parallel, paired-end sequence assembler"""

toolchain = {'name': 'foss', 'version': '2018a'}
toolchainopts = {'usempi': True}

sources = [SOURCELOWER_TAR_GZ]
source_urls = ['https://github.com/bcgsc/abyss/archive/%(version)s/']
checksums = ['6482b81eb5439703c0dbf6cd7ac25cd0df7541d9e04ef7865343b241e21db460']

builddependencies = [('Autotools', '20170619')]

# requires 'make' at run time (assumed to exist)
dependencies = [
    ('Boost', '1.66.0'),
    ('sparsehash', '2.0.3'),
    ('SQLite', '3.21.0'),
]

preconfigopts = "./autogen.sh && "

sanity_check_paths = {
    'files': ["bin/abyss-pe", "bin/abyss-fac", "bin/ABYSS", "bin/ABYSS-P"],
    'dirs': ["share/man/man1"]
}

sanity_check_commands = [
    ('abyss-pe', '--version'),
    ('ABYSS', '--version'),
]

moduleclass = 'bio'
