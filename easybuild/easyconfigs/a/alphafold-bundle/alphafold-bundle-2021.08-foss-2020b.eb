easyblock = 'PythonBundle'

name = 'alphafold-bundle'
version = '2021.08'

homepage = 'https://github.com/deepmind/alphafold'
description = "Python bundle of whl files for AlphaFold"

toolchain = {'name': 'foss', 'version': '2020b'}

dependencies = [
    ('Python', '3.8.6'),
    ('SciPy-bundle', '2020.11'),
#    ('PyYAML', '5.3.1'),
#    ('GitPython', '3.1.14'),
]

use_pip = True

exts_list = [
    ('absl-py', '0.13.0', {
        'checksums': ['6953272383486044699fd0e9f00aad167a27e08ce19aae66c6c4b10e7e767793'],
        'options': ['modulename : absl']
    }),
    ('flatbuffers', '2.0', {
        'checksums': ['12158ab0272375eab8db2d663ae97370c33f152b27801fa6024e1d6105fd4dd2'],
    }),
    ('pyTree', '2.0.0', {
        'checksums': ['18267a9bd5abe697a05612d127008febfc66e531894bc89254c4c6a8d85663ad'],
    }),
#    ('opt-einsum', '3.3.0', {
#        'checksums': ['a748fdbccfce5af420ea56f8e2c51a6dc9e8774afd9179cb8addfab159b7b33c'],
#    }),
    ('fastcache', '1.1.0', {
        'checksums': ['6de1b16e70335b7bde266707eb401a3aaec220fb66c5d13b02abf0eab8be782b'],
    }),
#    ('jaxlib', '0.1.69', {
#        'checksums': ['05cbafbc5878406f4e79cadf22c3a9db735f4a842d3805fc7d0162cbefa2e166'],
#    }),
    ('jax', '0.2.14', {
        'checksums': ['81c0de0f92552eeb5885a62ade2420e60902cecc46df78b43439f98912e51681'],
    }),


]

# site-specific: the line below is the command for loading this module with the (default) EB module naming scheme
# if necessary, change this command to match your cluster setup
# local_snakemake_load = 'module load %(name)s/%(version)s-%(toolchain_name)s-%(toolchain_version)s%(versionsuffix)s'
# modextravars = {'SNAKEMAKE_LOAD_MODULE': local_snakemake_load}

# sanity_check_paths = {
#    'files': ['bin/snakemake'],
#    'dirs': ['lib/python%(pyshortver)s/site-packages/snakemake'],
# }

# sanity_check_commands = ['snakemake --help']

moduleclass = 'tools'
