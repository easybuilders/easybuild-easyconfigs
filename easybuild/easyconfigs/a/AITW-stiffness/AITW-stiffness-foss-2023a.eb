easyblock = 'PythonBundle'

name = 'AITW-stiffness'
version = '0.1.0'

homepage = 'https://www.ai-transpwood-project.eu/'
description = """AI-TranspWood - Neural network surrogate model for computing macroscopic stiffness parameters of
wood fibers from given microscopic parameters.
"""

toolchain = {'name': 'foss', 'version': '2023a'}

dependencies = [
    ('Python', '3.11.3'),
    ('Python-bundle-PyPI', '2023.06'),
    ('SciPy-bundle', '2023.07'),
    ('h5py', '3.9.0'),
    ('TensorFlow', '2.13.0'),
    ('tensorflow-probability', '0.20.0'),
]

_tag = '0.1.0'
exts_list = [
    (name, version, {
        'modulename': 'aitw_stiffness_surrogate',
        'sources': [{
            'filename': f'biocomposite-surrogate-{_tag}.tar.gz',
            'git_config': {
                # No trailing slash here is important to avoid git-lfs failing due to a double // slash
                'url': 'https://github.com/AI-TranspWood',
                'repo_name': 'biocomposite-surrogate',
                'tag': _tag,
            }
        }],
        'patches': ['AITW-stiffness_unfix-deps.patch'],
        'checksums': [None],
        'click_autocomplete_bins': ['aitw-stiffness'],
    }),
]

sanity_check_commands = [
    f'aitw-stiffness --help',
]

moduleclass = 'chem'
