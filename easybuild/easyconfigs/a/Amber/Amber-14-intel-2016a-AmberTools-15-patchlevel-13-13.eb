#
# modified by Stephane Thiell (Stanford University) for Amber v14
#
# author: Benjamin P. Roberts (University of Auckland)
#
# based on work by Marios Constantinou (University of Cyprus)
#
name = 'Amber'
version = '14'

homepage = 'http://%(namelower)smd.org/%(name)sMD.php'
description = """Amber (originally Assisted Model Building with Energy
 Refinement) is software for performing molecular dynamics and structure
 prediction."""

toolchain = {'name': 'intel', 'version': '2016a'}
toolchainopts = {'openmp': False, 'usempi': True}

ambertools_ver = '15'
sources = [
    '%(name)s%(version)s.tar.bz2',
    'AmberTools%s.tar.bz2' % ambertools_ver,
]
checksums = [
    '',  # Amber14.tar.bz2
    '',  # AmberTools15.tar.bz2
    '82ef435ad4d1d76f60557d7f405b8247113f052a397afd28ff006def46a491f3',  # Amber-14_fix-hardcoding.patch
    '09825c1217dd78c5a7a8ef98cb694e6c1adae5b4f27ea28783cdf52b33750545',  # AmberTools-15_fix-mdgx-print-bug.patch
]
patches = [
    '%(name)s-%(version)s_fix-hardcoding.patch',
    'AmberTools-%s_fix-mdgx-print-bug.patch' % ambertools_ver,
]

dependencies = [
    ('CUDA', '7.5.18', '', True),
    ('netCDF', '4.4.0'),
    ('netCDF-Fortran', '4.4.4'),
    ('Python', '2.7.11'),
]

patchlevels = (13, 13)
patchruns = 1

versionsuffix = '-AmberTools-%s-patchlevel-%d-%d' % (ambertools_ver, patchlevels[0], patchlevels[1])

moduleclass = 'chem'
