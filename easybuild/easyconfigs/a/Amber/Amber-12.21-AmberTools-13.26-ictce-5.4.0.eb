#
# author: Benjamin P. Roberts (University of Auckland)
#
# based on work by Marios Constantinou (University of Cyprus)
#
easyblock = 'EB_Amber'
name = 'Amber'
version = "12"

homepage = 'http://ambermd.org/amber.html'
description = """Amber (originally Assisted Model Building with Energy
Refinement) is software for performing molecular dynamics and structure
prediction."""

toolchain = {'name': 'ictce', 'version': '5.4.0'}
toolchainopts = {'openmp': False, 'usempi': True}

# Amber has an idiosyncratic build process involving a bunch of environment
# variables set by the configure script, then various other configure scripts
# and Makefiles making use of these. Setting "onlytcmod" was found to be
# needed in order to stop Easybuild from setting environment variables which
# would go on to interact negatively with the build process.
onlytcmod = True

sources = ['AmberTools13.tar.bz2', 'Amber12.tar.bz2']
patches = ['Amber-12-ictce-5.4.0.patch']

dependencies = [
    ('CUDA', '5.0.35-1', '', True), 
    ('netCDF', '4.1.3'),
    ('Python', '2.7.3'),
]

patchlevels = (26, 21)

moduleclass = 'chem'
