#
# author: Benjamin P. Roberts (University of Auckland)
#
# based on work by Marios Constantinou (University of Cyprus)
#

name = 'Amber'
version = "12"

easyblock = 'Amber'

homepage = 'http://ambermd.org/amber.html'
description = """Amber (originally Assisted Model Building with Energy Refinement) is software for performing molecular dynamics and structure prediction."""

toolchain = {'name': 'ictce', 'version': '5.4.0'}
toolchainopts = {'usempi': True}

sources = ['AmberTools13.tar.bz2', 'Amber12.tar.bz2']

dependencies = [
    ('CUDA', '6.0.37', '', True), 
    ('netCDF', '4.1.3'),
    ('Python', '2.7.3'),
    ]

patchlevels = (0, 0)

preconfigopts = "export MKL_HOME=$EBROOTIMKL && export CUDA_HOME=$EBROOTCUDA && "
configopts = "--with-netcdf $EBROOTNETCDF --with-python `which python` -static -noX11 -mpi -cuda intel"

# export MPI_HOME=$EBROOTIMPI && 

# Get a better list of files to copy
#files_to_copy = [(['exe/lmodprmtop', 'exe/sander.LES.MPI', 'exe/sander.MPI', 'exe/sander.PIMD.MPI'], 'bin')]

sanity_check_paths = {
	'files': ['bin/lmodprmtop'],
	'dirs': ["."]
}

moduleclass = 'chem'
