easyblock = 'CMakeMake'

name = 'MySQL'
version = '5.7.20'
versionsuffix = '-clientonly'

homepage = 'http://www.mysql.com/'
description = """MySQL is (as of March 2014) the world's second most widely used
 open-source relational database management system (RDBMS)."""

source_urls = ['http://dev.mysql.com/get/Downloads/MySQL-%(version_major_minor)s/']
sources = [SOURCELOWER_TAR_GZ]
checksums = ['5397549bb7c238f396c123db2df4cad2191b11adf8986de7fe63bff8e2786487']

toolchain = {'name': 'GCCcore', 'version': '6.4.0'}

dependencies = [
    # exact version of Boost needed
    ('Boost', '1.59.0'),
    ('libevent', '2.1.8'),
    ('ncurses', '6.0'),
    ('libedit', '20170329'),
    ('zlib', '1.2.11'),
    #    ('OpenSSL', '1.0.2m'),  # OS dependency should be preferred for security reasons
]

osdependencies = [('openssl-devel', 'libssl-dev', 'libopenssl-devel')]

builddependencies = [
    # use same binutils version that was used when building GCCcore toolchain
    ('binutils', '2.28'),
    ('CMake', '3.9.5'),
]

configopts = "-DWITHOUT_SERVER=1 "
configopts += "-DWITH_EDITLINE=system -DWITH_SSL=system -DWITH_ZLIB=system -DWITH_BOOST=system "

sanity_check_paths = {
    'files': ['bin/mysql'],
    'dirs': [],
}

moduleclass = 'devel'
