# This is for the custom build of Malt 
# Malt is downloaded from here:
# http://ab.inf.uni-tuebingen.de/data/software/malt/download/welcome.html
# The MALT_unix_0_4_1.sh is executed and the binaries are installed in
# malt/bin
# The malt directory is bundled into a tarball which will be installed
# This is a bit of a hack!
# The homepage is here:
# http://ab.inf.uni-tuebingen.de/software/malt/
# Contribution from the Crick HPC team
# uploaded by J. Sassmannshausen

easyblock = 'CmdCp'

name = 'MALT'
version = '0_4_1'

homepage = 'http://ab.inf.uni-tuebingen.de/software/malt'
description = """MALT (MEGAN alignment tool) is an extension of MEGAN (metagenome analyzer).
MALT performs alignment of metagenomic reads against a database of reference sequences 
(such as NR, GenBank or Silva) and produces a MEGAN RMA file as output. The software is 
currently under development. """

toolchain = SYSTEM

source_urls = ['https://ab.inf.uni-tuebingen.de/data/software/malt/download']
sources = ['MALT_unix_%(version)s.sh']
checksums = ['8ccf5f073be6d0960c0886b1fdfc6237515dfaf7d4b71a470db805d72bfc17f3']

# specify dependency on Java/1.8 "wrapper", rather than a specific Java version
dependencies = [('Java', '1.8', '', True)]

extract_sources = False
install_cmd = ['./MALT_unix_0_4_1.sh -c']

files_to_copy = ['malt-build', 'malt-run']

sanity_check_paths = {
    'files': ['malt-build', 'malt-run'],
    'dirs': ['class', 'jars', 'bin'],
}

moduleclass = 'bio'
