easyblock = 'MakeCp'

name = 'MEGAHIT'
version = '1.1.3'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://github.com/voutcn/megahit'
description = """An ultra-fast single-node solution for large and complex
 metagenomics assembly via succinct de Bruijn graph"""

toolchain = {'name': 'foss', 'version': '2017b'}

source_urls = ['https://github.com/voutcn/%(namelower)s/archive/']
sources = ['v%(version)s.tar.gz']
checksums = ['b6eefdee075aaf7a8f9090e2e8b08b770caff90aa43a255e0e220d82ce71c492']

dependencies = [
    ('Python', '3.6.3'),
]

# This is the CPU-only version.
#
# We're specifying 'version' because otherwise the Makefile will try to
# guess it using 'git describe --tag', which seems less reliable.
buildopts = 'version=v%(version)s verbose=1 use_gpu=0'

files_to_copy = [
    (['%(namelower)s', '%(namelower)s_asm_core', '%(namelower)s_sdbg_build', '%(namelower)s_toolkit'], 'bin'),
    'LICENSE',
    'README.md',
]

runtest = 'test'

sanity_check_paths = {
    'files': ['bin/%(namelower)s', 'bin/%(namelower)s_asm_core', 'bin/%(namelower)s_sdbg_build'],
    'dirs': []
}

sanity_check_commands = ['%(namelower)s -v']

moduleclass = 'bio'
