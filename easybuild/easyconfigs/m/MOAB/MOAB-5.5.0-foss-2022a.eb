name = 'MOAB'
version = '5.5.0'

homepage = 'https://sigma.mcs.anl.gov/moab-library/'
description = "The Mesh-Oriented datABase (MOAB) is a component for representing and evaluating mesh data."
software_license = 'LicenseGCC'
software_license_urls = ['https://bitbucket.org/fathomteam/moab/src/master/LICENSE']
toolchain = {'name': 'foss', 'version': '2022a'}

sources = [{
    'filename': 'moab.tar.gz',
    'git_config': {
        'url': 'https://bitbucket.org/fathomteam',
        'repo_name': 'moab',
        'tag':'5.5.0'
    },
}]

# patch needed for cmake handling of pythonpath variable within easybuild build environment 
patches = ['MOAB-5.5.0_fix-cmake-pythonpath.patch']

builddependencies = [('CMake', '3.23.1'),('make','4.3')]

dependencies = [
    ('Cython','0.29.33'),
    ('Eigen', '3.4.0'),
    ('HDF5', '1.12.2'),
    ('netCDF','4.9.0'),
    ('SciPy-bundle','2022.05')
]

easyblock = 'CMakeMake'

configopts = f"-DENABLE_HDF5=ON -DENABLE_PYMOAB=ON -DENABLE_FORTRAN=OFF -DBUILD_SHARED_LIBS=ON -DENABLE_BLASLAPACK=OFF"
