# This file is an EasyBuild reciPY as per https://github.com/hpcugent/easybuild
# Author: Pablo Escobar Lopez
# Swiss Institute of Bioinformatics
# Biozentrum - University of Basel

easyblock = 'MakeCp'

name = 'MIGRATE-N'
version = "4.2.2a"

homepage = 'http://popgen.sc.fsu.edu/Migrate/Migrate-n.html'
description = """ Migrate estimates population parameters, effective population sizes
 and migration rates of n populations, using genetic data.  It uses a coalescent theory 
 approach taking into account history of mutations and uncertainty of the genealogy. """

toolchain = {'name': 'goolf', 'version': '1.4.10'}

source_urls = ['http://popgen.sc.fsu.edu/currentversions/']
sources = ['migrate-%(version)s.src.tar.gz']

start_dir = "src"

parallel = 1

with_configure = True

# run "make thread && make mpis"
buildopts = ' thread && make mpis'

runtest = "shorttest"

files_to_copy = [(["src/migrate-n", "src/migrate-n-mpi"], "bin"), "README", "README_PARALLEL_GENERAL", "HISTORY"]

sanity_check_paths = {
    'files': ["bin/migrate-n", "bin/migrate-n-mpi"],
    'dirs': [""],
}

moduleclass = 'bio'
