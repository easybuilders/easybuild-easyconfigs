easyblock = 'PythonBundle'

name = 'MDTraj'
version = '1.11.0'

homepage = 'https://mdtraj.org'
description = "Read, write and analyze MD trajectories with only a few lines of Python code."

toolchain = {'name': 'foss', 'version': '2025b'}
toolchainopts = {'openmp': True}

builddependencies = [('Cython', '3.1.2')]

dependencies = [
    ('zlib', '1.3.1'),
    ('Python', '3.13.5'),
    ('Python-bundle-PyPI', '2025.07'),
    ('SciPy-bundle', '2025.07'),
    ('netcdf4-python', '1.7.2'),  # optional+tests
    ('networkx', '3.5'),  # optional+tests
    ('PyTables', '3.10.2'),  # optional+tests
]

exts_list = [
    ('pyparsing', '3.2.5', {
        'checksums': ['2df8d5b7b2802ef88e8d016a2eb9c7aeaa923529cd251ed0fe4608275d4105b6'],
    }),
    ('gsd', '4.2.0', {
        'checksums': ['eb197abd735e98817bcdc1ee34e4968231d572da48c097b3ccf316be828cf86a'],
    }),
    ('pytest_rerunfailures', '16.1', {
        'checksums': ['c38b266db8a808953ebd71ac25c381cb1981a78ff9340a14bcb9f1b9bff1899e'],
    }),
    ('mdtraj', version, {
        'patches': ['MDTraj-1.11.0_fix-tests-https.patch'],
        'runtest': "cd tests && pytest -v --numprocesses %(parallel)s",
        'source_urls': ['https://github.com/mdtraj/mdtraj/archive/'],
        'sources': [{'download_filename': '%(version)s.tar.gz', 'filename': '%(name)s-%(version)s-github.tar.gz'}],
        'testinstall': True,
        'use_pip_extras': 'optional',
        'checksums': [
            {'mdtraj-1.11.0-github.tar.gz': 'fefca787f882d0716a7aeb01b4d8e30caddbd2be0b2893acfa7201c31d13c786'},
            {'MDTraj-1.11.0_fix-tests-https.patch': 'bb4384205f67f3c65a5e003c97ef6e47d4fe3f545cc4a0f5017ee953a4a641e7'},
        ],
    }),
]

moduleclass = 'chem'
