# Author: Erik B Knudsen
# United Neux

easyblock = 'CMakeMake'

name = 'mcpl'
version = '2.2.0'

homepage = 'https://mctools.github.io/mcpl'
description = "MCPL (Monte Carlo Particle Lists) is library and a file format for storing " \
    "Monte Carlo particles to be used with a range of particle transport packages, " \
    "such as MCNP, OpenMC, PHITS, McStas, McXtrace, as well as supporting tools such as KDSource"

toolchain = {'name': 'foss', 'version': '2023a'}

github_account = 'mctools'
source_urls = ['https://github.com/mctools/mcpl/archive/refs/tags/']
sources = ['v%(version)s.tar.gz']
checksums = ['0cd926621d7d45d2bb39fab64732448b67f622cda9434a105de4c9d942a3db5c']

builddependencies = [
    ('CMake', '3.31.8'),  # Needs CMake > 3.28 for testing
]
dependencies = [
    ('SciPy-bundle', '2023.07'),
]

configopts = ' '.join([
    '-DMCPL_ENABLE_TESTING=ON',
])

runtest = True

sanity_check_paths = {
    'files': ["bin/mcpltool"],
    'dirs': ['lib', 'include'],
}

sanity_check_commands = [
    "mcpltool -v"
]

moduleclass = 'lib'
