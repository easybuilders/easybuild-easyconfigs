easyblock = 'MakeCp'

name = 'verifyBamID'
version = '1.1.3'

homepage = "http://csg.sph.umich.edu/kang/verifyBamID/index.html"
description = """verifyBamID is a software that verifies whether the reads in particular file match previously known 
 genotypes for an individual (or group of individuals), and checks whether the reads are contaminated as a mixture of 
 two samples. verifyBamID can detect sample contamination and swaps when external genotypes are available. When 
 external genotypes are not available, verifyBamID still robustly detects sample swaps.
"""

toolchain = {'name': 'foss', 'version': '2023b'}

source_urls = ['https://github.com/statgen/%(name)s/releases/download/v%(version)s/']
sources = ['%(name)sLibStatGen.%(version)s.tgz']
patches = ['%(name)s-%(version)s_fix_build_error.patch']

checksums = [
    'ac2d4997b8cda510c4dc85da8573e9387600df6e61b9cf12537f92651fdb401c',  # verifyBamIDLibStatGen.1.1.3.tgz
    '6ad199319eb2ae66b39a6f8cea609fa6cd5c40e42ae11cbfae05be5484345fef',  # verifyBamID-1.1.3_fix_build_error.patch    
]

buildopts = 'CXX="$CXX"'

files_to_copy = [(['%(name)s/bin/%(name)s'], 'bin')]

sanity_check_paths = {
    'files': ['bin/%(name)s'],
    'dirs': []
}

sanity_check_commands = [
    'verifyBamID 2>&1 | grep verifyBamID',
]

moduleclass = 'bio'
