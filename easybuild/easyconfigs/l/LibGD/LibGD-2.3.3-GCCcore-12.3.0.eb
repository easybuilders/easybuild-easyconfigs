easyblock = 'CMakeMake'

name = 'LibGD'
version = '2.3.3'

homepage = 'https://github.com/libgd/libgdl'
description = "GD is an open source code library for the dynamic creation of images by programmers."

toolchain = {'name': 'GCCcore', 'version': '12.3.0'}

github_account = 'libgd'
source_urls = ['https://github.com/libgd/libgd/releases/download/gd-%(version)s']
sources = ['libgd-%(version)s.tar.gz']

builddependencies = [
    ('binutils', '2.40'),
    ('CMake', '3.26.3'),
]

dependencies = [
    ('libjpeg-turbo', '2.1.5.1'),
    ('libpng', '1.6.39'),
    ('LibTIFF', '4.5.0'),
    ('fontconfig', '2.14.2'),
    ('freetype', '2.13.0'),
    ('zlib', '1.2.13'),
]

configopts = '-DENABLE_FONTCONFIG=ON -DENABLE_FREETYPE=ON -DENABLE_JPEG=ON '
configopts += '-DENABLE_PNG=ON -DENABLE_TIFF=ON'

sanity_check_paths = {
    'files': ['lib/libgd.%s' % SHLIB_EXT, 'include/gd.h'],
    'dirs': [],
}

moduleclass = 'lib'
