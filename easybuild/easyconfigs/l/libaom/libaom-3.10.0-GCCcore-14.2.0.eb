easyblock = 'CMakeMake'

name = 'libaom'
version = '3.10.0'

homepage = 'https://aomedia.googlesource.com/aom/'
description = ''

toolchain = {'name': 'GCCcore', 'version': '14.2.0'}

sources = [{
    'filename': SOURCELOWER_TAR_XZ,
    'git_config': {
        'url': 'https://aomedia.googlesource.com',
        'repo_name': 'aom',
        'tag': 'v%(version)s',
    }
}]
checksums = ['00113580e21757476d5ea7f49cb869f36c4dc51b2be7d6203d9b6b84c7c80b13']

builddependencies = [
    ('binutils', '2.42'),
    ('CMake', '3.31.3'),
    ('Perl', '5.40.0'),
    ('Yasm', '1.3.0'),
]

configopts = ['', '-DBUILD_SHARED_LIBS=1']

sanity_check_paths = {
    'files': ['bin/aomdec', 'bin/aomenc', 'lib/libaom.a', f'lib/libaom.{SHLIB_EXT}'],
    'dirs': [],
}

sanity_check_commands = [
    'aomdec --help',
    'aomenc --help',
]

moduleclass = 'lib'
