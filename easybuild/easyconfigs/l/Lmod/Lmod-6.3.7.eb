easyblock = 'ConfigureMake'

name = "Lmod"
version = "6.3.7"

homepage = "http://sourceforge.net/projects/lmod/"
description = """Lmod is a Lua based module system. Modules allow for dynamic modification
 of a user's environment under Unix systems. See www.tacc.utexas.edu/tacc-projects/lmod
 for a complete description. Lmod is a new implementation that easily handles the MODULEPATH
 Hierarchical problem. It is drop-in replacement for TCL/C modules and reads TCL modulefiles directly."""

toolchain = {'name': 'dummy', 'version': ''}

source_urls = ['https://github.com/TACC/Lmod/archive/']
sources = ['%(version)s.tar.gz']

builddependencies = [("Lua", "5.1.4-8")]

configopts = ' --with-lua-include=${EBROOTLUA}/include/ '
configopts += ' --with-mpathSearch=YES --with-caseIndependentSorting=YES --with-pinVersions=YES'

sanity_check_paths = {
    'files': ["lmod/%(version)s/libexec/lmod", "lmod/%(version)s/init/profile"],
    'dirs': []
}

moduleclass = "tools"
