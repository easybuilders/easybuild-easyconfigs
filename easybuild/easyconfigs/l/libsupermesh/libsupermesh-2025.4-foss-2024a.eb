# Author J. Sassmannshausen (Imperial College London/UK)

easyblock = 'CMakeMake'

name = 'libsupermesh'
version = '2025.4'
local_commit = '84becef14eb117defa49354116c04aa180471a07'

homepage = 'https://github.com/firedrakeproject/libsupermesh'
description = "libsupermesh parallel supermeshing library."

toolchain = {'name': 'foss', 'version': '2024a'}

source_urls = ['https://github.com/firedrakeproject/libsupermesh/archive/']
sources = [f'v{version}.tar.gz']
checksums = ['53434b7e0e919267ffeae35550ad9a0c2c28cb082e7ccb4bbd2ecb5d78a514cb']

builddependencies = [
    ('CMake', '3.29.3'),
]

dependencies = [
    ('Python', '3.12.3'),
    ('Rtree', '1.4.0'),
    ('libspatialindex', '2.0.0'),
]

configopts = ['-DBUILD_SHARED_LIBS=ON', '-DBUILD_SHARED_LIBS=OFF']

sanity_check_paths = {
    'files': [f'include/{name}.h', f'lib/{name}.a', f'lib/{name}.{SHLIB_EXT}'],
    'dirs': [],
}

test_cmd = 'ctest'

moduleclass = 'numlib'
