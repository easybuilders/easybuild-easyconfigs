##
# Author:    Wahid MAINASSARA <wahid.mainassara@lxp.lu>
##
name = 'NAMD'
version = '2.14'
local_cuda_suffix = '-CUDA-%(cudaver)s'
versionsuffix = '-ucx' + local_cuda_suffix

homepage = 'https://www.ks.uiuc.edu/Research/namd/'
description = """NAMD is a parallel molecular dynamics code designed for high-performance simulation of
 large biomolecular systems."""

toolchain = {'name': 'foss', 'version': '2022a'}
toolchainopts = {'usempi': False, 'openmp': False, 'pic': True}

source_urls = ['https://www.ks.uiuc.edu/Research/namd/%(version)s/download/946183/']
sources = ['NAMD_%(version)s_Source.tar.gz']
checksums = ['34044d85d9b4ae61650ccdba5cda4794088c3a9075932392dd0752ef8c049235']

dependencies = [
    ('CUDA', '11.7.0', '', True),
    ('UCX-CUDA', '1.13.1', local_cuda_suffix),
    ('Tcl', '8.6.12'),
]

# /bin/csh is required by 'config' script
osdependencies = ['tcsh']

charm_arch = "multicore-linux-%(arch)s"
charm_extra_cxxflags = '-fpermissive'

moduleclass = 'chem'
