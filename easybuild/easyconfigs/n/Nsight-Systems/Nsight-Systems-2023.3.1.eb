easyblock = 'Binary'

name = 'Nsight-Systems'
version = '2023.3.1'

homepage = 'https://developer.nvidia.com/nsight-systems'
description = """NVIDIA® Nsight™ Systems is a system-wide performance analysis tool designed to visualize an
application’s algorithm, help you select the largest opportunities to optimize, and tune to scale efficiently across
any quantity of CPUs and GPUs in your computer; from laptops to DGX servers."""

toolchain = SYSTEM

download_instructions = """
  Step 1: Go to https://developer.nvidia.com/downloads/assets/tools/secure/nsight-systems/2023_3/nsightsystems-linux-public-2023.3.1.92-3314722.run/ and download NsightSystems-linux-public-2023.3.1.92-3314722.run
  Step 2: The download requires login.
  Step 3: Adjust the directory of the .run file if needed.
"""
sources = ['NsightSystems-linux-public-%(version)s.92-3314722.run']
checksums = ['d4f29973e805af5de717b893dab4776244e7617a7ca8e20e92548f3901119a1a']

install_cmd = 'sh ' + sources[0] + ' --target %(builddir)s --nox11 -- -noprompt --targetpath=%(installdir)s'

sanity_check_paths = {
    'files': ['bin/nsys', 'bin/nsys-ui'],
    'dirs': [],
}

moduleclass = 'tools'
