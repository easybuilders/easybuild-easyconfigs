##
# Author:    Robert Mijakovic <robert.mijakovic@lxp.lu>
##
easyblock = 'Binary'

name = 'Nsight-Systems'
version = '2021.3.1'

homepage = 'https://developer.nvidia.com/nsight-systems'
description = """NVIDIA® Nsight™ Systems is a system-wide performance analysis tool designed to visualize an
application’s algorithms, help you identify the largest opportunities to optimize, and tune to scale  efficiently across
any quantity or size of CPUs and GPUs; from large server to our smallest SoC."""

toolchain = SYSTEM

# Download requires login https://developer.nvidia.com/gameworksdownload#?dn=nsight-systems-2021-3-1-54
sources = ['NsightSystems-linux-public-%(version)s.54-ee9c30a.run']
checksums = ['4fb70e613db08e958069c66f4992c43ae4117ba4b3cd040a8e107b7f83c77439']

install_cmd = 'sh ' + sources[0] + ' --target %(builddir)s --nox11 -- -noprompt --targetpath=%(installdir)s'

sanity_check_paths = {
    'files': ['bin/nsys', 'bin/nsys-ui'],
    'dirs': [],
}

sanity_check_commands = ['nsys --help']

modextrapaths = {
    'LD_LIBRARY_PATH':           ['host-linux-x64', 'target-linux-x64'],
    'LIBRARY_PATH':              ['host-linux-x64', 'target-linux-x64'],
}

moduleclass = 'tools'
