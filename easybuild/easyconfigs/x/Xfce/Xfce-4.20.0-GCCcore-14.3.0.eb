easyblock = 'Bundle'

name = 'Xfce'
version = '4.20.0'

homepage = 'https://www.xfce.org/'
description = ''

toolchain = {'name': 'GCCcore', 'version': '14.3.0'}

builddependencies = [
    ('binutils', '2.44'),
    ('Meson', '1.8.2'),
    ('Ninja', '1.13.0'),
    ('pkgconf', '2.4.3'),
    ('Vala', '0.56.18'),
    ('libxslt', '1.1.43'),
]

dependencies = [
    ('X11', '20250608'),
    ('Wayland', '1.24.0'),
    ('GTK3', '3.24.43'),
    ('gtk-layer-shell', '0.9.2'),
    ('libwnck', '43.3'),
    ('libnotify', '0.8.7'),
    ('GLib', '2.85.3'),
    ('Gdk-Pixbuf', '2.42.12'),
    ('GObject-Introspection', '1.84.0'),
    ('OpenGL', '2025.09'),
    ('libyaml', '0.2.5'),
]

default_easyblock = 'ConfigureMake'

default_component_specs = {
    'source_urls': ['https://archive.xfce.org/xfce/%(version_major)s.%(version_minor)s/src/'],
    'sources': [SOURCELOWER_TAR_BZ2],
    'start_dir': '%(namelower)s-%(version)s',
}

components = [
    ('libdisplay-info', '0.3.0', {  # Required for X11 support in libxfce4windowing
        'easyblock': 'MesonNinja',
        'source_urls': ['https://gitlab.freedesktop.org/emersion/libdisplay-info/-/releases/%(version)s/downloads/'],
        'sources': [SOURCELOWER_TAR_XZ],
        'checksums': ['6ae77cd937f9cf7d1321d35c116062c4911e8447010a6a713ac4286f7a9d5987'],
    }),
    ('xfce4-dev-tools', version, {
        'checksums': ['1fba39a08a0ecc771eaa3a3b6e4272a4f0b9e7c67d0f66e780cd6090cd4466aa'],
    }),
    ('libxfce4util', version, {
        'checksums': ['21493f9c9995a282823db93839f6b9f06ae31edb094191ba9acf04d932a2b592'],
    }),
    ('xfconf', version, {
        'checksums': ['8bc43c60f1716b13cf35fc899e2a36ea9c6cdc3478a8f051220eef0f53567efd'],
    }),
    ('libxfce4ui', version, {
        'checksums': ['75e8996984f20375aadecd5c16f5147c211ed0bd26d7861ab0257561eb76eaee'],
    }),
    ('garcon', version, {
        'checksums': ['7fb8517c12309ca4ddf8b42c34bc0c315e38ea077b5442bfcc4509415feada8f'],
    }),
    ('exo', version, {
        'checksums': ['4277f799245f1efde01cd917fd538ba6b12cf91c9f8a73fe2035fd5456ec078d'],
    }),
    ('libxfce4windowing', version, {
        'checksums': ['56f29b1d79606fb00a12c83ef4ece12877d2b22bf1acaaff89537fbe8e939f68'],
    }),
    ('xfce4-panel', version, {
        'checksums': ['ff33cd5f5d16c2193fe305f4878d82cd8d2feea92f2594bcd27b2b5c392d43b8'],
    }),
    ('thunar', version, {
        'checksums': ['27731a76f3aecf3752b1ca35afad89e264c52244f70083d933507dd4a17548b0'],
    }),
    ('xfce4-settings', version, {
        'checksums': ['23548da3429a296501fbfdbc98a861ee241b9fdd47e8d5de1781f57c6bbce5a9'],
    }),
    ('xfce4-session', version, {
        'checksums': ['5229233fe6ee692361cc28724886c5b08e0216d89f09c42d273191d38fd64f85'],
        'configopts': '--with-wayland-session-prefix=%(installdir)s --with-xsession-prefix=%(installdir)s',
    }),
    ('xfdesktop', version, {
        'checksums': ['227041ba80c7f3eb9c99dec817f1132b35d8aec7a4335703f61ba1735cd65632'],
    }),
    ('xfwm4', version, {
        'checksums': ['a58b63e49397aa0d8d1dcf0636be93c8bb5926779aef5165e0852890190dcf06'],
    }),
    ('xfce4-appfinder', version, {
        'checksums': ['82ca82f77dc83e285db45438c2fe31df445148aa986ffebf2faabee4af9e7304'],
    }),
    ('tumbler', version, {
        'checksums': ['74b1647d55926547e98bfac70838ff63c5a84299a5e10c81c38d1fab90e25880'],
    }),
]

sanity_check_paths = {
    'files': ['bin/xfce4-session'],
    'dirs': [],
}

sanity_check_commands = ['xfce4-session -h']

moduleclass = 'vis'
