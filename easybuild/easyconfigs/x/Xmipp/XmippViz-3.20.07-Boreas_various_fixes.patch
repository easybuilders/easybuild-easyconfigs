Make sure scons sees the complete environment from EasyBuild.
Only use CXXFLAGS from EasyBuild.
Author: Ã…ke Sandgren, 2019-10-23
diff -ur xmippViz-3.20.07-Boreas.orig/SConstruct xmippViz-3.20.07-Boreas/SConstruct
--- xmippViz-3.20.07-Boreas.orig/SConstruct	2020-10-13 10:33:21.000000000 +0200
+++ xmippViz-3.20.07-Boreas/SConstruct	2021-05-20 15:13:19.250949331 +0200
@@ -145,14 +145,7 @@
 env['LINKERFORPROGRAMS'] = os.environ.get('LINKERFORPROGRAMS')
 env['CCFLAGS'] = os.environ.get('CCFLAGS', '').split()
 cxxFlags = os.environ.get('CXXFLAGS', '')
-if os.environ.get('DEBUG', '0') == 'True':  # FIXME, use 1, true, yes...
-    cxxFlags += ' -g'
-else:
-    if cxxFlags.find("-O") == -1:
-        cxxFlags += (
-            " -O3" if 'TRAVIS' not in os.environ else " -O0")  # don't optimize on Travis, as it slows down the build
 env['CXXFLAGS'] = cxxFlags.split()
-os.environ['CXXFLAGS'] = cxxFlags  # FIXME use only env or os.environ in the rest of the code
 env['LINKFLAGS'] = os.environ.get('LINKFLAGS', '').split()
 
 for path in ['JAVA_HOME', 'JAVA_BINDIR']:
@@ -239,7 +232,7 @@
     if not sources and env.TargetInBuild(name):
         Exit('No sources found for Library: %s. Exiting!!!' % name)
 
-    env2 = Environment()
+    env2 = Environment(ENV=os.environ)
     env2['ENV']['PATH'] = env['ENV']['PATH']
 
     mpiArgs = {}
@@ -476,7 +469,7 @@
 
 def libraryTest(env, name, lang='c'):
     """Check the existence of a concrete C/C++ library."""
-    env2 = Environment(LIBS=env.get('LIBS', ''))
+    env2 = Environment(ENV=os.environ,LIBS=env.get('LIBS',''))
     conf = Configure(env2)
     conf.CheckLib(name, language=lang)
     env2 = conf.Finish()
