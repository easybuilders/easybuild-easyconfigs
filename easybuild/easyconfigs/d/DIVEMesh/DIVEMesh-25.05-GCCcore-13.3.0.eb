# Author: J. SaÃŸmannshausen (Imperial College London/UK)

easyblock = 'MakeCp'

name = 'DIVEMesh'
version = '25.05'

homepage = 'https://reef3d.wordpress.com/'
description = """
REEF3D and its dependency DIVEMesh are hydrodynamics frameworks that offers
open-source CFD and wave models.  The software is efficiently parallelized,
designed to run on a large number of processors. High-order spatial and
temporal discretization schemes result in accurate and stable numerical
behavior. The modular programming approach allows the framework to incorporate
a range of different flow solvers which together represent all relevant length
scales. With a focus on coastal, marine and hydraulic engineering flows,
tailor-made multiphysics solvers are available for a range of relevant
problems (e.g. sediment transport or floating body dynamics).
"""

toolchain = {'name': 'GCCcore', 'version': '13.3.0'}
toolchainopts = {'openmp': True}

github_account = 'REEF3D'
source_urls = [GITHUB_SOURCE]
sources = [f'{version}.tar.gz']
patches = [f'{name}-{version}_makefile.patch']
checksums = [
    {'25.05.tar.gz': 'b607e354f0b84052222c8c2146947192df758d9d67859d9b72c777b546637538'},
    {'DIVEMesh-25.05_makefile.patch': '4d4fe0f692179cdc42d16604c6350a8992a6fab4c552b174ff2eb6a9d14097be'},
]

builddependencies = [
    ('binutils', '2.42'),
    ('make', '4.4.1'),
]
_executables = ['bin/DiveMESH']
files_to_copy = [(_executables, 'bin'), 'LICENSE']

sanity_check_paths = {
    'files': ['bin/DiveMESH'],
    'dirs': [''],
}

sanity_check_commands = [
    "DiveMESH -h 2>&1 | grep 'Open-Source Meshing'",
]

moduleclass = 'geo'
