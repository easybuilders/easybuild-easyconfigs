# Digital Research Alliance of Canada - Calcul Québec - Université Laval

easyblock = 'Apptainer'

name = 'DeepVariant'
version = '1.8.0'

homepage = 'https://github.com/google/deepvariant'
description = """DeepVariant is a deep learning-based variant caller that takes aligned reads (in BAM or CRAM format), produces pileup image tensors from them, classifies each tensor using a convolutional neural network, and finally reports the results in a standard VCF or gVCF file.

DeepVariant supports germline variant-calling in diploid organisms."""

toolchain = SYSTEM
dependencies = [('Apptainer', '1')]

installopts = '-s google/deepvariant '
installopts += '-i image '
installopts += '-n %(namelower)s '
installopts += '-v %(version)s '

container_path = '/cvmfs/containers.computecanada.ca/content/containers/%(namelower)s-%(version)s'
aliases = ["run_deepvariant"]
apptainer_params = '-e'

sanity_check_paths = {
    'files': ["opt/deepvariant/bin/run_deepvariant"],
    'dirs': ["opt/deepvariant/bin"],
}

moduleclass = 'bio'
