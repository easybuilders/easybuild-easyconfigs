name = 'DOLFIN'
version = '1.4.0'

homepage = 'https://bitbucket.org/fenics-project/dolfin'
description = """DOLFIN is the C++/Python interface of FEniCS, providing a consistent PSE
(Problem Solving Environment) for ordinary and partial differential equations."""

toolchain = {'name': 'foss', 'version': '2014b'}
toolchainopts = {'usempi': True, 'pic': True, 'packed-linker-options': False}

sources = [SOURCELOWER_TAR_GZ]
source_urls = ['https://bitbucket.org/fenics-project/dolfin/downloads/']

patches = [
 #   'wl_pkg_linkflags.patch',
 #   'petsc-slepc-libs.patch',
    # 'DOLFIN-1.0.0_GCC-4.7.patch',
]

builddependencies = [('CMake', '3.0.0')]

python = 'Python'
python_version = '2.7.8'
versionsuffix = '-%s-%s' % (python, python_version)
parmetisversion = '4.0.3'

makeopts = 'CFLAGS=$CFLAGS -L$EBROOTSUITESPARSE/SuiteSparse_config'
dependencies = [
    (python, python_version),
    ('Boost', '1.55.0', versionsuffix),
    ('SWIG', '3.0.2', versionsuffix),
    ('FFC', '1.4.0', versionsuffix),
    ('FIAT', '1.4.0', versionsuffix),
    ('Instant', '1.4.0', versionsuffix),
    ('UFL', '1.4.0', versionsuffix),
    ('SCOTCH', '6.0.0_esmumps'),
    ('Armadillo', '4.320.0', versionsuffix),
    ('ParMETIS', parmetisversion),
    ('SuiteSparse', '4.2.1', '-ParMETIS-%s' % parmetisversion),
    ('CGAL', '4.4', versionsuffix),
    ('PETSc', '3.5.1', versionsuffix),
    ('SLEPc', '3.5.0', versionsuffix),
    ('MTL4', '4.0.9555', '', True),
    ('Trilinos', '11.10.2', versionsuffix),
    ('Sphinx', '1.2.2', versionsuffix),
    ('zlib', '1.2.8'),
    ('libxml2', '2.9.1')
]

moduleclass = 'math'
