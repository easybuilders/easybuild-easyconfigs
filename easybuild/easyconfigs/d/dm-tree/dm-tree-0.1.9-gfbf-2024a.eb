easyblock = 'PythonPackage'

name = 'dm-tree'
version = '0.1.9'

homepage = 'https://github.com/deepmind/tree'
description = """dm-tree provides tree, a library for working with nested data structures. In a way,
tree generalizes the builtin map function which only supports flat sequences, and
allows to apply a function to each "leaf" preserving the overall structure."""

toolchain = {'name': 'gfbf', 'version': '2024a'}

sources = ['dm_tree-%(version)s.tar.gz']
patches = ['dm-tree-0.1.9_pybind11.patch']
checksums = [
    {'dm_tree-0.1.9.tar.gz': 'a4c7db3d3935a5a2d5e4b383fc26c6b0cd6f78c6d4605d3e7b518800ecd5342b'},
    {'dm-tree-0.1.9_pybind11.patch': '39ae1e40e6a027a6c6e085b20d33fe8de0e8103963c2ae0da665597ed9c6b41b'},
]

builddependencies = [
    ('pybind11', '2.12.0'),
]
dependencies = [
    ('Python', '3.12.3'),
    ('absl-py', '2.1.0'),
    ('Abseil', '20240722.0'),
    ('SciPy-bundle', '2024.05'),
    ('wrapt', '1.16.0'),
]

download_dep_fail = True

use_pip = True
sanity_pip_check = True

options = {'modulename': 'tree'}

moduleclass = 'lib'
