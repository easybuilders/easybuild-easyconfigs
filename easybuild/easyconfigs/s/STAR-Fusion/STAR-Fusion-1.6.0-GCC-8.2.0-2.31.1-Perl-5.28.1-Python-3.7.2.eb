# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
# Author: Pablo Escobar Lopez
# sciCORE - University of Basel
# SIB Swiss Institute of Bioinformatics
# updated for v1.5.0 by Jonas Demulemeester
# updated for v1.6.0 by Alex Domingo

easyblock = 'Tarball'

name = 'STAR-Fusion'
version = '1.6.0'
versionsuffix = '-Perl-%(perlver)s-Python-%(pyver)s'

homepage = 'https://github.com/STAR-Fusion/STAR-Fusion'
description = """STAR-Fusion uses the STAR aligner to identify candidate fusion transcripts
 supported by Illumina reads. STAR-Fusion further processes the output generated by the STAR aligner
 to map junction reads and spanning reads to a reference annotation set."""

toolchain = {'name': 'GCC', 'version': '8.2.0-2.31.1'}

# Required databases are available at https://data.broadinstitute.org/Trinity/CTAT_RESOURCE_LIB
source_urls = ['https://github.com/%(name)s/%(name)s/releases/download/v%(version)s/']
sources = ['%(name)s-v%(version)s.FULL.tar.gz']
checksums = ['d4fa0865aab00cfb6fcd698f77797c98f62a3cd730e00df549bbee51c4e4fa61']

dependencies = [
    ('Python', '3.7.2'),  # needed for the inspector
    ('Perl', '5.28.1'),
    ('DB', '18.1.32'),
    ('SAMtools', '1.9'),
    ('STAR', '2.7.0f'),
]

# these are the perl libraries dependencies
exts_defaultclass = 'PerlModule'
exts_filter = ("perldoc -lm %(ext_name)s ", "")

exts_list = [
    ('DB_File', '1.852', {
        'preconfigopts': "DB_FILE_INCLUDE=$EBROOTDB/include DB_FILE_LIB=$EBROOTDB/lib ",
        'runtest': 'test',
        'source_tmpl': '%(name)s-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/P/PM/PMQS/'],
        'checksums': ['3ab7957523b6da39c55cb2ec4e677d88aa4034fd0b2f40788781a58e7d078391'],
    }),
    ('Carp::Assert', '0.21', {
        'source_tmpl': 'Carp-Assert-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/N/NE/NEILB/'],
        'checksums': ['924f8e2b4e3cb3d8b26246b5f9c07cdaa4b8800cef345fa0811d72930d73a54e'],
    }),
    ('common::sense', '3.74', {
        'source_tmpl': 'common-sense-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/M/ML/MLEHMANN/'],
        'checksums': ['771f7d02abd1ded94d9e37d3f66e795c8d2026d04defbeb5b679ca058116bbf3'],
    }),
    ('Types::Serialiser', '1.0', {
        'source_tmpl': 'Types-Serialiser-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/M/ML/MLEHMANN/'],
        'checksums': ['7ad3347849d8a3da6470135018d6af5fd8e58b4057cd568c3813695f2a04730d'],
    }),
    ('JSON::XS', '4.02', {
        'source_tmpl': 'JSON-XS-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/M/ML/MLEHMANN/'],
        'checksums': ['a5ad172138071a14729da8a01921ca233da4fe2bed290ffdfb8e560dd8adcf16'],
    }),
    ('PerlIO::gzip', '0.20', {
        'source_tmpl': 'PerlIO-gzip-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/N/NW/NWCLARK/'],
        'checksums': ['4848679a3f201e3f3b0c5f6f9526e602af52923ffa471a2a3657db786bd3bdc5'],
    }),
    ('Time::Local', '1.28', {
        'source_tmpl': 'Time-Local-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/D/DR/DROLSKY/'],
        'checksums': ['9278b9e5cc99dcbb0fd27a43e914828b59685601edae082889b5ee7266afe10e'],
    }),
    ('Socket', '2.029', {
        'source_tmpl': '%(name)s-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/P/PE/PEVANS/'],
        'checksums': ['3a8d1710a28bf5d7bc46737e43e83657ed4b1c1842efc4cde06c9dd3f6831f06'],
    }),
    ('IO::File', '1.39', {
        'source_tmpl': 'IO-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/T/TO/TODDR/'],
        'checksums': ['4f0502e7f123ac824188eb8873038aaf2ddcc29f8babc1a0b2e1cd34b55a1fca'],
    }),
    ('IO::Select', '1.39', {
        'source_tmpl': 'IO-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/T/TO/TODDR/'],
        'checksums': ['4f0502e7f123ac824188eb8873038aaf2ddcc29f8babc1a0b2e1cd34b55a1fca'],
    }),
    ('IO::Socket', '1.39', {
        'source_tmpl': 'IO-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/T/TO/TODDR/'],
        'checksums': ['4f0502e7f123ac824188eb8873038aaf2ddcc29f8babc1a0b2e1cd34b55a1fca'],
    }),
    ('Net::Domain', '3.11', {
        'source_tmpl': 'libnet-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/S/SH/SHAY/'],
        'checksums': ['2fab1e4d6e565c77f6e845368790de65cb2f966fcd9bb56a41d0e7b5851a52d3'],
    }),
    ('MIME::Base64', '3.15', {
        'source_tmpl': 'MIME-Base64-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/G/GA/GAAS/'],
        'checksums': ['7f863566a6a9cb93eda93beadb77d9aa04b9304d769cea3bb921b9a91b3a1eb9'],
    }),
    ('parent', '0.237', {
        'source_tmpl': '%(name)s-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/C/CO/CORION/'],
        'checksums': ['1089d9648565c1d1e655fa4cb603272d3126747b7b5f836ffee685e27e53caae'],
    }),
    ('Encode', '3.01', {
        'source_tmpl': '%(name)s-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/D/DA/DANKOGAI/'],
        'checksums': ['d4555f570491648dbbd602bce7966672834b4c8f45acaa6757de474fca3a4d87'],
    }),
    ('Data::Dumper', '2.173', {
        'source_tmpl': 'Data-Dumper-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/X/XS/XSAWYERX/'],
        'checksums': ['697608b39330988e519131be667ff47168aaaaf99f06bd2095d5b46ad05d76fa'],
    }),
    ('Cwd', '3.75', {
        'source_tmpl': 'PathTools-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/X/XS/XSAWYERX/'],
        'checksums': ['a558503aa6b1f8c727c0073339081a77888606aa701ada1ad62dd9d8c3f945a2'],
    }),
    ('XSLoader', '0.24', {
        'source_tmpl': '%(name)s-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/S/SA/SAPER/'],
        'checksums': ['e819a35a6b8e55cb61b290159861f0dc00fe9d8c4f54578eb24f612d45c8d85f'],
    }),
    ('Storable', '3.15', {
        'source_tmpl': '%(name)s-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/X/XS/XSAWYERX/'],
        'checksums': ['fc3dad06cb2e6fc86a2f2abc5b5491d9da328ca3e6b6306559c224521db174da'],
    }),
    ('Scalar::Util', '1.50', {
        'source_tmpl': 'Scalar-List-Utils-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/P/PE/PEVANS/'],
        'checksums': ['06aab9c693380190e53be09be7daed20c5d6278f71956989c24cca7782013675'],
    }),
    ('Test::More', '1.302164', {
        'source_tmpl': 'Test-Simple-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/E/EX/EXODIST/'],
        'checksums': ['50277b613f09cd52eb87b02c69ce0517b80080be8a8d80e1eda609479b0d6615'],
    }),
    ('constant', '1.33', {
        'source_tmpl': '%(name)s-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/R/RJ/RJBS/'],
        'checksums': ['79965d4130eb576670e27ca0ae6899ef0060c76da48b02b97682166882f1b504'],
    }),
    ('URI::Escape', '1.76', {
        'source_tmpl': 'URI-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/O/OA/OALDERS/'],
        'checksums': ['b2c98e1d50d6f572483ee538a6f4ccc8d9185f91f0073fd8af7390898254413e'],
    }),
    ('Text::Wrap', '2013.0523', {
        'source_tmpl': 'Text-Tabs+Wrap-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/M/MU/MUIR/modules/'],
        'checksums': ['b9cb056fffb737b9c12862099b952bf4ab4b1f599fd34935356ae57dab6f655f'],
    }),
    ('Test', '1.26', {
        'source_tmpl': '%(name)s-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/J/JE/JESSE/'],
        'checksums': ['f7701bd28e05e7f82fe9a181bbab38f53fa6aeae48d2a810da74d1b981d4f392'],
    }),
    ('Pod::Escapes', '1.07', {
        'source_tmpl': 'Pod-Escapes-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/N/NE/NEILB/'],
        'checksums': ['dbf7c827984951fb248907f940fd8f19f2696bc5545c0a15287e0fbe56a52308'],
    }),
    ('Pod::Simple', '3.39', {
        'source_tmpl': 'Pod-Simple-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/K/KH/KHW/'],
        'checksums': ['15a97d4b61ec628bc4968d1378002e5bcf256dceb190a35810717c15f31b0462'],
    }),
    ('Pod::Man', '4.12', {
        'source_tmpl': 'podlators-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/R/RR/RRA/'],
        'checksums': ['948717da19630a5f003da4406da90fe1cbdec9ae493671c90dfb6d8b3d63b7eb'],
    }),
    ('Data::Dumper', '2.173', {
        'source_tmpl': 'Data-Dumper-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/X/XS/XSAWYERX/'],
        'checksums': ['697608b39330988e519131be667ff47168aaaaf99f06bd2095d5b46ad05d76fa'],
    }),
    ('Text::ParseWords', '3.30', {
        'source_tmpl': 'Text-ParseWords-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/C/CH/CHORNY/'],
        'checksums': ['85e0238179dd43997e58c66bd51611182bc7d533505029a2db0d3232edaff5e8'],
    }),
    ('Perl::OSType', '1.010', {
        'source_tmpl': 'Perl-OSType-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/D/DA/DAGOLDEN/'],
        'checksums': ['e7ed4994b5d547cb23aadb84dc6044c5eb085d5a67a6c5624f42542edd3403b2'],
    }),
    ('Locale::Maketext::Simple', '0.21', {
        'source_tmpl': 'Locale-Maketext-Simple-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/J/JE/JESSE/'],
        'checksums': ['b009ff51f4fb108d19961a523e99b4373ccf958d37ca35bf1583215908dca9a9'],
    }),
    ('Params::Check', '0.38', {
        'source_tmpl': 'Params-Check-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/B/BI/BINGOS/'],
        'checksums': ['f0c9d33876c36b1bca1475276d26d2efaf449b256d7cc8118fae012e89a26290'],
    }),
    ('List::Util', '1.50', {
        'source_tmpl': 'Scalar-List-Utils-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/P/PE/PEVANS/'],
        'checksums': ['06aab9c693380190e53be09be7daed20c5d6278f71956989c24cca7782013675'],
    }),
    ('Module::Metadata', '1.000036', {
        'source_tmpl': 'Module-Metadata-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/E/ET/ETHER/'],
        'checksums': ['1c70e438cec1f7f99a5cccd4529efb4ee0fb7ca958ca885ebf09952015b957aa'],
    }),
    ('Module::CoreList', '5.20190620', {
        'source_tmpl': 'Module-CoreList-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/B/BI/BINGOS/'],
        'checksums': ['319092da2ca6432549dd054da43a349ec6afd29a1ac3e8be779c130d283b2159'],
    }),
    ('Module::Load', '0.34', {
        'source_tmpl': 'Module-Load-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/B/BI/BINGOS/'],
        'checksums': ['7f5b0c4d3cc8ba867639bff61ad857a940970ea246dd3b0a6729dd7fc84059f3'],
    }),
    ('Module::Load::Conditional', '0.68', {
        'source_tmpl': 'Module-Load-Conditional-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/B/BI/BINGOS/'],
        'checksums': ['7627b55cd94a2f1a4667f9203e2c990cad015bf34ec6b41b4f73af848f0698fd'],
    }),
    ('IPC::Cmd', '1.02', {
        'source_tmpl': 'IPC-Cmd-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/B/BI/BINGOS/'],
        'checksums': ['502129252aabce96e5442143c4363dc7440b6dcf1a79a7fd245908b62f067063'],
    }),
    ('ExtUtils::MakeMaker', '7.36', {
        'source_tmpl': 'ExtUtils-MakeMaker-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/B/BI/BINGOS/'],
        'checksums': ['06cef6429315cdc6afa9b2dc6fbdfa33538b6f68c827f441294621858e28c558'],
    }),
    ('ExtUtils::CBuilder', '0.280231', {
        'source_tmpl': 'ExtUtils-CBuilder-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/A/AM/AMBS/'],
        'checksums': ['e6e72546ca0468c10bb50d4aba2a9b3908e9fe4d7708e7ee800327be075eeeeb'],
    }),
    ('ExtUtils::ParseXS', '3.35', {
        'source_tmpl': 'ExtUtils-ParseXS-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/S/SM/SMUELLER/'],
        'checksums': ['41def0511278a2a8ba9afa25ccab45b0453f75e7fd774e8644b5f9a57cc4ee1c'],
    }),
    ('ExtUtils::CppGuess', '0.19', {
        'source_tmpl': 'ExtUtils-CppGuess-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/E/ET/ETJ/'],
        'checksums': ['4cc631bab662848ea7c8899e0c62cdfdb367f2fe205b5bd85dfc1082672a6ad3'],
    }),
    ('AutoLoader', '5.74', {
        'source_tmpl': '%(name)s-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/S/SM/SMUELLER/'],
        'checksums': ['2fac75b05309f71a6871804cd25e1a3ba0a28f43f294fb54528077558da3aff4'],
    }),
    ('Set::IntervalTree', '0.12', {
        'source_tmpl': 'Set-IntervalTree-%(version)s.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/S/SL/SLOYD/'],
        'checksums': ['6fd4000e4022968e2ce5b83c07b189219ef1925ecb72977b52a6f7d76adbc349'],
    }),
]

modextrapaths = {
    'PATH': "",  # add installation dir to PATH
    'PERL5LIB': 'lib/perl5/site_perl/%(perlver)s/'
}

sanity_check_paths = {
    'files': ['STAR-Fusion'],
    'dirs': []
}

moduleclass = 'bio'
