# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
# Author: Pablo Escobar Lopez
# sciCORE - University of Basel
# SIB Swiss Institute of Bioinformatics 
# updated for v1.5.0 by Jonas Demulemeester

easyblock = 'Tarball'

name = 'STAR-Fusion'
version = '1.5.0'
versionsuffix = '-Perl-%(perlver)s'

homepage = 'https://github.com/STAR-Fusion/STAR-Fusion'
description = """STAR-Fusion uses the STAR aligner to identify candidate fusion transcripts 
 supported by Illumina reads. STAR-Fusion further processes the output generated by the STAR aligner 
 to map junction reads and spanning reads to a reference annotation set."""

toolchain = {'name': 'foss', 'version': '2018b'}

source_urls = ['https://github.com/%(name)s/%(name)s/releases/download/%(name)s-v%(version)s/']
sources = ['%(name)s-v%(version)s.FULL.tar.gz']
checksums = ['229cbf7980496d72de0bfab5bde7148ff3111a99b72c6169d1a04120a52508b4']

dependencies = [
    ('Perl', '5.28.0'),
    ('DB', '18.1.25'),
    ('STAR', '2.6.1c'),
]

# these are the perl libraries dependencies
exts_defaultclass = 'PerlModule'
exts_filter = ("perldoc -lm %(ext_name)s ", "")

exts_list = [
    ('ExtUtils::CppGuess', '0.12', {
        'source_tmpl': 'ExtUtils-CppGuess-0.12.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/E/ET/ETJ/'],
        'checksums': ['31c47b5b15e3e9fd5ae7b35881a0fffd26a2983b241e7e3a1bc340d6d446186b'],
    }),
    ('Set::IntervalTree', '0.12', {
        'source_tmpl': 'Set-IntervalTree-0.12.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/S/SL/SLOYD/'],
        'checksums': ['6fd4000e4022968e2ce5b83c07b189219ef1925ecb72977b52a6f7d76adbc349'],
    }),
    ('DB_File', '1.843', {
        'source_tmpl': 'DB_File-1.843.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/P/PM/PMQS/'],
        'checksums': ['de24e3d1e56b1b56c1f143590fb8ab8b812ebd9697e9c01349b0ba11c36f346a'],
        'preconfigopts': "DB_FILE_INCLUDE=$EBROOTDB/include DB_FILE_LIB=$EBROOTDB/lib ",
        'runtest': 'test',
    }),
    ('Carp::Assert', '0.21', {
        'source_tmpl': 'Carp-Assert-0.21.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/N/NE/NEILB/'],
        'checksums': ['924f8e2b4e3cb3d8b26246b5f9c07cdaa4b8800cef345fa0811d72930d73a54e'],
    }),
    ('common::sense', '3.74', {
        'source_tmpl': 'common-sense-3.74.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/M/ML/MLEHMANN/'],
        'checksums': ['771f7d02abd1ded94d9e37d3f66e795c8d2026d04defbeb5b679ca058116bbf3'],
    }),
    ('Types::Serialiser', '1.0', {
        'source_tmpl': 'Types-Serialiser-1.0.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/M/ML/MLEHMANN/'],
        'checksums': ['7ad3347849d8a3da6470135018d6af5fd8e58b4057cd568c3813695f2a04730d'],
    }),
    ('JSON::XS', '4.01', {
        'source_tmpl': 'JSON-XS-4.01.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/M/ML/MLEHMANN/'],
        'checksums': ['cc1062e39a1fd6ff8bd9df84a102e8572468cea29d43190672a10f9c39973e5c'],
    }),
    ('PerlIO::gzip', '0.20', {
        'source_tmpl': 'PerlIO-gzip-0.20.tar.gz',
        'source_urls': ['https://cpan.metacpan.org/authors/id/N/NW/NWCLARK/'],
        'checksums': ['4848679a3f201e3f3b0c5f6f9526e602af52923ffa471a2a3657db786bd3bdc5'],
    }),
]

modextrapaths = {
    'PATH': "",  # add installation dir to PATH
    'PERL5LIB': 'lib/perl5/site_perl/%(perlver)s/'
}

sanity_check_paths = {
    'files': ['STAR-Fusion'],
    'dirs': []
}

moduleclass = 'bio'
