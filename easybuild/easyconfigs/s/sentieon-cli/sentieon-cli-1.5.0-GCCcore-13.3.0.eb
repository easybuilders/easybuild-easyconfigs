easyblock = 'PythonBundle'

name = 'sentieon-cli'
version = '1.5.0'
toolchain = {'name': 'GCCcore', 'version': '13.3.0'}

homepage = 'https://github.com/Sentieon/sentieon-cli'
description = """CLI front-end for Sentieon pipelines.
Provides the 'sentieon-cli' executable."""

dependencies = [
    ('Python', '3.12.3'),
    ('SAMtools', '1.21-GCC-13.3.0','',SYSTEM),
    ('poetry','1.8.3'),     
]

use_pip = True
local_pip_options = '--no-deps --no-build-isolation --no-index'

exts_list = [
    ('colorlog', '6.8.2', {
        'checksums': ['3e3e079a41feb5a1b64f978b5ea4f46040a94f11f0e8bbb8261e3dbbeca64d44'],
    }),
    ('importlib-resources', '5.13.0', {
        'checksums': ['82d5c6cca930697dbbd86c93333bb2c2e72861d4789a11c2662b933e5ad2b528'],
    }),
    ('packaging', '23.2', {
        'checksums': ['048fb0e9405036518eaaf48a55953c750c11e1a1b68e0dd1a9d62ed0c092cfc5'],
    }),
    ('sentieon_cli', version, {
        'patches': ['sentieon-cli-1.5.0-add-tool-poetry.patch'],
        'sanity_check_commands': ['sentieon-cli --help'],
        'source_urls': ['https://github.com/Sentieon/sentieon-cli/releases/download/v1.5.0'],
        'sources': ['sentieon_cli-1.5.0.tar.gz'],
        'checksums': [
            {'sentieon_cli-1.5.0.tar.gz': '7a1dc27d54c6fa3e9df55b185fd3e41713b9e5249f4d098477ffab2d5e91a656'},
            {'sentieon-cli-1.5.0-add-tool-poetry.patch':
             '79ce32b028c076aa704583cfa6c4d5634121a14cd0af4aeddf11f5d8b1e4be2e'},
        ],
    }),
]

# Tell users what they must do at runtime
modloadmsg = "Load sentieon-genomics and set SENTIEON_LICENSE before running: sentieon-cli <pipeline> [options]"
