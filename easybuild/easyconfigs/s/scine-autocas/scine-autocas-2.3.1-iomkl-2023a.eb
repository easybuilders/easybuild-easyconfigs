easyblock = 'PythonBundle'

name = 'scine-autocas'
version = '2.3.1'

homepage = 'https://github.com/qcscine/autocas'
description = """SCINE autoCAS automates the crucial active-orbital-space selection step in multi-configurational
calculations. Based on orbital entanglement measures derived from an approximate DMRG wave function,
it identifies all strongly correlated orbitals to be included in the active space of a final, converged calculation.
"""

toolchain = {'name': 'iomkl', 'version': '2023a'}
toolchainopts = {'openmp': True, 'optarch': False, 'strict': True}

dependencies = [
    ('Python', '3.11.3'),
    ('Python-bundle-PyPI', '2023.06'),
    ('SciPy-bundle', '2023.07'),
    ('matplotlib', '3.7.2'),
    ('Pillow', '10.0.0'),
    ('PyYAML', '6.0'),
    ('h5py', '3.9.0', '-serial'),
    ('OpenMolcas', '25.02'),
]

exts_list = [
    ('mypy_extensions', '0.4.3', {
        'checksums': ['2d82818f5bb3e369420cb3c4060a7970edba416647068eb4c5343488a6c604a8'],
    }),
    (name, version, {
        # unpin dep versions in requirements
        'preinstallopts': "sed -i 's/==.*//g' requirements.txt &&",
        'source_urls': ['https://github.com/qcscine/autocas/archive/'],
        'sources': [{'download_filename': '%(version)s.tar.gz', 'filename': SOURCE_TAR_GZ}],
        'checksums': ['387db9ca42d9bc64322ea3e3d4d85aba289a82a8f08ae485ce1b2ca9dd052af5'],
    }),
]

check_ldshared = True

sanity_check_commands = ["python3 -m scine_autocas -h"]

moduleclass = 'chem'
