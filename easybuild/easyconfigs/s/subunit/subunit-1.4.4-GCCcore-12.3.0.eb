# This easyconfig was created by the BEAR Software team at the University of Birmingham.
easyblock = 'ConfigureMake'

name = 'subunit'
version = '1.4.4'

homepage = "https://github.com/testing-cabal/subunit"
description = """Subunit is a streaming protocol for test results."""

toolchain = {'name': 'GCCcore', 'version': '12.3.0'}

source_urls = ['https://github.com/testing-cabal/subunit/archive/refs/tags/']
sources = ['%(version)s.tar.gz']
checksums = ['395787f52b8b36830c331faca546ea6c248b6cbd8de95989c2f64d432cc90531']

builddependencies = [
    ('binutils', '2.40'),
    ('Autotools', '20220317'),
    ('pkgconf', '1.9.5'),
    ('poetry', '1.7.1'),
]

dependencies = [
    ('Check', '0.15.2'),
    ('CppUnit', '1.15.1'),
    ('Python', '3.11.3'),
]

preconfigopts = "autoreconf -vi &&"

exts_defaultclass = 'PythonPackage'

exts_default_options = {
    'source_urls': [PYPI_SOURCE],
    'use_pip': True,
    'download_dep_fail': True,
    'sanity_pip_check': True,
}

exts_list = [
    ('iso8601', '2.1.0', {
        'checksums': ['6b1d3829ee8921c4301998c909f7829fa9ed3cbdac0d3b16af2d743aed1ba8df'],
    }),
    ('pbr', '6.1.0', {
        'checksums': ['788183e382e3d1d7707db08978239965e8b9e4e5ed42669bf4758186734d5f24'],
    }),
    ('fixtures', '4.1.0', {
        'checksums': ['82b1c5e69f615526ef6c067188a1e6c6067df7f88332509c99f8b8fdbb9776f3'],
    }),
    ('testtools', '2.7.2', {
        'checksums': ['5be5bbc1f0fa0f8b60aca6ceec07845d41d0c475cf445bfadb4d2c45ec397ea3'],
    }),
]

modextrapaths = {'PYTHONPATH': 'lib/python%(pyshortver)s/site-packages'}

sanity_check_paths = {
    'files': ['lib/libsubunit.a', 'lib/libsubunit.%s' % SHLIB_EXT],
    'dirs': ['include/subunit'],
}

sanity_check_commands = ['python -c "import subunit"']

moduleclass = 'tools'
