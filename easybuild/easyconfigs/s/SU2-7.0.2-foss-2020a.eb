# easyconfig file for SU2-7.0.6
# By Alireza Ghavaminia a.ghavami@alumni.iut.ac.ir (Isfahan University of Technology)

easyblock = 'ConfigureMake'

name = 'SU2'
version = '7.0.6'

homepage = 'https://su2code.github.io/'
description = """Computational analysis tools have revolutionized the way we design engineering systems, but
most established codes are proprietary, unavailable, or prohibitively expensive for many users. The SU2 team
is changing this, making multiphysics analysis and design optimization software freely available and involving
everyone in its creation and development."""

toolchain = {'name': 'foss', 'version': '2020a'}
toolchainopts = {'usempi': True}

github_account = 'su2code'
source_urls = ['https://github.com/su2code/SU2/archive/']
sources = ['v%(version)s.tar.gz']
checksums = ['5be22a992952b08f16bb80658f6cbe29c62a27e20236eccd175ca58dbc4ed27d']

dependencies = [
    ('Python', '3.8.2'),
    ('ParaView', '5.8.0', '-Python-3.8.2-mpi'),
    ('SciPy-bundle', '2020.03', '-Python-3.8.2')
]

preconfigopts = "./bootstrap &&"
configopts = 'CXXFLAGS="$CXXFLAGS" --enable-mpi --with-cc=mpicc --with-cxx=mpicxx'

sanity_check_paths = {
    'dirs': ["bin/"],
    'files': ["bin/SU2_CFD",
              "bin/SU2_CFD.py",
              "bin/SU2_DEF",
              "bin/SU2_DOT",
              "bin/SU2_GEO",
              "bin/SU2_MSH",
              "bin/SU2_SOL",
              "bin/compute_multipoint.py",
              "bin/compute_polar.py",
              "bin/compute_uncertainty.py",
              "bin/continuous_adjoint.py",
              "bin/direct_differentiation.py",
              "bin/discrete_adjoint.py",
              "bin/finite_differences.py",
              "bin/fsi_computation.py",
              "bin/merge_solution.py",
              "bin/mesh_deformation.py",
              "bin/package_tests.py",
              "bin/parallel_computation_fsi.py",
              "bin/parallel_computation.py",
              "bin/set_ffd_design_var.py",
              "bin/shape_optimization.py",
              ],
}
