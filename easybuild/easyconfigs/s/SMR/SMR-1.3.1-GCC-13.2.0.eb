easyblock = 'CMakeMakeCp'

name = 'SMR'
version = '1.3.1'

homepage = 'https://yanglab.westlake.edu.cn/software/smr/'
description = """
 The SMR software tool was originally developed to implement the SMR & HEIDI methods
 to test for pleiotropic association between the expression level of a gene and a
 complex trait of interest using summary-level data from GWAS and expression
 quantitative trait loci (eQTL) studies (Zhu et al. 2016 Nature Genetics).

 The SMR tool has subsequently been extended to include more analytical methods
 including SMR-multi (an extension of the SMR test to use multiple cis-xQTL SNPs)
 and MeCS (a method for meta-analysis of xQTL data sets accounting for correlations
 among data sets).
"""

toolchain = {'name': 'GCC', 'version': '13.2.0'}

source_urls = ['https://yanglab.westlake.edu.cn/software/smr/download/']
sources = ['%(namelower)s_v%(version)s_src.tar.gz']
checksums = ['a1f62ada9ff2bb237a7b0ffbd2bcd4b024f5e619191e708012b5e71b98fadfbc']

builddependencies = [
    ('CMake', '3.27.6'),
    # Eigen is a header-only C++ library
    ('Eigen', '3.4.0'),
]

dependencies = [
    ('zlib', '1.2.13')
]

configopts = '-Deigen_path="$EBROOTEIGEN" '

files_to_copy = [(['smr'], 'bin')]

sanity_check_paths = {
    'files': ['bin/smr'],
    'dirs': [],
}

sanity_check_commands = ["smr --help | grep -e '(SMR)'"]

moduleclass = 'bio'
