easyblock = 'CMakeMake'

name = 'SoQt'
version = '1.6.2'

homepage = 'https://coin3d.github.io/SoQt/html/'
description = '''SoQt is a library which provides the glue between Systems in
 Motion's Coin high-level 3D visualization library and the Qt 2D user interface
 library.
'''

toolchain = {'name': 'GCC', 'version': '13.2.0'}

sources = [
    {
        'source_urls': ['https://github.com/coin3d/soqt/archive'],
        'download_filename': '17364833049d3855f5e9e0f7908eb5ba08209318.tar.gz',
        'filename': '%(name)s-%(version)s.tar.gz',
        'extract_cmd': 'tar -xzf %s -C %(builddir)s --strip-components=1',
    },
    {
        'source_urls': ['https://github.com/coin3d/generalmsvcgeneration/archive'],
        'download_filename': 'a61fae6a84bd57364fa07a5345eeb4b7ae030318.tar.gz',
        'filename': '%(name)s-%(version)s-generalmsvc.tar.gz',
        'extract_cmd': 'tar -xzf %s -C %(builddir)s/build/general --strip-components=1',
    },
    {
        'source_urls': ['https://github.com/coin3d/cpack.d/archive'],
        'download_filename': '2186a57bff8f318cdf466181b013f9e0398fb8ca.tar.gz',
        'filename': '%(name)s-%(version)s-cpackd.tar.gz',
        'extract_cmd': 'tar -xzf %s -C %(builddir)s/cpack.d --strip-components=1',
    },
    {
        'source_urls': ['https://github.com/coin3d/soanydata/archive'],
        'download_filename': '7ee364a6ec2b496b28e5a13a88800ad11fcbe84e.tar.gz',
        'filename': '%(name)s-%(version)s-soanydata.tar.gz',
        'extract_cmd': 'tar -xzf %s -C %(builddir)s/data --strip-components=1',
    },
    {
        'source_urls': ['https://github.com/coin3d/sogui/archive'],
        'download_filename': '426cd49f3e4598ff96da50e521867b9fe550fd99.tar.gz',
        'filename': '%(name)s-%(version)s-sogui.tar.gz',
        'extract_cmd': 'tar -xzf %s -C %(builddir)s/src/Inventor/Qt/common --strip-components=1',
    },
    {
        'source_urls': ['https://github.com/coin3d/doxygen-awesome-css/archive'],
        'download_filename': '6217657eef6aec24a0e4ecea4695031c1a622cf3.tar.gz',
        'filename': '%(name)s-%(version)s-doxygen-awesome-css.tar.gz',
        'extract_cmd': 'tar -xzf %s -C %(builddir)s/src/Inventor/Qt/common/docs/doxygen-awesome --strip-components=1',
    },
]
checksums = [
    {'SoQt-1.6.2.tar.gz': 'ebb2faa13b425ed9f90ebddb4c8a9285991b8cacaa999648a6891fd4a79d74e5'},
    {'SoQt-1.6.2-generalmsvc.tar.gz': 'cef65714a1e134ada469e05ab833ad496a16bccaeed1f74078c72c592f9e1539'},
    {'SoQt-1.6.2-cpackd.tar.gz': 'b741f7efd5c967d59375a13eb3bbc94f653ac74f7ddfaf26178c594761daf2db'},
    {'SoQt-1.6.2-soanydata.tar.gz': '33018911f52ff6046daedfa4d94079518ab664cda7947739f60f2ffa3262905c'},
    {'SoQt-1.6.2-sogui.tar.gz': 'ff601ffc54fc59b5f8713140603492f07f2d0a9dacf2471f0687fde1e3fab580'},
    {'SoQt-1.6.2-doxygen-awesome-css.tar.gz': 'f2a982b3d37e861fb7a259a79580f3393ab2204a5deec57b70c30fef62649bb7'},
]

builddependencies = [
    ('CMake', '3.27.6'),
]

dependencies = [
    ('Coin', '4.0.2'),
    ('Boost', '1.83.0'),
    ('X11', '20231019'),
    ('Mesa', '23.1.9'),
    ('libGLU', '9.0.3'),
    ('Qt6', '6.6.3'),
]

# configopts = '-DSOXT_BUILD_TESTS=OFF'

sanity_check_paths = {
    'files': ['lib/libSoQt.%s' % SHLIB_EXT],
    'dirs': ['lib/pkgconfig'],
}

moduleclass = 'vis'
