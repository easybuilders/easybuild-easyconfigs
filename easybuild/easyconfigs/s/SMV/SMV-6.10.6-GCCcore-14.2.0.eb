easyblock = 'CMakeMake'

name = 'SMV'  # SmokeView
version = '6.10.6'

homepage = 'https://github.com/firemodels/smv'
description = """Smokeview is a visualization program that displays output of FDS and CFAST simulations."""

toolchain = {'name': 'GCCcore', 'version': '14.2.0'}

source_urls = ['https://github.com/firemodels/smv/archive/']
sources = [SOURCE_TAR_GZ]
checksums = ['51ec29171eb01077f2714b7020a7a1ab1f65cbecd36ea5a94373be12bc2a38c4']

builddependencies = [
    ('CMake', '3.31.3'),
    ('pkgconf', '2.3.0'),
    ('binutils', '2.42'),
]
dependencies = [
    ('libgd', '2.3.3'),
    ('freeglut', '3.6.0'),
    ('libjpeg-turbo', '3.1.0'),
    ('libpng', '1.6.48'),
    ('zlib', '1.3.1'),
    ('json-c', '0.18'),
    ('Doxygen', '1.14.0'),
    ('glew', '2.2.0', '-egl'),
]

configopts = '-DVERIFICATION_TESTS=ON -DVENDORED_LIBS=OFF'

sanity_check_commands = [
    'smokediff -h',
    'smokezip -h',
    'smvq -h',
    'smokeview -h 2>&1 | grep "Visualize"',
]

sanity_check_paths = {
    'files': ['bin/smokeview', 'bin/smokediff', 'bin/smokezip', 'bin/smvq'],
    'dirs': [],
}

moduleclass = 'vis'
