easyblock = 'PythonBundle'

name = 'snakemake'
version = '9.14.0'

homepage = 'https://snakemake.readthedocs.io'
description = "The Snakemake workflow management system is a tool to create reproducible and scalable data analyses."

toolchain = {'name': 'foss', 'version': '2025a'}

builddependencies = [
    ('poetry', '2.1.2'),
    ('Cython', '3.1.1'),
]
dependencies = [
    ('Python', '3.13.1'),
    ('Python-bundle-PyPI', '2025.04'),
    ('SciPy-bundle', '2025.06'),
    ('GitPython', '3.1.45'),
    ('IPython', '9.3.0'),
    ('PyYAML', '6.0.2'),
    ('PuLP', '3.3.0'),
]

exts_list = [
    ('wrapt', '2.0.1', {
        'checksums': ['9c9c635e78497cacb81e84f8b11b23e0aacac7a136e73b8e5b2109a1d9fc468f'],
    }),
    ('datrie', '0.8.3', {
        'checksums': ['ea021ad4c8a8bf14e08a71c7872a622aa399a510f981296825091c7ca0436e80'],
    }),
    ('plac', '1.4.5', {
        'checksums': ['5f05bf85235c017fcd76c73c8101d4ff8e96beb3dc58b9a37de49cac7de82d14'],
    }),
    ('dpath', '2.2.0', {
        'checksums': ['34f7e630dc55ea3f219e555726f5da4b4b25f2200319c8e6902c394258dd6a3e'],
    }),
    # Recent versions of yte (1.9+) require rust and the dependencies cannot easily be solved yet
    ('yte', '1.8.1', {
        'checksums': ['6eefbdceae56e156ba9881ecb63f3c9217cfe5d5cc6f85fdb061c266a8eff112'],
    }),
    ('toposort', '1.10', {
        'checksums': ['bfbb479c53d0a696ea7402601f4e693c97b0367837c8898bc6471adfca37a6bd'],
    }),
    ('throttler', '1.2.2', {
        'checksums': ['d54db406d98e1b54d18a9ba2b31ab9f093ac64a0a59d730c1cf7bb1cdfc94a58'],
    }),
    ('stopit', '1.1.2', {
        'checksums': ['f7f39c583fd92027bd9d06127b259aee7a5b7945c1f1fa56263811e1e766996d'],
    }),
    ('configargparse', '1.7.1', {
        'checksums': ['79c2ddae836a1e5914b71d58e4b9adbd9f7779d4e6351a637b7d2d9b6c46d3d9'],
    }),
    ('argparse-dataclass', '2.0.0', {
        'modulename': 'argparse_dataclass',
        'source_tmpl': 'argparse_dataclass-%(version)s.tar.gz',
        'checksums': ['09ab641c914a2f12882337b9c3e5086196dbf2ee6bf0ef67895c74002cc9297f'],
    }),
    ('snakemake-interface-common', '1.22.0', {
        'modulename': 'snakemake_interface_common',
        'source_tmpl': 'snakemake_interface_common-%(version)s.tar.gz',
        'checksums': ['ef1fa710a15629be4cc352b938596ab5235ecf0b615c5845f086d6c5da10cb88'],
    }),
    ('reretry', '0.11.8', {
        'checksums': ['f2791fcebe512ea2f1d153a2874778523a8064860b591cd90afc21a8bed432e3'],
    }),
    ('snakemake-interface-storage-plugins', '4.2.3', {
        'modulename': 'snakemake_interface_storage_plugins',
        'source_tmpl': 'snakemake_interface_storage_plugins-%(version)s.tar.gz',
        'checksums': ['95be93d1aa1c56c189d9ff661930a6475e847a79a74013822c9570c0ef691755'],
    }),
    ('snakemake-interface-report-plugins', '1.3.0', {
        'modulename': 'snakemake_interface_report_plugins',
        'source_tmpl': 'snakemake_interface_report_plugins-%(version)s.tar.gz',
        'checksums': ['fc9495298bec4e69721ab8afe6d6d88a86966fda2eeb003db56b9a88b86d5934'],
    }),
    ('snakemake-interface-executor-plugins', '9.3.9', {
        'modulename': 'snakemake_interface_executor_plugins',
        'source_tmpl': 'snakemake_interface_executor_plugins-%(version)s.tar.gz',
        'checksums': ['988ab388d48522fac84107867ae3f3398312b93b55df6ed7b99afc225468ca26'],
    }),
    ('snakemake-interface-logger-plugins', '2.0.0', {
        'modulename': 'snakemake_interface_logger_plugins',
        'source_tmpl': 'snakemake_interface_logger_plugins-%(version)s.tar.gz',
        'checksums': ['0e8ff2af4c55ca140d6ea1c1540e733a4b3944abae48fe0eaf6a707e5797cd17'],
    }),
    ('smart-open', '7.5.0', {
        'sources': ['smart_open-%(version)s.tar.gz'],
        'checksums': ['f394b143851d8091011832ac8113ea4aba6b92e6c35f6e677ddaaccb169d7cb9'],
    }),
    ('jupyter-core', '5.9.1', {
        'modulename': 'jupyter_core',
        'source_tmpl': 'jupyter_core-%(version)s.tar.gz',
        'checksums': ['4d09aaff303b9566c3ce657f580bd089ff5c91f5f89cf7d8846c3cdf465b5508'],
    }),
    ('fastjsonschema', '2.21.2', {
        'checksums': ['b1eb43748041c880796cd077f1a07c3d94e93ae84bba5ed36800a33554ae05de'],
    }),
    ('nbformat', '5.10.4', {
        'source_tmpl': '%(name)s-%(version)s-py3-none-any.whl',
        'checksums': ['3b48d6c8fbca4b299bf3982ea7db1af21580e4fec269ad087b9e81588891200b'],
    }),
    ('immutables', '0.21', {
        'checksums': ['b55ffaf0449790242feb4c56ab799ea7af92801a0a43f9e2f4f8af2ab24dfc4a'],
    }),
    ('humanfriendly', '10.0', {
        'checksums': ['6b0b831ce8f15f7300721aa49829fc4e83921a9a301cc7f606be6686a2288ddc'],
    }),
    ('connection-pool', '0.0.3', {
        'sources': ['connection_pool-%(version)s.tar.gz'],
        'checksums': ['bf429e7aef65921c69b4ed48f3d48d3eac1383b05d2df91884705842d974d0dc'],
    }),
    ('conda-inject', '1.3.2', {
        'sources': ['conda_inject-%(version)s.tar.gz'],
        'checksums': ['0b8cde8c47998c118d8ff285a04977a3abcf734caf579c520fca469df1cd0aac'],
    }),
    (name, version, {
        'checksums': ['d1126fe73cd182c6810a7981130c197ce8b707122ab3aa30b510eaa69f6dec06'],
        'preinstallopts': "sed -i '/^license/d' pyproject.toml && "
    }),
    ('snakemake-executor-plugin-slurm-jobstep', '0.3.0', {
        'modulename': 'snakemake_executor_plugin_slurm_jobstep',
        'source_tmpl': 'snakemake_executor_plugin_slurm_jobstep-%(version)s.tar.gz',
        'checksums': ['ebcd374bdde2d4f356e61ac221cd4244566dd980db2de3250780f454e5251c49'],
    }),
    ('snakemake-executor-plugin-flux', '0.1.1', {
        'modulename': 'snakemake_executor_plugin_flux',
        'source_tmpl': 'snakemake_executor_plugin_flux-%(version)s.tar.gz',
        'checksums': ['26655bd1cf5d7db5dfcfdfbd006c1db35968c0ad1772e0b010e64e6f71b00163'],
    }),
    ('snakemake-executor-plugin-slurm', '2.0.0', {
        'modulename': 'snakemake_executor_plugin_slurm',
        'source_tmpl': 'snakemake_executor_plugin_slurm-%(version)s.tar.gz',
        'checksums': ['1f56ce02aa8d514cea7c7ef29b5dee66103bf93b0c2b11d518384ad588219b80'],
    }),
    ('snakemake-executor-plugin-cluster-sync', '0.1.5', {
        'modulename': 'snakemake_executor_plugin_cluster_sync',
        'source_tmpl': 'snakemake_executor_plugin_cluster_sync-%(version)s.tar.gz',
        'checksums': ['f34b8cbc282d926ecfc7443257cb1845fc7965b92ef303c4ae7c342a4c99c5d7'],
    }),
    ('snakemake-executor-plugin-cluster-generic', '1.0.9', {
        'modulename': 'snakemake_executor_plugin_cluster_generic',
        'source_tmpl': 'snakemake_executor_plugin_cluster_generic-%(version)s.tar.gz',
        'checksums': ['ad0dc2d8bde7d4f336364bebe11a3b2209653c481ce8fbb0ae8bec81016a9a14'],
    }),
    ('snakemake-interface-scheduler-plugins', '2.0.2', {
        'modulename': 'snakemake_interface_scheduler_plugins',
        'source_tmpl': 'snakemake_interface_scheduler_plugins-%(version)s.tar.gz',
        'checksums': ['2797e8fa9019d983132c2b403f14d6fcd3c5ad4c8d8a66b984b4740a71cacc46'],
    }),
]

sanity_check_paths = {
    'files': ['bin/snakemake'],
    'dirs': ['lib/python%(pyshortver)s/site-packages/snakemake'],
}

sanity_check_commands = ['snakemake --help']

moduleclass = 'tools'
