name = 'Scipion'
version = '1.2'

homepage = 'https://github.com/I2PC/scipion/wiki'
description = """Scipion is an image processing framework to obtain 3D
models of macromolecular complexes using Electron Microscopy (3DEM). It
integrates several software packages and presents an unified interface
for both biologists and developers. Scipion allows to execute workflows
combining different software tools, while taking care of formats and
conversions. Additionally, all steps are tracked and can be reproduced
later on. 
"""

toolchain = {'name': 'goolfc', 'version': '2017b'}
# toolchainopts = {'openmp': True, 'noopt': True, 'debug': True }

source_urls = ['https://github.com/I2PC/scipion/archive/']
sources = [{'filename': 'v%(version)s.tar.gz', 'extract_cmd': 'tar --strip-components=1 -xf %s '}]

patches = [
    'Scipion-1.2_fix_Environent_calls.patch',
    'Scipion-1.2_only_use_mpiwrappers.patch',
    'Scipion-1.2_fix_LIBPATH_to_libPathsCopy_missing_split.patch',
    'Scipion-1.2_use_CFLAGS_from_EB.patch',
    'Scipion-1.2_ignore_mpi_binpath.patch',
    'Scipion-1.2_no_java_bindir.patch',
    'Scipion-1.2_use_LIBPATH_in_addcpplib.patch',
    'Scipion-1.2_allow_eman2.2_version.patch',
    'Scipion-1.2_make_eman2_use_python_from_path.patch',
    'Scipion-1.2_allow_motioncor2_v1.1.0.patch',
]

buildininstalldir = True

builddependencies = [
    ('SCons', '3.0.1', '-Python-2.7.14'),
]

dependencies = [
    ('Python', '2.7.14'),
    ('Tcl', '8.6.7'),
    ('Tk', '8.6.7'),
    ('zlib', '1.2.11'),
    ('libpng', '1.6.32'),
    ('freetype', '2.8'),
    ('libjpeg-turbo', '1.5.2'),
    ('libreadline', '7.0'),
    ('SQLite', '3.20.1'),
    ('LibTIFF', '4.0.9'),
    ('HDF5', '1.8.19'),
    ('PCRE', '8.41'),
    ('SWIG', '3.0.12', '-Python-%(pyver)s'),
    ('arpack-ng', '3.5.0'),
    # OpenCV 3.3.0 seems to be to new.
    # ('OpenCV', '3.3.0', '-Python-%(pyver)s'),
    ('OpenCV', '2.4.13', '-Python-%(pyver)s'),
    ('Boost', '1.63.0', '-Python-%(pyver)s'),
    ('NFFT', '3.3.0'),
    # Python modules
    ('matplotlib', '2.1.1', '-Python-%(pyver)s'),
    ('psutil', '4.3.0', '-Python-%(pyver)s'),
    ('bibtexparser', '0.6.0', '-Python-%(pyver)s'),
    ('Pillow', '4.3.0', '-Python-%(pyver)s'),
    ('PyZMQ', '16.0.2', '-Python-%(pyver)s-zmq4'),
    ('lxml', '4.0.0', '-Python-%(pyver)s'),
    ('IPython', '5.3.0', '-Python-%(pyver)s'),
    ('scikit-learn', '0.19.1', '-Python-%(pyver)s'),
    # EM packages
    ('ctffind', '4.1.10'),
    ('frealign', '9.07'),
    ('RELION', '2.1.b1'),
    ('EMAN2', '2.2'),
    ('MotionCor2', '1.1.0'),
]


# Required modules
# fftw 3.3.4
# tcl 8.6.1
# tk 8.6.1
# zlib 1.2.8
# jpeg-turbo 1.3.1
# libpng 1.6.16
# tiff 3.9.4
# sqlite 3.6.23
# hdf5 1.8.14
# python 2.7.14
# pcre 8.36
# swig 3.0.2 
# lapack 3.5.0
# arpack 96
# opencv 2.4.14
# boost 1.56.0
# nfft 3.2.3

# Required python modules
# sh_alignement ??
# setuptools 5.4.1
# scons 2.3.4
# numpy 1.8.1
# six 1.7.3
# dateutil 1.5
# pyparsing 2.0.2
# matplotlib 1.3.1
# psutil 2.1.1
# mpi4py 1.3.1
# scipy 0.14.0
# bibtexparser 0.5
# django 1.5.5 (missing in EB)
# paramiko 1.14.0
# pillow 2.5.1
# winpdb 1.4.8 (missing in EB)
# pyzmq 2.2.0.1
# jijna2 2.7.3 (part of IPython)
# tornado 4.0.2 (part of IPython)
# lxml 3.4.1
# ipython 2.1.0
# cython 0.22
# cythongsl 0.2.1 (missing in EB)
# sklearn 0.17

moduleclass = 'bio'
