easyblock = 'CargoPythonBundle'

name = 'SnapATAC2'
version = '2.9.0-dev0-20250630'
local_commit = '2eaff6c'

homepage = 'https://github.com/kaizhang/SnapATAC2'
description = "Single-cell epigenomics analysis tools"

toolchain = {'name': 'foss', 'version': '2024a'}

crates = [
    ('addr2line', '0.24.2'),
    ('adler2', '2.0.1'),
    ('ahash', '0.8.12'),
    ('aho-corasick', '1.1.3'),
    ('allocator-api2', '0.2.21'),
    ('android-tzdata', '0.1.1'),
    ('android_system_properties', '0.1.5'),
    ('anndata', '0.6.2', 'https://github.com/kaizhang/anndata-rs.git', '0d27ac475634ed7703ab1a23e01e6a3031a28541'),
    ('anndata-hdf5', '0.5.1', 'https://github.com/kaizhang/anndata-rs.git', '0d27ac475634ed7703ab1a23e01e6a3031a28541'),
    ('anndata-zarr', '0.1.0', 'https://github.com/kaizhang/anndata-rs.git', '0d27ac475634ed7703ab1a23e01e6a3031a28541'),
    ('anstream', '0.6.19'),
    ('anstyle', '1.0.11'),
    ('anstyle-parse', '0.2.7'),
    ('anstyle-query', '1.1.3'),
    ('anstyle-wincon', '3.0.9'),
    ('anyhow', '1.0.98'),
    ('approx', '0.5.1'),
    ('arc-swap', '1.7.1'),
    ('argminmax', '0.6.3'),
    ('array-init-cursor', '0.2.1'),
    ('ascii', '1.1.0'),
    ('async-stream', '0.3.6'),
    ('async-stream-impl', '0.3.6'),
    ('async-trait', '0.1.88'),
    ('atoi', '2.0.0'),
    ('atoi_simd', '0.16.1'),
    ('atomic-waker', '1.1.2'),
    ('attohttpc', '0.25.0'),
    ('auto_impl', '1.3.0'),
    ('autocfg', '1.5.0'),
    ('backtrace', '0.3.75'),
    ('base64', '0.21.7'),
    ('base64', '0.22.1'),
    ('bed-utils', '0.7.1'),
    ('bigtools', '0.5.6'),
    ('bincode', '1.3.3'),
    ('bit-vec', '0.8.0'),
    ('bitflags', '2.9.1'),
    ('blosc-src', '0.3.6'),
    ('bstr', '1.12.0'),
    ('bumpalo', '3.19.0'),
    ('bytemuck', '1.23.1'),
    ('bytemuck_derive', '1.9.3'),
    ('byteorder', '1.5.0'),
    ('byteordered', '0.6.0'),
    ('bytes', '1.10.1'),
    ('castaway', '0.2.3'),
    ('cc', '1.2.27'),
    ('cfg-if', '1.0.1'),
    ('chrono', '0.4.41'),
    ('chrono-tz', '0.10.3'),
    ('chrono-tz-build', '0.4.1'),
    ('clap', '4.5.40'),
    ('clap_builder', '4.5.40'),
    ('clap_derive', '4.5.40'),
    ('clap_lex', '0.7.5'),
    ('cmake', '0.1.54'),
    ('colorchoice', '1.0.4'),
    ('comfy-table', '7.1.4'),
    ('compact_str', '0.8.1'),
    ('console', '0.16.0'),
    ('core-foundation', '0.9.4'),
    ('core-foundation-sys', '0.8.7'),
    ('crc32c', '0.6.8'),
    ('crc32fast', '1.4.2'),
    ('crossbeam-channel', '0.5.15'),
    ('crossbeam-deque', '0.8.6'),
    ('crossbeam-epoch', '0.9.18'),
    ('crossbeam-queue', '0.3.12'),
    ('crossbeam-utils', '0.8.21'),
    ('crossterm', '0.28.1'),
    ('crossterm_winapi', '0.9.1'),
    ('crunchy', '0.2.4'),
    ('debug_unsafe', '0.1.3'),
    ('derive_more', '1.0.0'),
    ('derive_more', '2.0.1'),
    ('derive_more-impl', '1.0.0'),
    ('derive_more-impl', '2.0.1'),
    ('displaydoc', '0.1.7'),
    ('displaydoc', '0.2.5'),
    ('downcast-rs', '1.2.1'),
    ('dyn-clone', '1.0.19'),
    ('either', '1.15.0'),
    ('encode_unicode', '1.0.0'),
    ('enum_dispatch', '0.3.13'),
    ('equivalent', '1.0.2'),
    ('errno', '0.3.13'),
    ('ethnum', '1.5.2'),
    ('fallible-streaming-iterator', '0.1.9'),
    ('fast-float2', '0.2.3'),
    ('fastrand', '2.3.0'),
    ('fixedbitset', '0.4.2'),
    ('flate2', '1.1.2'),
    ('float-cmp', '0.10.0'),
    ('fnv', '1.0.7'),
    ('foldhash', '0.1.5'),
    ('form_urlencoded', '1.2.1'),
    ('futures', '0.3.31'),
    ('futures-channel', '0.3.31'),
    ('futures-core', '0.3.31'),
    ('futures-executor', '0.3.31'),
    ('futures-io', '0.3.31'),
    ('futures-macro', '0.3.31'),
    ('futures-sink', '0.3.31'),
    ('futures-task', '0.3.31'),
    ('futures-util', '0.3.31'),
    ('generator', '0.8.5'),
    ('getrandom', '0.2.16'),
    ('getrandom', '0.3.3'),
    ('gimli', '0.31.1'),
    ('glob', '0.3.2'),
    ('half', '2.6.0'),
    ('halfbrown', '0.2.5'),
    ('hashbrown', '0.14.5'),
    ('hashbrown', '0.15.4'),
    ('hdf5-metno', '0.9.4'),
    ('hdf5-metno-derive', '0.9.2'),
    ('hdf5-metno-src', '0.9.4'),
    ('hdf5-metno-sys', '0.10.1'),
    ('hdf5-metno-types', '0.10.1'),
    ('heck', '0.5.0'),
    ('hermit-abi', '0.5.2'),
    ('hex', '0.4.3'),
    ('home', '0.5.11'),
    ('hora', '0.1.1'),
    ('http', '0.2.12'),
    ('iana-time-zone', '0.1.63'),
    ('iana-time-zone-haiku', '0.1.2'),
    ('icu_collections', '2.0.0'),
    ('icu_locale_core', '2.0.0'),
    ('icu_normalizer', '2.0.0'),
    ('icu_normalizer_data', '2.0.0'),
    ('icu_properties', '2.0.1'),
    ('icu_properties_data', '2.0.1'),
    ('icu_provider', '2.0.0'),
    ('idna', '1.0.3'),
    ('idna_adapter', '1.2.1'),
    ('index_list', '0.2.16'),
    ('indexmap', '2.10.0'),
    ('indicatif', '0.17.12'),
    ('indoc', '2.0.6'),
    ('inventory', '0.3.20'),
    ('io-uring', '0.7.8'),
    ('is_terminal_polyfill', '1.70.1'),
    ('itertools', '0.10.5'),
    ('itertools', '0.13.0'),
    ('itertools', '0.14.0'),
    ('itoa', '1.0.15'),
    ('itoap', '1.0.1'),
    ('jobserver', '0.1.33'),
    ('js-sys', '0.3.77'),
    ('kdtree', '0.7.0'),
    ('lazy_static', '1.5.0'),
    ('lexical', '6.1.1'),
    ('lexical-core', '0.8.5'),
    ('lexical-core', '1.0.5'),
    ('lexical-parse-float', '0.8.5'),
    ('lexical-parse-float', '1.0.5'),
    ('lexical-parse-integer', '0.8.6'),
    ('lexical-parse-integer', '1.0.5'),
    ('lexical-util', '0.8.5'),
    ('lexical-util', '1.0.6'),
    ('lexical-write-float', '0.8.5'),
    ('lexical-write-float', '1.0.5'),
    ('lexical-write-integer', '0.8.5'),
    ('lexical-write-integer', '1.0.5'),
    ('libc', '0.2.174'),
    ('libdeflate-sys', '0.13.0'),
    ('libdeflater', '0.13.0'),
    ('libloading', '0.8.8'),
    ('libm', '0.2.15'),
    ('libz-ng-sys', '1.1.22'),
    ('libz-sys', '1.1.22'),
    ('link-cplusplus', '1.0.10'),
    ('linreg', '0.2.0'),
    ('linux-raw-sys', '0.4.15'),
    ('linux-raw-sys', '0.9.4'),
    ('litemap', '0.8.0'),
    ('lock_api', '0.4.13'),
    ('log', '0.4.27'),
    ('loom', '0.7.2'),
    ('lru', '0.12.5'),
    ('lz4', '1.28.1'),
    ('lz4-sys', '1.11.1+lz4-1.10.0'),
    ('matchers', '0.1.0'),
    ('matrixmultiply', '0.3.10'),
    ('memchr', '2.7.5'),
    ('memmap2', '0.9.5'),
    ('memoffset', '0.9.1'),
    ('miniz_oxide', '0.8.9'),
    ('mio', '1.0.4'),
    ('moka', '0.12.10'),
    ('monostate', '0.1.14'),
    ('monostate-impl', '0.1.14'),
    ('multiversion', '0.7.4'),
    ('multiversion-macros', '0.7.4'),
    ('nalgebra', '0.33.2'),
    ('nalgebra-macros', '0.2.2'),
    ('nalgebra-sparse', '0.10.0'),
    ('ndarray', '0.16.1'),
    ('noodles', '0.84.0'),
    ('noodles-bam', '0.69.0'),
    ('noodles-bgzf', '0.33.0'),
    ('noodles-core', '0.15.0'),
    ('noodles-csi', '0.39.0'),
    ('noodles-fastq', '0.16.0'),
    ('noodles-gff', '0.38.0'),
    ('noodles-gtf', '0.33.0'),
    ('noodles-sam', '0.65.0'),
    ('now', '0.1.3'),
    ('ntapi', '0.4.1'),
    ('nu-ansi-term', '0.46.0'),
    ('num', '0.4.3'),
    ('num-bigint', '0.4.6'),
    ('num-complex', '0.4.6'),
    ('num-integer', '0.1.46'),
    ('num-iter', '0.1.45'),
    ('num-rational', '0.4.2'),
    ('num-traits', '0.2.19'),
    ('num_cpus', '1.17.0'),
    ('numpy', '0.22.1'),
    ('object', '0.36.7'),
    ('once_cell', '1.21.3'),
    ('once_cell_polyfill', '1.70.1'),
    ('openssl-probe', '0.1.6'),
    ('overload', '0.1.1'),
    ('page_size', '0.6.0'),
    ('parking_lot', '0.12.4'),
    ('parking_lot_core', '0.9.11'),
    ('parse-zoneinfo', '0.3.1'),
    ('paste', '1.0.15'),
    ('pathdiff', '0.2.3'),
    ('percent-encoding', '2.3.1'),
    ('permutation', '0.4.1'),
    ('phf', '0.11.3'),
    ('phf_codegen', '0.11.3'),
    ('phf_generator', '0.11.3'),
    ('phf_shared', '0.11.3'),
    ('pin-project-lite', '0.2.16'),
    ('pin-utils', '0.1.0'),
    ('pkg-config', '0.3.32'),
    ('planus', '0.3.1'),
    ('polars', '0.45.1'),
    ('polars-arrow', '0.45.1'),
    ('polars-arrow-format', '0.1.0'),
    ('polars-compute', '0.45.1'),
    ('polars-core', '0.45.1'),
    ('polars-error', '0.45.1'),
    ('polars-expr', '0.45.1'),
    ('polars-io', '0.45.1'),
    ('polars-json', '0.45.1'),
    ('polars-lazy', '0.45.1'),
    ('polars-mem-engine', '0.45.1'),
    ('polars-ops', '0.45.1'),
    ('polars-parquet', '0.45.1'),
    ('polars-parquet-format', '0.1.0'),
    ('polars-pipe', '0.45.1'),
    ('polars-plan', '0.45.1'),
    ('polars-row', '0.45.1'),
    ('polars-schema', '0.45.1'),
    ('polars-sql', '0.45.1'),
    ('polars-stream', '0.45.1'),
    ('polars-time', '0.45.1'),
    ('polars-utils', '0.45.1'),
    ('portable-atomic', '1.11.1'),
    ('portable-atomic-util', '0.2.4'),
    ('potential_utf', '0.1.2'),
    ('ppv-lite86', '0.2.21'),
    ('proc-macro-crate', '3.3.0'),
    ('proc-macro-error-attr2', '2.0.0'),
    ('proc-macro-error2', '2.0.1'),
    ('proc-macro2', '1.0.95'),
    ('psm', '0.1.26'),
    ('pyanndata', '0.5.1', 'https://github.com/kaizhang/anndata-rs.git', '0d27ac475634ed7703ab1a23e01e6a3031a28541'),
    ('pyo3', '0.22.6'),
    ('pyo3-build-config', '0.22.6'),
    ('pyo3-ffi', '0.22.6'),
    ('pyo3-log', '0.11.0'),
    ('pyo3-macros', '0.22.6'),
    ('pyo3-macros-backend', '0.22.6'),
    ('pyo3-polars', '0.19.0'),
    ('quote', '1.0.40'),
    ('r-efi', '5.3.0'),
    ('rand', '0.8.5'),
    ('rand_chacha', '0.3.1'),
    ('rand_core', '0.6.4'),
    ('rand_distr', '0.4.3'),
    ('rand_isaac', '0.3.0'),
    ('raw-cpuid', '11.5.0'),
    ('rawpointer', '0.2.1'),
    ('rayon', '1.10.0'),
    ('rayon-core', '1.12.1'),
    ('rayon_iter_concurrent_limit', '0.2.0'),
    ('recursive', '0.1.1'),
    ('recursive-proc-macro-impl', '0.1.1'),
    ('redox_syscall', '0.5.13'),
    ('ref-cast', '1.0.24'),
    ('ref-cast-impl', '1.0.24'),
    ('regex', '1.11.1'),
    ('regex-automata', '0.1.10'),
    ('regex-automata', '0.4.9'),
    ('regex-syntax', '0.6.29'),
    ('regex-syntax', '0.8.5'),
    ('ring', '0.17.14'),
    ('rustc-demangle', '0.1.25'),
    ('rustc-hash', '1.1.0'),
    ('rustc_version', '0.4.1'),
    ('rustix', '0.38.44'),
    ('rustix', '1.0.7'),
    ('rustls', '0.21.12'),
    ('rustls-native-certs', '0.6.3'),
    ('rustls-pemfile', '1.0.4'),
    ('rustls-webpki', '0.101.7'),
    ('rustversion', '1.0.21'),
    ('ryu', '1.0.20'),
    ('safe_arch', '0.7.4'),
    ('same-file', '1.0.6'),
    ('sanitize-filename', '0.5.0'),
    ('schannel', '0.1.27'),
    ('scoped-tls', '1.0.1'),
    ('scopeguard', '1.2.0'),
    ('sct', '0.7.1'),
    ('security-framework', '2.11.1'),
    ('security-framework-sys', '2.14.0'),
    ('semver', '1.0.26'),
    ('serde', '1.0.219'),
    ('serde_derive', '1.0.219'),
    ('serde_json', '1.0.140'),
    ('serde_repr', '0.1.20'),
    ('sharded-slab', '0.1.7'),
    ('shlex', '1.3.0'),
    ('simba', '0.9.0'),
    ('simd-json', '0.14.3'),
    ('simdutf8', '0.1.5'),
    ('siphasher', '1.0.1'),
    ('slab', '0.4.10'),
    ('slotmap', '1.0.7'),
    ('smallvec', '1.15.1'),
    ('snappy_src', '0.2.5+snappy.1.2.2'),
    ('socket2', '0.5.10'),
    ('sqlparser', '0.52.0'),
    ('stable_deref_trait', '1.2.0'),
    ('stacker', '0.1.21'),
    ('static_assertions', '1.1.0'),
    ('statrs', '0.18.0'),
    ('streaming-decompression', '0.1.2'),
    ('streaming-iterator', '0.1.9'),
    ('strength_reduce', '0.2.4'),
    ('strsim', '0.11.1'),
    ('strum_macros', '0.26.4'),
    ('syn', '1.0.109'),
    ('syn', '2.0.104'),
    ('synstructure', '0.13.2'),
    ('sysinfo', '0.32.1'),
    ('tagptr', '0.2.0'),
    ('target-features', '0.1.6'),
    ('target-lexicon', '0.12.16'),
    ('tempfile', '3.20.0'),
    ('thiserror', '1.0.69'),
    ('thiserror', '2.0.12'),
    ('thiserror-impl', '1.0.69'),
    ('thiserror-impl', '2.0.12'),
    ('thread_local', '1.1.9'),
    ('tikv-jemalloc-sys', '0.6.0+5.3.0-1-ge13ca993e8ccb9ba9847cc330696e02839f328f7'),
    ('tikv-jemallocator', '0.6.0'),
    ('tinystr', '0.8.1'),
    ('tokio', '1.46.0'),
    ('tokio-util', '0.7.15'),
    ('toml_datetime', '0.6.11'),
    ('toml_edit', '0.22.27'),
    ('tracing', '0.1.41'),
    ('tracing-core', '0.1.34'),
    ('tracing-log', '0.2.0'),
    ('tracing-subscriber', '0.3.19'),
    ('typenum', '1.18.0'),
    ('ufmt', '0.2.0'),
    ('ufmt-macros', '0.3.0'),
    ('ufmt-write', '0.1.0'),
    ('unicode-ident', '1.0.18'),
    ('unicode-reverse', '1.0.9'),
    ('unicode-segmentation', '1.12.0'),
    ('unicode-width', '0.2.1'),
    ('unicode-xid', '0.2.6'),
    ('unindent', '0.2.4'),
    ('unit-prefix', '0.5.1'),
    ('unsafe_cell_slice', '0.2.2'),
    ('untrusted', '0.9.0'),
    ('url', '2.5.4'),
    ('utf8_iter', '1.0.4'),
    ('utf8parse', '0.2.2'),
    ('uuid', '1.17.0'),
    ('valuable', '0.1.1'),
    ('value-trait', '0.10.1'),
    ('vcpkg', '0.2.15'),
    ('version_check', '0.9.5'),
    ('walkdir', '2.5.0'),
    ('wasi', '0.11.1+wasi-snapshot-preview1'),
    ('wasi', '0.14.2+wasi-0.2.4'),
    ('wasm-bindgen', '0.2.100'),
    ('wasm-bindgen-backend', '0.2.100'),
    ('wasm-bindgen-macro', '0.2.100'),
    ('wasm-bindgen-macro-support', '0.2.100'),
    ('wasm-bindgen-shared', '0.2.100'),
    ('web-time', '1.1.0'),
    ('webpki', '0.22.4'),
    ('wide', '0.7.33'),
    ('winapi', '0.3.9'),
    ('winapi-i686-pc-windows-gnu', '0.4.0'),
    ('winapi-util', '0.1.9'),
    ('winapi-x86_64-pc-windows-gnu', '0.4.0'),
    ('windows', '0.57.0'),
    ('windows', '0.61.3'),
    ('windows-collections', '0.2.0'),
    ('windows-core', '0.57.0'),
    ('windows-core', '0.61.2'),
    ('windows-future', '0.2.1'),
    ('windows-implement', '0.57.0'),
    ('windows-implement', '0.60.0'),
    ('windows-interface', '0.57.0'),
    ('windows-interface', '0.59.1'),
    ('windows-link', '0.1.3'),
    ('windows-numerics', '0.2.0'),
    ('windows-result', '0.1.2'),
    ('windows-result', '0.3.4'),
    ('windows-strings', '0.4.2'),
    ('windows-sys', '0.48.0'),
    ('windows-sys', '0.52.0'),
    ('windows-sys', '0.59.0'),
    ('windows-sys', '0.60.2'),
    ('windows-targets', '0.48.5'),
    ('windows-targets', '0.52.6'),
    ('windows-targets', '0.53.2'),
    ('windows-threading', '0.1.0'),
    ('windows_aarch64_gnullvm', '0.48.5'),
    ('windows_aarch64_gnullvm', '0.52.6'),
    ('windows_aarch64_gnullvm', '0.53.0'),
    ('windows_aarch64_msvc', '0.48.5'),
    ('windows_aarch64_msvc', '0.52.6'),
    ('windows_aarch64_msvc', '0.53.0'),
    ('windows_i686_gnu', '0.48.5'),
    ('windows_i686_gnu', '0.52.6'),
    ('windows_i686_gnu', '0.53.0'),
    ('windows_i686_gnullvm', '0.52.6'),
    ('windows_i686_gnullvm', '0.53.0'),
    ('windows_i686_msvc', '0.48.5'),
    ('windows_i686_msvc', '0.52.6'),
    ('windows_i686_msvc', '0.53.0'),
    ('windows_x86_64_gnu', '0.48.5'),
    ('windows_x86_64_gnu', '0.52.6'),
    ('windows_x86_64_gnu', '0.53.0'),
    ('windows_x86_64_gnullvm', '0.48.5'),
    ('windows_x86_64_gnullvm', '0.52.6'),
    ('windows_x86_64_gnullvm', '0.53.0'),
    ('windows_x86_64_msvc', '0.48.5'),
    ('windows_x86_64_msvc', '0.52.6'),
    ('windows_x86_64_msvc', '0.53.0'),
    ('winnow', '0.7.11'),
    ('winreg', '0.52.0'),
    ('wit-bindgen-rt', '0.39.0'),
    ('writeable', '0.6.1'),
    ('xxhash-rust', '0.8.15'),
    ('yoke', '0.8.0'),
    ('yoke-derive', '0.8.0'),
    ('zarrs', '0.18.3'),
    ('zarrs_filesystem', '0.2.3'),
    ('zarrs_metadata', '0.2.0'),
    ('zarrs_storage', '0.3.4'),
    ('zerocopy', '0.8.26'),
    ('zerocopy-derive', '0.8.26'),
    ('zerofrom', '0.1.6'),
    ('zerofrom-derive', '0.1.6'),
    ('zerotrie', '0.2.2'),
    ('zerovec', '0.11.2'),
    ('zerovec-derive', '0.11.1'),
    ('zstd', '0.13.3'),
    ('zstd-safe', '7.2.4'),
    ('zstd-sys', '2.0.15+zstd.1.5.7'),
]

builddependencies = [
    ('Rust', '1.86.0'),
    ('CMake', '3.29.3'),
    ('maturin', '1.6.0'),
]

dependencies = [
    ('Python', '3.12.3'),
    ('python-igraph', '0.11.9'),
    ('scikit-learn', '1.5.2'),
    ('umap-learn', '0.5.7'),
    ('pyfaidx', '0.8.1.2'),
    ('tqdm', '4.66.5'),
    ('rustworkx', '0.16.0'),
    ('igraph', '0.10.16'),
    ('Kaleido', '0.2.1'),
    ('MACS3', '3.0.3'),
    ('multiprocess', '0.70.17'),
    ('plotly.py', '5.24.1'),
    ('polars', '1.28.1'),
    ('Arrow', '17.0.0'),
    ('anndata', '0.10.9'),  # snapatac2 2.9.0.dev0 has requirement anndata<0.11.0,>=0.8.0
]

exts_list = [
    ('typeguard', '4.4.2', {
        'checksums': ['a6f1065813e32ef365bc3b3f503af8a96f9dd4e0033a02c28c4a4983de8c6c49'],
    }),
    # fixes `snapatac2 2.9.0.dev0 has requirement pyfaidx<0.8.0,>=0.7.0, but you have pyfaidx 0.8.1.2.`
    ('pyfaidx', '0.7.2.2', {
        'checksums': ['3b7693c052c82691000fe4a92475db82ffc3b5a721a12b10dfbc87119c4b4d30'],
    }),
    (name, version, {
        'start_dir': 'snapatac2-python',
        'sources': [{
            'source_urls': ['https://github.com/scverse/SnapATAC2/archive/'],
            'download_filename': '%s.tar.gz' % local_commit,
            'filename': SOURCE_TAR_GZ
        }],
        'checksums': ['747df33440ec8b8c09b6704f0ff565b6e79dbf3cff8c949641667a9dd9250c8c'],
    }),
]

offline = False  # vendoring of git sources not supported in Cargo easyblock yet

moduleclass = 'lib'
