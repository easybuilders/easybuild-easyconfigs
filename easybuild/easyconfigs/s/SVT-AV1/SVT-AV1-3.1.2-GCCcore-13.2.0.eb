easyblock = 'CMakeMake'

name = 'SVT-AV1'
version = '3.1.2'

homepage = 'https://gitlab.com/AOMediaCodec/SVT-AV1'
description = """The Scalable Video Technology for AV1 (SVT-AV1 Encoder) is an AV1-compliant software encoder library.
The work on the SVT-AV1 encoder targets the development of a production-quality AV1-encoder with performance levels
applicable to a wide range of applications, from premium VOD to real-time and live encoding/transcoding."""

toolchain = {'name': 'GCCcore', 'version': '13.2.0'}

source_urls = ['https://gitlab.com/AOMediaCodec/SVT-AV1/-/archive/v%(version)s']
sources = ['%(name)s-v%(version)s.tar.gz']
checksums = ['d0d73bfea42fdcc1222272bf2b0e2319e9df5574721298090c3d28315586ecb1']

builddependencies = [
    ('binutils', '2.40'),
    ('CMake', '3.27.6'),
    ('NASM', '2.16.01'),
]

configopts = ['-DBUILD_SHARED_LIBS=OFF', '']

sanity_check_paths = {
    'files': ['bin/SvtAv1EncApp', 'lib/libSvtAv1Enc.a', f'lib/libSvtAv1Enc.{SHLIB_EXT}'],
    'dirs': [],
}

sanity_check_commands = ['SvtAv1EncApp --version']

moduleclass = 'tools'
