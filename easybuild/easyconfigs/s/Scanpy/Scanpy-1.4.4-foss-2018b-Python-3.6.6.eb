easyblock = 'PythonBundle'

name = 'Scanpy'
version = '1.4.4'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://scanpy.readthedocs.io'
description = """Scanpy is a scalable toolkit for analyzing single-cell gene expression data. 
It includes preprocessing, visualization, clustering, pseudotime and trajectory inference 
and differential expression testing. 
The Python-based implementation efficiently deals with datasets of more than one million cells."""

toolchain = {'name': 'foss', 'version': '2018b'}
toolchainopts = {'pic': True, 'lowopt': True}

builddependencies = [('CMake', '3.12.1')]

dependencies = [
    ('Python', '3.6.6'),
    ('tqdm', '4.24.0', versionsuffix),
    ('h5py', '2.9.0', versionsuffix),
    ('matplotlib', '3.0.0', versionsuffix),
    ('PyTables', '3.4.4', versionsuffix),
    ('scikit-learn', '0.20.0', versionsuffix),
    ('matplotlib', '3.0.0', versionsuffix),
    ('Seaborn', '0.9.0', versionsuffix),
    ('numba', '0.41.0', versionsuffix),
    ('networkx', '2.2', versionsuffix),
    ('python-igraph', '0.7.1.post6', versionsuffix),
]

use_pip = True

exts_default_options = {'source_urls': [PYPI_SOURCE]}

exts_list = [
    ('get_version', '2.1', {
        'checksums': ['8156b526c2557537b8ca82241fa2b82b3da25939627398f6567dee31ba9725bc'],
    }),
    ('legacy-api-wrap', '1.2', {
        'modulename': 'legacy_api_wrap',
        'checksums': ['034a44612da7e9943d3964363a98937ab54d55e3301075374abe0d521eb8101b'],
    }),
    ('anndata', '0.6.22', {
        'checksums': ['7ea67ea020266bc0abc24adf462f15451c776b444a533c5a39f90e29638af2a8'],
    }),
    ('louvain', '0.6.1', {
        'checksums': ['ffd83318e44e62e24d3cb7f159c0ff13382edafb956a8169cedd2c79b66b6968'],
    }),
    ('leidenalg', '0.7.0', {
        'checksums': ['c1c92c5638ef0ccf67ea89ed311cf19116a82e67bf1a015a3e65f00653a3dc95'],
    }),
    ('annoy', '1.16.2', {
        'checksums': ['41348e813fe7125eda3e2229a075eba3d065173ba6c5f20c545bb9c2932633fa'],
    }),
    ('bbknn', '1.3.6', {
        'checksums': ['c01376dc84f6a58807cdaf32664dc3f67f310a817264b9e122f29fe202807ac9'],
    }),
    ('numpy', '1.17.3', {
        'source_tmpl': '%(name)s-%(version)s.zip',
    }),
    ('scipy', '1.3.1', {
    }),
    ('statsmodels', '0.10.1', {
    }),
    ('scanpy', version, {
        'checksums': ['c21a450205053e45130b7232c241a0a6f0a065329fc0961be1e04f34d3cede99'],
    }),
]

sanity_check_paths = {
    'files': [],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

moduleclass = 'bio'
