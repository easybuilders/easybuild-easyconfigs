# #
# Authors:
#  - Patrick de Koning <p.j.h.de_koning@lumc.nl>
#  - Prerak Mody <prerakmody@gmail.com>
# #
easyblock = 'PythonBundle'

name = 'SlurmViewer'
version = '1.0.4'

homepage = 'https://gitlab.com/lkeb/slurm_viewer'
description = """One-stop command to view the status of a Slurm cluster,
including nodes, jobs and resource utilization."""

toolchain = {'name': 'GCCcore', 'version': '14.2.0'}

builddependencies = [
    ('binutils', '2.42'),    # Binary utilities for compilation
    ('hatchling', '1.27.0'), # Python package builder
    ('poetry', '2.1.2'),     # Dependency management and packaging tool
]

dependencies = [
    ('Python', '3.12.3'),
    ('Python-bundle-PyPI', '2024.06'),
]

exts_list = [
    ('textual', '3.0.1', {
        'source_tmpl': 'textual-%(version)s-py3-none-any.whl',
        'checksums': ['99daade46a3209c2f25a7ea210485192ebf8a3340108731c1a4600676f188619'],
    }),
    ('textual-plotext', '1.0.1', {
        'source_tmpl': 'textual_plotext-%(version)s-py3-none-any.whl',
        'checksums': ['6b6bfd00b29f121ddf216eaaf9bdac9d688ed72f40028484d279a10cbbb169ed'],
    }),
    ('textual-sortable-datatable', '0.0.6', {
        'source_tmpl': 'textual_sortable_datatable-%(version)s-py3-none-any.whl',
        'checksums': ['bea9fc0aae83032d7558d10ef3ff6339767195f0f70ae3ca74479c8e823ddcb3'],
    }),
    ('asyncssh', '2.19.0', {
        'source_tmpl': 'asyncssh-%(version)s-py3-none-any.whl',
        'checksums': ['bb82ac30ff0cb4393fbaf1114e606ad7a4f13d6c4bdaed423c033ee26b455228'],
    }),
    ('tomlkit', '0.13.2', {
        'source_tmpl': 'tomlkit-%(version)s-py3-none-any.whl',
        'checksums': ['7a974427f6e119197f670fbbbeae7bef749a6c14e793db934baefc1b5f03efde'],
    }),
    ('pydantic', '2.10.4', {
        'source_tmpl': 'pydantic-%(version)s-py3-none-any.whl',
        'checksums': ['597e135ea68be3a37552fb524bc7d0d66dcf93d395acd93a00682f1efcb8ee3d']
    }),
    ('loguru', '0.7.3', {
        'source_tmpl': 'loguru-%(version)s-py3-none-any.whl',
        'checksums': ['31a33c10c8e1e10422bfd431aeb5d351c7cf7fa671e3c4df004162264b28220c'],
    }),
    ('importlib-metadata', '8.5.0', {
        'source_tmpl': 'importlib_metadata-%(version)s-py3-none-any.whl',
        'checksums': ['45e54197d28b7a7f1559e60b95e7c567032b602131fbd588f1497f47880aa68b']
    }),
    ('python-dateutil', '2.9.0', {
        'source_tmpl': 'python_dateutil-%(version)s-py3-none-any.whl',
        'checksums': ['cbf2f1da5e6083ac2fbfd4da39a25f34312230110440f424a14c7558bb85d82e'],
    }),
    ('slurm-viewer', version, {
        'source_tmpl': 'slurm_viewer-%(version)s-py3-none-any.whl',
        'checksums': ['d764873324c68d3058f0e7ab1c196c2ef0d59f8670ec8ade08ac03eb3f88caf6'],
    }),
]

sanity_check_paths = {
    'files': ['bin/slurm-viewer'],
    'dirs': ['lib']
}

modloadmsg = """Slurm Viewer (slurm-viewer) is a one-stop command to view the status of a Slurm cluster,
including nodes, jobs and resource utilization.
It uses a configuration file.
This is made by default (from v1.0.2) in the ~/.config/slurm-viewer/ directory.
You can also point to a settings file by setting the environment variable $SLURM_VIEW_CONFIG."""

moduleclass = 'tools'