# Thomas Hoffmann, EMBL Heidelberg, structures-it@embl.de, 2025/5
easyblock = 'PythonBundle'

name = 'starfile'
version = '0.5.12'
local_pandas_ver = '2.1.4'
versionsuffix = '-pandas-%s' % local_pandas_ver

homepage = 'https://github.com/teamtomo/starfile'

description = """starfile is a Python implementation of the STAR file format designed principally
for compatibility with RELION format STAR files.
It allows STAR files to be created and opened easily using a very simple API,
exposing data blocks as pandas DataFrame objects.
This library aims to allow users and developers to read and write STAR files in
Python as easily as possible as well as to encourage further analysis of data
within the scientific Python (SciPy) ecosystem.
You can use it interactively to inspect/explore files or in scripts and larger
software packages to provide basic STAR file I/O functions."""

toolchain = {'name': 'foss', 'version': '2023a'}

builddependencies = [
    ('meson-python', '0.15.0'),  # pandas 2.1.4 needs meson >= 1.2.1
    ('poetry', '1.5.1'),
]

dependencies = [
    ('Python', '3.11.3'),
    ('SciPy-bundle', '2023.07'),
    ('Arrow', '14.0.1'),
]

exts_list = [
    # starfile 0.5.4 needs pandas>=2.1.1
    ('pandas', local_pandas_ver, {
        'checksums': ['fcb68203c833cc735321512e13861358079a96c174a61f5116a1de89c58c0ef7'],
    }),
    (name, version, {
        'checksums': ['2de1a05998bc1e805c333cc2bbac60ddab12753eb94ad3592c1f98639491b6c7'],
    }),
]

sanity_check_paths = {
    'files': [],
    'dirs': ['lib/python%(pyshortver)s/site-packages/%(name)s']
}
moduleclass = 'bio'
