easyblock = 'CMakeMake'

name = 'STARE'
version = '1.0.5'

homepage = 'https://github.com/SchulzLab/STARE'
description = """STARE is a framework that combines two tasks, which
can also work independently:

 - score enhancer-gene interactions with the Activity-By-Contact (ABC) model
 - derive TF affinities for regions

Those two parts are combined to summarise TF affinities on gene level,
which allows for a variety of downstream analyses."""

toolchain = {'name': 'GCC', 'version': '14.3.0'}

github_account = 'SchulzLab'
source_urls = [GITHUB_SOURCE]
sources = [V_VERSION_TAR_GZ]
patches = [
    'STARE-1.0.5_add_install_directives.patch',
    'STARE-1.0.5_fix_scripts_to_use_PATH.patch',
]
checksums = [
    {'v1.0.5.tar.gz': 'a221ff7e8c621ede1db62a092d0f53f00b8c3262d93155f06b701e9991b1d4e4'},
    {'STARE-1.0.5_add_install_directives.patch': 'ae090b82487e881e4075f5ffc5cc4ad9330a5595205c8fe56d2f0fb25a0ad46d'},
    {'STARE-1.0.5_fix_scripts_to_use_PATH.patch': '826faea3ec30730c77cc9de3bcc40f25593a1a9a1d8ac7ce7f5bf68961066e1e'},
]

builddependencies = [
    ('CMake', '3.31.8'),
]

dependencies = [
    ('Boost', '1.88.0'),
    ('BEDTools', '2.31.1'),
    ('Juicebox', '3.1.4', '-Java-25'),
]

start_dir = 'Code'

sanity_check_paths = {
    'files': [f'bin/{x}' for x in ['Promoter_Windows', 'ReplaceInvalidChars',
                                   'TRAPmulti', 'PSCM_to_PSEM', 'STARE_ABCpp',
                                   'TF_Gene_Scorer_Reshape']] +
             [f'bin/{x}.sh' for x in ['Juicebox_KR_normalization', 'Juicebox_normalization', 'STARE']],
    'dirs': ['bin'],
}

moduleclass = 'bio'
