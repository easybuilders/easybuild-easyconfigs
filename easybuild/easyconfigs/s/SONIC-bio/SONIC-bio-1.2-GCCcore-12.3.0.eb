easyblock = 'MakeCp'

name = 'SONIC-bio'
version = '1.2'
homepage = 'https://github.com/calkan/sonic'
description = """SONIC (Some Organism's Nucleotide Information Container):
builds compact genome annotation containers used by TARDIS/VALOR2, plus a C API."""
toolchain = {'name': 'GCCcore', 'version': '12.3.0'}

builddependencies = [
    ('binutils',  '2.40'),
]

dependencies = [
    ('zlib',  '1.2.13'),
]

# Upstream has release v1.2
source_urls = ['https://github.com/calkan/sonic/archive/refs/tags']
sources = ['%(version)s.tar.gz']
checksums = ['db70396b6b481c42f600960e7acad5970b53d243ad677fd09a48cac89cce6257']

# Plain 'make' produces: 'sonic' (CLI) and usually 'libsonic.a'
buildopts = ''

files_to_copy = [
    (['sonic'], 'bin'),
    # If present, also ship library + headers so other tools can link against SONIC
    (['libsonic.a'], 'lib'),
    (['sonic.h', 'sonic_interval.h', 'sonic_reference.h', 'sonic_structures.h'], 'include'),
]

sanity_check_paths = {
    'files': ['bin/sonic'],
    'dirs': [],
}
sanity_check_commands = [('sonic', '--help')]

moduleclass = 'bio'
