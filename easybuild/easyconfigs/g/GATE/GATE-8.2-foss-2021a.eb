name = 'GATE'
version = '8.2'

homepage = 'http://www.opengatecollaboration.org/'
description = """GATE is an advanced opensource software developed by the international OpenGATE collaboration and
 dedicated to the numerical simulations in medical imaging. It currently supports simulations of Emission Tomography
 (Positron Emission Tomography - PET and Single Photon Emission Computed Tomography - SPECT), and Computed Tomography"""

toolchain = {'name': 'foss', 'version': '2021a'}
toolchainopts = {'extra_cxxflags': '-std=c++17 -fpermissive'}

source_urls = ['https://github.com/OpenGATE/Gate/archive/']
sources = ['v%(version)s.tar.gz']
patches = [
    'GATE-7.0_Makefile-prefix.patch',
    'GATE-8.2_fix_define_min_max.patch',
    'GATE-8.2_fix_std_max.patch',
]
checksums = [
    'edd8b1017310442bb6819a2815d61b63b1da1aef613fea2678aede134cbad741',  # v8.2.tar.gz
    'e72c230df1cdd05c07ac405b22bf26931abdcd3e5f7b942e9c88251ac24cc6af',  # GATE-7.0_Makefile-prefix.patch
    '72f58777295fa30c70994862cb311c4a39b92354537276cdd6bc1c66344e1cc8',  # GATE-8.2_fix_define_min_max.patch
    '75529cc434133ce8fb12ee6f8c6e050c22c24eba487dcd51ea442504c099ea85',  # GATE-8.2_fix_std_max.patch
]

builddependencies = [('CMake', '3.20.1')]
dependencies = [
    ('Geant4', '10.7.3'),
    ('CLHEP', '2.4.4.0'),
    ('ROOT', '6.24.06'),
]

# enable extra capabilities (Davis requires Geant4 10.04 or newer)
configopts = "-DGATE_USE_OPTICAL=1 -DGATE_USE_DAVIS=1"
configopts += " -DCMAKE_CXX_STANDARD=17 "

moduleclass = 'cae'
