don't create directories and install language bindings in non-owned directories
author: Kenneth Hoste (HPC-UGent)
--- graphviz-2.40.1.orig/tclpkg/Makefile.am	2016-08-09 23:02:10.000000000 +0200
+++ graphviz-2.40.1/tclpkg/Makefile.am	2018-04-19 20:23:53.288880227 +0200
@@ -37,131 +37,7 @@
 #    ./configure --prefix=$HOME/graphviz; make; make install
 # without root priviledges.
 install-data-hook:
-if WITH_LUA
-	-mkdir -p $(DESTDIR)@LUA_INSTALL_DIR@;
-	if test -w $(DESTDIR)@LUA_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@LUA_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgluadir)/libgv_lua.so gv.so;) \
-	else \
-		echo "Warning: @LUA_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of lua binding."; \
-	fi
-endif
-if WITH_PERL
-	-mkdir -p $(DESTDIR)@PERL_INSTALL_DIR@;
-	if test -w $(DESTDIR)@PERL_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@PERL_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgperldir)/libgv_perl.so gv.so; \
-			cp -f $(DESTDIR)$(pkgperldir)/gv.pm gv.pm;) \
-	else \
-		echo "Warning: @PERL_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of perl binding."; \
-	fi
-endif
-if WITH_PHP
-	-mkdir -p $(DESTDIR)@PHP_INSTALL_DIR@;
-	if test -w $(DESTDIR)@PHP_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@PHP_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgphpdir)/libgv_php.so gv.so;) \
-	else \
-		echo "Warning: @PHP_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of php binding."; \
-	fi
-	-mkdir -p $(DESTDIR)@PHP_INSTALL_DATADIR@;
-	if test -w $(DESTDIR)@PHP_INSTALL_DATADIR@; then \
-		(cd $(DESTDIR)@PHP_INSTALL_DATADIR@; \
-			cp -f $(DESTDIR)$(pkgphpdir)/gv.php gv.php;) \
-	else \
-		echo "Warning: @PHP_INSTALL_DATADIR@ is not writable."; \
-		echo "Skipping system installation of php binding."; \
-	fi
-endif
-if WITH_PYTHON
-	-mkdir -p $(DESTDIR)@PYTHON_INSTALL_DIR@;
-	if test -w $(DESTDIR)@PYTHON_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@PYTHON_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgpythondir)/libgv_python.so _gv.so; \
-			cp -f $(DESTDIR)$(pkgpythondir)/gv.py gv.py;) \
-	else \
-		echo "Warning: @PYTHON_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of python binding."; \
-	fi
-endif
-if WITH_PYTHON23
-	-mkdir -p $(DESTDIR)@PYTHON23_INSTALL_DIR@;
-	if test -w $(DESTDIR)@PYTHON23_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@PYTHON23_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgpython23dir)/libgv_python23.so _gv.so; \
-			cp -f $(DESTDIR)$(pkgpython23dir)/gv.py gv.py;) \
-	else \
-		echo "Warning: @PYTHON23_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of python23 binding."; \
-	fi
-endif
-if WITH_PYTHON24
-	-mkdir -p $(DESTDIR)@PYTHON24_INSTALL_DIR@;
-	if test -w $(DESTDIR)@PYTHON24_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@PYTHON24_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgpython24dir)/libgv_python24.so _gv.so; \
-			cp -f $(DESTDIR)$(pkgpython24dir)/gv.py gv.py;) \
-	else \
-		echo "Warning: @PYTHON24_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of python24 binding."; \
-	fi
-endif
-if WITH_PYTHON25
-	-mkdir -p $(DESTDIR)@PYTHON25_INSTALL_DIR@;
-	if test -w $(DESTDIR)@PYTHON25_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@PYTHON25_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgpython25dir)/libgv_python25.so _gv.so; \
-			cp -f $(DESTDIR)$(pkgpython25dir)/gv.py gv.py;) \
-	else \
-		echo "Warning: @PYTHON25_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of python25 binding."; \
-	fi
-endif
-if WITH_PYTHON26
-	-mkdir -p $(DESTDIR)@PYTHON26_INSTALL_DIR@;
-	if test -w $(DESTDIR)@PYTHON26_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@PYTHON26_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgpython26dir)/libgv_python26.so _gv.so; \
-			cp -f $(DESTDIR)$(pkgpython26dir)/gv.py gv.py;) \
-	else \
-		echo "Warning: @PYTHON26_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of python26 binding."; \
-	fi
-endif
-if WITH_PYTHON27
-	-mkdir -p $(DESTDIR)@PYTHON27_INSTALL_DIR@;
-	if test -w $(DESTDIR)@PYTHON27_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@PYTHON27_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgpython27dir)/libgv_python27.so _gv.so; \
-			cp -f $(DESTDIR)$(pkgpython27dir)/gv.py gv.py;) \
-	else \
-		echo "Warning: @PYTHON27_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of python27 binding."; \
-	fi
-endif
-if WITH_RUBY
-	-mkdir -p $(DESTDIR)@RUBY_INSTALL_DIR@;
-	if test -w $(DESTDIR)@RUBY_INSTALL_DIR@; then \
-		(cd $(DESTDIR)@RUBY_INSTALL_DIR@; \
-			cp -f $(DESTDIR)$(pkgrubydir)/libgv_ruby.so gv.so;) \
-	else \
-		echo "Warning: @RUBY_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of ruby binding."; \
-	fi
-endif
-if WITH_TCL
-	-mkdir -p $(DESTDIR)@TCL_INSTALL_DIR@;
-	if test -w $(DESTDIR)@TCL_INSTALL_DIR@/; then \
-		(cd $(DESTDIR)@TCL_INSTALL_DIR@; \
-			cp -rf $(DESTDIR)$(pkgtcldir) @PACKAGE_NAME@;) \
-	else \
-		echo "Warning: @TCL_INSTALL_DIR@ is not writable."; \
-		echo "Skipping system installation of tcl bindings."; \
-	fi
-endif
+	echo "(installing in non-owned directories has been patched out)"
 
 # removal of installs into @xxx_INSTALL_DIR@ fail if root
 #     has installed a system copy
diff -ru graphviz-2.40.1.orig/tclpkg/Makefile.in graphviz-2.40.1/tclpkg/Makefile.in
--- graphviz-2.40.1.orig/tclpkg/Makefile.in	2016-12-25 04:05:04.000000000 +0100
+++ graphviz-2.40.1/tclpkg/Makefile.in	2018-04-19 20:23:53.428881928 +0200
@@ -928,109 +928,7 @@
 #    ./configure --prefix=$HOME/graphviz; make; make install
 # without root priviledges.
 install-data-hook:
-@WITH_LUA_TRUE@	-mkdir -p $(DESTDIR)@LUA_INSTALL_DIR@;
-@WITH_LUA_TRUE@	if test -w $(DESTDIR)@LUA_INSTALL_DIR@; then \
-@WITH_LUA_TRUE@		(cd $(DESTDIR)@LUA_INSTALL_DIR@; \
-@WITH_LUA_TRUE@			cp -f $(DESTDIR)$(pkgluadir)/libgv_lua.so gv.so;) \
-@WITH_LUA_TRUE@	else \
-@WITH_LUA_TRUE@		echo "Warning: @LUA_INSTALL_DIR@ is not writable."; \
-@WITH_LUA_TRUE@		echo "Skipping system installation of lua binding."; \
-@WITH_LUA_TRUE@	fi
-@WITH_PERL_TRUE@	-mkdir -p $(DESTDIR)@PERL_INSTALL_DIR@;
-@WITH_PERL_TRUE@	if test -w $(DESTDIR)@PERL_INSTALL_DIR@; then \
-@WITH_PERL_TRUE@		(cd $(DESTDIR)@PERL_INSTALL_DIR@; \
-@WITH_PERL_TRUE@			cp -f $(DESTDIR)$(pkgperldir)/libgv_perl.so gv.so; \
-@WITH_PERL_TRUE@			cp -f $(DESTDIR)$(pkgperldir)/gv.pm gv.pm;) \
-@WITH_PERL_TRUE@	else \
-@WITH_PERL_TRUE@		echo "Warning: @PERL_INSTALL_DIR@ is not writable."; \
-@WITH_PERL_TRUE@		echo "Skipping system installation of perl binding."; \
-@WITH_PERL_TRUE@	fi
-@WITH_PHP_TRUE@	-mkdir -p $(DESTDIR)@PHP_INSTALL_DIR@;
-@WITH_PHP_TRUE@	if test -w $(DESTDIR)@PHP_INSTALL_DIR@; then \
-@WITH_PHP_TRUE@		(cd $(DESTDIR)@PHP_INSTALL_DIR@; \
-@WITH_PHP_TRUE@			cp -f $(DESTDIR)$(pkgphpdir)/libgv_php.so gv.so;) \
-@WITH_PHP_TRUE@	else \
-@WITH_PHP_TRUE@		echo "Warning: @PHP_INSTALL_DIR@ is not writable."; \
-@WITH_PHP_TRUE@		echo "Skipping system installation of php binding."; \
-@WITH_PHP_TRUE@	fi
-@WITH_PHP_TRUE@	-mkdir -p $(DESTDIR)@PHP_INSTALL_DATADIR@;
-@WITH_PHP_TRUE@	if test -w $(DESTDIR)@PHP_INSTALL_DATADIR@; then \
-@WITH_PHP_TRUE@		(cd $(DESTDIR)@PHP_INSTALL_DATADIR@; \
-@WITH_PHP_TRUE@			cp -f $(DESTDIR)$(pkgphpdir)/gv.php gv.php;) \
-@WITH_PHP_TRUE@	else \
-@WITH_PHP_TRUE@		echo "Warning: @PHP_INSTALL_DATADIR@ is not writable."; \
-@WITH_PHP_TRUE@		echo "Skipping system installation of php binding."; \
-@WITH_PHP_TRUE@	fi
-@WITH_PYTHON_TRUE@	-mkdir -p $(DESTDIR)@PYTHON_INSTALL_DIR@;
-@WITH_PYTHON_TRUE@	if test -w $(DESTDIR)@PYTHON_INSTALL_DIR@; then \
-@WITH_PYTHON_TRUE@		(cd $(DESTDIR)@PYTHON_INSTALL_DIR@; \
-@WITH_PYTHON_TRUE@			cp -f $(DESTDIR)$(pkgpythondir)/libgv_python.so _gv.so; \
-@WITH_PYTHON_TRUE@			cp -f $(DESTDIR)$(pkgpythondir)/gv.py gv.py;) \
-@WITH_PYTHON_TRUE@	else \
-@WITH_PYTHON_TRUE@		echo "Warning: @PYTHON_INSTALL_DIR@ is not writable."; \
-@WITH_PYTHON_TRUE@		echo "Skipping system installation of python binding."; \
-@WITH_PYTHON_TRUE@	fi
-@WITH_PYTHON23_TRUE@	-mkdir -p $(DESTDIR)@PYTHON23_INSTALL_DIR@;
-@WITH_PYTHON23_TRUE@	if test -w $(DESTDIR)@PYTHON23_INSTALL_DIR@; then \
-@WITH_PYTHON23_TRUE@		(cd $(DESTDIR)@PYTHON23_INSTALL_DIR@; \
-@WITH_PYTHON23_TRUE@			cp -f $(DESTDIR)$(pkgpython23dir)/libgv_python23.so _gv.so; \
-@WITH_PYTHON23_TRUE@			cp -f $(DESTDIR)$(pkgpython23dir)/gv.py gv.py;) \
-@WITH_PYTHON23_TRUE@	else \
-@WITH_PYTHON23_TRUE@		echo "Warning: @PYTHON23_INSTALL_DIR@ is not writable."; \
-@WITH_PYTHON23_TRUE@		echo "Skipping system installation of python23 binding."; \
-@WITH_PYTHON23_TRUE@	fi
-@WITH_PYTHON24_TRUE@	-mkdir -p $(DESTDIR)@PYTHON24_INSTALL_DIR@;
-@WITH_PYTHON24_TRUE@	if test -w $(DESTDIR)@PYTHON24_INSTALL_DIR@; then \
-@WITH_PYTHON24_TRUE@		(cd $(DESTDIR)@PYTHON24_INSTALL_DIR@; \
-@WITH_PYTHON24_TRUE@			cp -f $(DESTDIR)$(pkgpython24dir)/libgv_python24.so _gv.so; \
-@WITH_PYTHON24_TRUE@			cp -f $(DESTDIR)$(pkgpython24dir)/gv.py gv.py;) \
-@WITH_PYTHON24_TRUE@	else \
-@WITH_PYTHON24_TRUE@		echo "Warning: @PYTHON24_INSTALL_DIR@ is not writable."; \
-@WITH_PYTHON24_TRUE@		echo "Skipping system installation of python24 binding."; \
-@WITH_PYTHON24_TRUE@	fi
-@WITH_PYTHON25_TRUE@	-mkdir -p $(DESTDIR)@PYTHON25_INSTALL_DIR@;
-@WITH_PYTHON25_TRUE@	if test -w $(DESTDIR)@PYTHON25_INSTALL_DIR@; then \
-@WITH_PYTHON25_TRUE@		(cd $(DESTDIR)@PYTHON25_INSTALL_DIR@; \
-@WITH_PYTHON25_TRUE@			cp -f $(DESTDIR)$(pkgpython25dir)/libgv_python25.so _gv.so; \
-@WITH_PYTHON25_TRUE@			cp -f $(DESTDIR)$(pkgpython25dir)/gv.py gv.py;) \
-@WITH_PYTHON25_TRUE@	else \
-@WITH_PYTHON25_TRUE@		echo "Warning: @PYTHON25_INSTALL_DIR@ is not writable."; \
-@WITH_PYTHON25_TRUE@		echo "Skipping system installation of python25 binding."; \
-@WITH_PYTHON25_TRUE@	fi
-@WITH_PYTHON26_TRUE@	-mkdir -p $(DESTDIR)@PYTHON26_INSTALL_DIR@;
-@WITH_PYTHON26_TRUE@	if test -w $(DESTDIR)@PYTHON26_INSTALL_DIR@; then \
-@WITH_PYTHON26_TRUE@		(cd $(DESTDIR)@PYTHON26_INSTALL_DIR@; \
-@WITH_PYTHON26_TRUE@			cp -f $(DESTDIR)$(pkgpython26dir)/libgv_python26.so _gv.so; \
-@WITH_PYTHON26_TRUE@			cp -f $(DESTDIR)$(pkgpython26dir)/gv.py gv.py;) \
-@WITH_PYTHON26_TRUE@	else \
-@WITH_PYTHON26_TRUE@		echo "Warning: @PYTHON26_INSTALL_DIR@ is not writable."; \
-@WITH_PYTHON26_TRUE@		echo "Skipping system installation of python26 binding."; \
-@WITH_PYTHON26_TRUE@	fi
-@WITH_PYTHON27_TRUE@	-mkdir -p $(DESTDIR)@PYTHON27_INSTALL_DIR@;
-@WITH_PYTHON27_TRUE@	if test -w $(DESTDIR)@PYTHON27_INSTALL_DIR@; then \
-@WITH_PYTHON27_TRUE@		(cd $(DESTDIR)@PYTHON27_INSTALL_DIR@; \
-@WITH_PYTHON27_TRUE@			cp -f $(DESTDIR)$(pkgpython27dir)/libgv_python27.so _gv.so; \
-@WITH_PYTHON27_TRUE@			cp -f $(DESTDIR)$(pkgpython27dir)/gv.py gv.py;) \
-@WITH_PYTHON27_TRUE@	else \
-@WITH_PYTHON27_TRUE@		echo "Warning: @PYTHON27_INSTALL_DIR@ is not writable."; \
-@WITH_PYTHON27_TRUE@		echo "Skipping system installation of python27 binding."; \
-@WITH_PYTHON27_TRUE@	fi
-@WITH_RUBY_TRUE@	-mkdir -p $(DESTDIR)@RUBY_INSTALL_DIR@;
-@WITH_RUBY_TRUE@	if test -w $(DESTDIR)@RUBY_INSTALL_DIR@; then \
-@WITH_RUBY_TRUE@		(cd $(DESTDIR)@RUBY_INSTALL_DIR@; \
-@WITH_RUBY_TRUE@			cp -f $(DESTDIR)$(pkgrubydir)/libgv_ruby.so gv.so;) \
-@WITH_RUBY_TRUE@	else \
-@WITH_RUBY_TRUE@		echo "Warning: @RUBY_INSTALL_DIR@ is not writable."; \
-@WITH_RUBY_TRUE@		echo "Skipping system installation of ruby binding."; \
-@WITH_RUBY_TRUE@	fi
-@WITH_TCL_TRUE@	-mkdir -p $(DESTDIR)@TCL_INSTALL_DIR@;
-@WITH_TCL_TRUE@	if test -w $(DESTDIR)@TCL_INSTALL_DIR@/; then \
-@WITH_TCL_TRUE@		(cd $(DESTDIR)@TCL_INSTALL_DIR@; \
-@WITH_TCL_TRUE@			cp -rf $(DESTDIR)$(pkgtcldir) @PACKAGE_NAME@;) \
-@WITH_TCL_TRUE@	else \
-@WITH_TCL_TRUE@		echo "Warning: @TCL_INSTALL_DIR@ is not writable."; \
-@WITH_TCL_TRUE@		echo "Skipping system installation of tcl bindings."; \
-@WITH_TCL_TRUE@	fi
+	echo "(installing in non-owned directories has been patched out)"
 
 # removal of installs into @xxx_INSTALL_DIR@ fail if root
 #     has installed a system copy
