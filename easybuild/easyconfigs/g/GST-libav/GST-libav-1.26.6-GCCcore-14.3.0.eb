easyblock = 'MesonNinja'

name = 'GST-libav'
version = '1.26.6'

homepage = 'https://gstreamer.freedesktop.org/'
description = """This module contains a GStreamer plugin for using the encoders, decoders, muxers, and demuxers
provided by FFmpeg. It is called gst-libav for historical reasons"""

toolchain = {'name': 'GCCcore', 'version': '14.3.0'}

source_urls = ['https://gstreamer.freedesktop.org/src/gst-libav']
sources = [SOURCELOWER_TAR_XZ]
checksums = ['6e50a6222d509c52b19143f9a7bd3581e22c745d0c4bc27ddb07e1229bcc11b8']

builddependencies = [
    ('binutils', '2.44'),
    ('Meson', '1.8.2'),
    ('Ninja', '1.13.0'),
    ('GObject-Introspection', '1.84.0'),
    ('gettext', '0.25'),
    ('pkgconf', '2.4.3'),
    ('Bison', '3.8.2'),
]

dependencies = [
    ('GLib', '2.85.3'),
    ('GStreamer', '1.26.5'),
    ('GST-plugins-base', version),
    ('FFmpeg', '7.1.2'),
]

modextrapaths = {
    'GST_PLUGIN_PATH': 'lib/gstreamer-1.0',
}

sanity_check_paths = {
    'files': [f'lib/gstreamer-1.0/libgstlibav.{SHLIB_EXT}'],
    'dirs': ['include', 'share']
}

moduleclass = 'vis'
