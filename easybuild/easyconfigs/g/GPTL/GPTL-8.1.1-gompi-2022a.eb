easyblock = 'ConfigureMake'

name = 'GPTL'
version = '8.1.1'

homepage = 'https://github.com/jmrosinski/GPTL'
description = "General Purpose Timing Library (GPTL) for performance instrumentation."

toolchain = {'name': 'gompi', 'version': '2022a'}
toolchainopts = {
    # use the regular C/Fortran compilers from gompi; not forcing MPI wrappers here
    'usempi': True,
}

source_urls = ['https://github.com/jmrosinski/GPTL/releases/download/v%(version)s/']
sources = ['gptl-%(version)s.tar.gz']
checksums = ['b8ee26f7aeedd2a31d565789634e7c380023fe6b65bbf59030884f4dcbce94a5']

dependencies = []
builddependencies = []

preconfigopts = ""
configopts = "--enable-pmpi" # add PMPI support

sanity_check_paths = {
    'files': [
        'lib/libgptl.a',    # static library
        'include/gptl.h',
    ],
    'dirs': [],
}

moduleclass = 'devel'
