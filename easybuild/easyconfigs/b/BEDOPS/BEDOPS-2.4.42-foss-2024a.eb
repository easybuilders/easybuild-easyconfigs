# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
# updated: Denis Kristak (INUITS)
# Update: Petr Kr√°l (INUITS)

easyblock = 'MakeCp'

name = 'BEDOPS'
version = '2.4.42'

homepage = 'http://%(namelower)s.readthedocs.io/en/latest/index.html'
description = """BEDOPS is an open-source command-line toolkit that performs highly efficient and
 scalable Boolean and other set operations, statistical calculations, archiving, conversion and
 other management of genomic data of arbitrary scale. Tasks can be easily split by chromosome for
 distributing whole-genome analyses across a computational cluster."""

toolchain = {'name': 'foss', 'version': '2024a'}
toolchainopts = {'pic': True}

source_urls = ['https://github.com/%(namelower)s/%(namelower)s/archive/']
sources = ['v%(version)s.tar.gz']
checksums = ['9daa0c098e37490a07f84664d2c61ff8909689995cf7e1673d259ccd4f1c453c']

# else build of jansson library fails with: 'configure: error: C compiler cannot create executables'
prebuildopts = 'unset LIBS && '
# builds all variants and copies executables to bin directory
buildopts = ' all && make install'

files_to_copy = ['bin']

sanity_check_paths = {
    'files': [
        'bin/%s' % x for x in ['bam2bed', '%(namelower)s', 'convert2bed', 'unstarch']
    ],
    'dirs': [],
}

sanity_check_commands = ['%(namelower)s --help']

moduleclass = 'bio'
