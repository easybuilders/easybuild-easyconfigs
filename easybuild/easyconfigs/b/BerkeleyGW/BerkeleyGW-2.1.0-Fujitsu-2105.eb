name = 'BerkeleyGW'
version = '2.1.0'

homepage = 'https://www.berkeleygw.org'
description = """The BerkeleyGW Package is a set of computer codes that calculates the quasiparticle
 properties and the optical responses of a large variety of materials from bulk periodic crystals to
 nanostructures such as slabs, wires and molecules."""

toolchain = {'name': 'Fujitsu', 'version': '2105'}
toolchainopts = {'usempi': True, 'openmp': True}

source_urls = ['https://berkeley.box.com/shared/static/']
sources = [{'download_filename': 'ze3azi5vlyw7hpwvl9i5f82kaiid6g0x.gz', 'filename': SOURCE_TAR_GZ}]
patches = [
    'BerkeleyGW-2.1.0_makefile.patch',
    'BerkeleyGW-2.1.0_tests.patch',
]
checksums = [
    '31f3b643dd937350c3866338321d675d4a1b1f54c730b43ad74ae67e75a9e6f2',  # BerkeleyGW-2.1.0.tar.gz
    '6cc7b075893ab5fe18627c783b55478e85361698db2520608cc665ace24d879c',  # BerkeleyGW-2.1.0_makefile.patch
    '71c5f45efd2b153f7855003e00e31a735e8fa3cd5c4bbb2953fb1eb450109309',  # BerkeleyGW-2.1.0_tests.patch
]

dependencies = [
    # ELPA, Python and HDF5 are not available with this toolchain yet
    # ('ELPA', '2020.11.001'),
    # ('Python', '3.8.6'),
    # ('h5py', '3.1.0'),
    # ('HDF5', '1.10.7'),
    ('fftlib', '20170628'),
]

# two tests, requiring python with numpy and HDF5, fail; all others pass
runtest = False

moduleclass = 'phys'
