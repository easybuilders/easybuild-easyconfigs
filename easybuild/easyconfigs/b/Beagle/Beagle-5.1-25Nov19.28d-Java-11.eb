# This easyconfig was created by the BEAR Software team at the University of Birmingham.
easyblock = 'JAR'

name = 'Beagle'
local_date_ver = '25Nov19.28d'
version = '5.1-%s' % local_date_ver
versionsuffix = '-Java-%(javaver)s'

homepage = "https://faculty.washington.edu/browning/beagle/beagle.html"
description = """Beagle is a software package for phasing genotypes and for imputing ungenotyped markers.
 Version 5.0 has new, fast algorithms for genotype phasing and imputation."""

toolchain = SYSTEM

source_urls = ['https://faculty.washington.edu/browning/beagle/']
sources = [
    'beagle.%s.jar' % local_date_ver,
    'bref3.%s.jar' % local_date_ver,
]
checksums = [
    '994f926a4ec0eac665631f37c4a961d3f75c966c71841079275364013c90996c',  # beagle.25Nov19.28d.jar
    '969c0881050c4a48d19be9ea64bf49fa68c1403b69f9f739bbfd865dda639b2d',  # bref3.25Nov19.28d.jar
]

dependencies = [('Java', '11')]

postinstallcmds = [
    "echo '#!/bin/bash\njava -jar $( dirname $0 )/bref3.%s.jar \"$@\"' > %%(installdir)s/bref3" % local_date_ver,
    "echo '#!/bin/bash\njava -jar $( dirname $0 )/beagle.%s.jar \"$@\"' > %%(installdir)s/beagle" % local_date_ver,
    "chmod +x %(installdir)s/beagle %(installdir)s/bref3",
]

sanity_check_paths = {
    'files': sources,
    'dirs': [],
}

modextrapaths = {'PATH': '.'}

sanity_check_commands = ['beagle', 'bref3 help']

moduleclass = 'bio'
