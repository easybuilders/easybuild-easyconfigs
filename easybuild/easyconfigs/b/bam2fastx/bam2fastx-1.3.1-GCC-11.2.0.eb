easyblock = 'MesonNinja'

name = 'bam2fastx'
version = '1.3.1'

homepage = 'https://github.com/PacificBiosciences/bam2fastx'
description = """
  Conversion of PacBio BAM files into gzipped fasta and fastq files, including splitting of barcoded data
"""

toolchain = {'name': 'GCC', 'version': '11.2.0'}

source_urls = ["https://github.com/PacificBiosciences/bam2fastx/archive/refs/tags"]
sources = ["%(version)s.tar.gz"]
patches = ['bam2fastx-meson.patch']


builddependencies = [
    ('Meson', '0.58.2'),
    ('Ninja', '1.10.2'),
    ('binutils', '2.37'),
    ('pkg-config', '0.29.2'),
]

dependencies = [
    ('Boost', '1.77.0'),
    ('pbbam', '2.1.0'),
    ('pbcopper', '2.0.0'),
    ('HTSlib', '1.14'),
    ('SAMtools', '1.14')
]

sanity_check_paths = {
    'files': ['bin/bam2fasta', 'bin/bam2fastq'],
    'dirs': ['bin'],
}

moduleclass = 'bio'
