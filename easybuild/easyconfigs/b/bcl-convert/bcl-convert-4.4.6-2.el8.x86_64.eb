easyblock = 'Binary'

name = 'bcl-convert'
version = '4.4.6-2'
versionsuffix = '.el8.x86_64'

homepage = 'https://support.illumina.com/sequencing/sequencing_software/bcl-convert.html'
description = """The Illumina BCL Convert v4.0 is a standalone local software app that converts the
 Binary Base Call (BCL) files produced by Illumina sequencing systems to FASTQ files."""

toolchain = SYSTEM

sources = ['bcl-convert-%(version)s%(versionsuffix)s.rpm']
checksums = ['faa1ab08b597f3e01c5945eb71da438b987d8dbc03cd6af2d9c547d8fc8d0f92']
download_instructions = f"Download {sources} manually from " + \
                        "https://support.illumina.com/sequencing/sequencing_software/bcl-convert/downloads.html"

install_cmd = "rpm2cpio " + sources[0] + " | cpio -idmv && "
install_cmd += "mkdir -p %(installdir)s/bin && "
install_cmd += "cp -ar usr/bin/bcl-convert %(installdir)s/bin"

sanity_check_paths = {
    'files': ['bin/bcl-convert'],
    'dirs': [],
}

sanity_check_commands = ["bcl-convert --help"]

moduleclass = 'bio'
