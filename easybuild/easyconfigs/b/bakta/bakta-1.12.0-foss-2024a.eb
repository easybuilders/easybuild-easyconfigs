easyblock = 'PythonBundle'

name = 'bakta'
version = '1.12.0'

homepage = "https://github.com/oschwengers/bakta"
description = """Bakta is a tool for the rapid & standardized annotation of bacterial genomes and plasmids
 from both isolates and MAGs. It provides dbxref-rich, sORF-including and taxon-independent annotations
 in machine-readable JSON & bioinformatics standard file formats for automated downstream analysis."""

toolchain = {'name': 'foss', 'version': '2024a'}

builddependencies = [
    ('scikit-build-core', '0.11.1'),
    ('Cython', '3.0.10'),
]

dependencies = [
    ('Python', '3.12.3'),
    ('Biopython', '1.84'),
    ('PyYAML', '6.0.2'),
    ('PyHMMER', '0.12.0'),
    ('matplotlib', '3.9.2'),
    ('python-isal', '1.7.0'),
    ('zlib-ng', '2.2.1'),
    ('archspec', '0.2.5'),
]

exts_list = [
    ('about_time', '4.2.1', {
        'source_tmpl': '%(name)s-%(version)s-py3-none-any.whl',
        'checksums': ['8bbf4c75fe13cbd3d72f49a03b02c5c7dca32169b6d49117c257e7eb3eaee341'],
    }),
    ('grapheme', '0.6.0', {
        'checksums': ['44c2b9f21bbe77cfb05835fec230bd435954275267fea1858013b102f8603cca'],
    }),
    ('alive_progress', '3.2.0', {
        'source_tmpl': '%(name)s-%(version)s-py3-none-any.whl',
        'checksums': ['0677929f8d3202572e9d142f08170b34dbbe256cc6d2afbf75ef187c7da964a8'],
    }),
    ('pyCirclize', '1.7.1', {
        'source_tmpl': '%(namelower)s-%(version)s-py3-none-any.whl',
        'checksums': ['e0c049877b1ee47245866cc9968f2aded5fe3ead8a3333841536dc29fd14bc90'],
    }),
    ('pyrodigal', '3.7.0', {
        'checksums': ['415940f07a9e6e60ca023b99381f2d5f62f801914b9edd6da5a28dd7307b091d'],
    }),
    ('xopen', '2.0.2', {
        'source_tmpl': '%(name)s-%(version)s-py3-none-any.whl',
        'checksums': ['74e7f7fb7e7f42bd843c798595fa5a52086d7d1bf3de0e8513c6615516431313'],
    }),
    (name, version, {
        'source_tmpl': '%(name)s-%(version)s-py3-none-any.whl',
        'checksums': ['6772bc9defe423648a2e69976d91cb6ee109bf528aee01f235f4228e1a590b34'],
    }),
]

local_bins = ['bakta', 'bakta_db', 'bakta_io', 'bakta_plot', 'bakta_proteins']

sanity_check_paths = {
    'files': ['bin/%s' % bin for bin in local_bins],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

sanity_check_commands = ['%s --help' % bin for bin in local_bins]

moduleclass = 'bio'
