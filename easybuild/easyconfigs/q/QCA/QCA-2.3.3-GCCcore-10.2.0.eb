# Author: Pavel Grochal (INUITS)
# License: GPLv2

easyblock = 'CMakeMake'

name = 'QCA'
version = '2.3.3'

homepage = 'http://delta.affinix.com/qca/'
description = """Taking a hint from the similarly-named Java Cryptography Architecture,
 QCA aims to provide a straightforward and cross-platform crypto API, using Qt datatypes
 and conventions. QCA separates the API from the implementation, using plugins known as
 Providers. The advantage of this model is to allow applications to avoid linking to or
 explicitly depending on any particular cryptographic library. This allows one to easily
 change or upgrade crypto implementations without even needing to recompile the
 application! QCA should work everywhere Qt does, including Windows/Unix/MacOSX."""

toolchain = {'name': 'GCCcore', 'version': '10.2.0'}

# source_urls = ['http://download.kde.org/stable/qca/%(version)s/src/']
# sources = ['%(namelower)s-%(version)s.tar.xz']

# on github the file resides at: https://github.com/KDE/qca/archive/refs/tags/v2.3.3.tar.gz
github_account = 'KDE'
source_urls = [GITHUB_SOURCE]
sources = ['v%(version)s.tar.gz']
checksums = ['b45ab98b88f0cdf87dc026c73ef8746cf85f930ea56e2015bd02d0194b801ae0']

builddependencies = [
    ('binutils', '2.35'),
    ('CMake', '3.18.4'),
]
dependencies = [
    ('Qt5', '5.14.2'),
    ('OpenSSL', '1.1.1h'),
]

configopts = "-DQT5_BUILD=true"

sanity_check_paths = {
    'files': ['bin/qcatool-qt5', 'lib/libqca-qt5.%s' % SHLIB_EXT, 'lib/pkgconfig/qca2-qt5.pc'],
    'dirs': ['include/Qca-qt5', 'lib/cmake/Qca-qt5', 'share/man'],
}

moduleclass = 'devel'
