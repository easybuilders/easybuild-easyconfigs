name = 'QEMU'
version = '10.1.0'

homepage = 'https://www.qemu.org'
description = """A generic and open source machine emulator and virtualizer"""

toolchain = {'name': 'GCCcore', 'version': '14.3.0'}

source_urls = ['https://download.qemu.org']
sources = [SOURCELOWER_TAR_XZ]
checksums = ['e0517349b50ca73ebec2fa85b06050d5c463ca65c738833bd8fc1f15f180be51']

builddependencies = [
    ('binutils', '2.44'),
    ('Meson', '1.8.2'),
    ('Ninja', '1.13.0'),
    ('pkgconf', '2.4.3'),
    ('flex', '2.6.4'),
    ('Bison', '3.8.2'),
]

dependencies = [
    # User interface
    ('X11', '20250608'),
    ('DBus', '1.16.2'),
    ('pixman', '0.46.4'),
    ('SDL2', '2.32.10'),
    ('SDL2_image', '2.8.8'),
    ('GTK3', '3.24.43'),
    ('libpng', '1.6.50'),
    ('ncurses', '6.5'),
    # Audio
    ('alsa-lib', '1.2.14'),
    # Crypto (GnuTLS, gnupg-bundle, or nettle)
    ('GnuTLS', '3.8.10'),
    # Optional dependencies
    ('Python', '3.13.5'),
    ('numactl', '2.0.19'),
    ('liburing', '2.12'),
    ('libaio', '0.3.113'),
    ('GDB', '16.3'),
    ('elfutils', '0.193'),
    ('Capstone', '5.0.6'),
    ('dtc', '1.7.2'),
    ('libslirp', '4.9.1'),
    ('FUSE', '3.17.4'),
    ('alsa-lib', '1.2.14'),
    ('GLib', '2.85.3'),
    ('libtasn1', '4.20.0'),
    ('libiconv', '1.18'),
    ('cURL', '8.14.1'),
    ('libepoxy', '1.5.10'),
    ('LZO', '2.10'),
    ('snappy', '1.2.2'),
    ('bzip2', '1.0.8'),
    ('zstd', '1.5.7'),
]

# List of emulation targets to build, leave empty to build all
# targets = [
#     'aarch64-linux-user',
#     'aarch64_be-linux-user',
#     'alpha-linux-user',
#     'arm-linux-user',
#     'armeb-linux-user',
#     'hexagon-linux-user',
#     'hppa-linux-user',
#     'i386-linux-user',
#     'loongarch64-linux-user',
#     'm68k-linux-user',
#     'microblaze-linux-user',
#     'microblazeel-linux-user',
#     'mips-linux-user',
#     'mips64-linux-user',
#     'mips64el-linux-user',
#     'mipsel-linux-user',
#     'mipsn32-linux-user',
#     'mipsn32el-linux-user',
#     'or1k-linux-user',
#     'ppc-linux-user',
#     'ppc64-linux-user',
#     'ppc64le-linux-user',
#     'riscv32-linux-user',
#     'riscv64-linux-user',
#     's390x-linux-user',
#     'sh4-linux-user',
#     'sh4eb-linux-user',
#     'sparc-linux-user',
#     'sparc32plus-linux-user',
#     'sparc64-linux-user',
#     'x86_64-linux-user',
#     'xtensa-linux-user',
#     'xtensaeb-linux-user',
#     'aarch64-softmmu',
#     'alpha-softmmu',
#     'arm-softmmu',
#     'avr-softmmu',
#     'hppa-softmmu',
#     'i386-softmmu',
#     'loongarch64-softmmu',
#     'm68k-softmmu',
#     'microblaze-softmmu',
#     'microblazeel-softmmu',
#     'mips-softmmu',
#     'mips64-softmmu',
#     'mips64el-softmmu',
#     'mipsel-softmmu',
#     'or1k-softmmu',
#     'ppc-softmmu',
#     'ppc64-softmmu',
#     'riscv32-softmmu',
#     'riscv64-softmmu',
#     'rx-softmmu',
#     's390x-softmmu',
#     'sh4-softmmu',
#     'sh4eb-softmmu',
#     'sparc-softmmu',
#     'sparc64-softmmu',
#     'tricore-softmmu',
#     'x86_64-softmmu',
#     'xtensa-softmmu',
#     'xtensaeb-softmmu',
# ]

# QEMU linker uses response files which circumvent EB rpath wrapper, but QEMU uses RUNPATH by default
check_readelf_rpath = False

# Binaries depend on what targts to build
sanity_check_paths = {
    'files': ['include/qemu-plugin.h'],
    'dirs': ['bin'],
}

moduleclass = 'tools'
