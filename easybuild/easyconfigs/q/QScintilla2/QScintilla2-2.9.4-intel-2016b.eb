easyblock = 'ConfigureMake'

name = 'QScintilla2'
version = '2.9.4'

homepage = 'https://www.riverbankcomputing.com/software/qscintilla'
description = "QScintilla is a port to Qt of Neil Hodgson's Scintilla C++ editor control"

toolchain = {'name': 'intel', 'version': '2016b'}

source_urls = ['https://sourceforge.net/projects/pyqt/files/%(name)s/QScintilla-%(version)s/']
sources = ['QScintilla_gpl-%(version)s.tar.gz']

dependencies = [
    ('PyQt5', '5.7.1', '-Python-2.7.12'),
]

start_dir = 'Qt4Qt5'

skipsteps = ['configure']

prebuildopts = "sed -i 's@\$\$\[QT_INSTALL_LIBS\]@%(installdir)s/lib@g' qscintilla.pro && "
prebuildopts += "sed -i 's@\$\$\[QT_INSTALL_HEADERS\]@%(installdir)s/include@g' qscintilla.pro && "
prebuildopts += "sed -i 's@\$\$\[QT_INSTALL_TRANSLATIONS\]@%(installdir)s/trans@g' qscintilla.pro && "
prebuildopts += "sed -i 's@\$\$\[QT_INSTALL_DATA\]@%(installdir)s/data@g' qscintilla.pro && "
prebuildopts += "sed -i 's@\$\$\[QT_HOST_DATA\]@%(installdir)s/data@g' qscintilla.pro && "
prebuildopts += "qmake qscintilla.pro && "

sanity_check_paths = {
    'files': ['lib/libqscintilla2.so'],
    'dirs': ['include/Qsci', 'trans'],
}

moduleclass = 'vis'
