easyblock = 'PythonBundle'

name = 'Qiskit'
version = '2.0.2'

homepage = 'https://qiskit.org'
description = """Qiskit is an open-source framework for working with noisy quantum computers
 at the level of pulses, circuits, and algorithms."""

toolchain = {'name': 'foss', 'version': '2023a'}
# toolchainopts = {'lowopt': True, 'vectorize': False, 'debug': True}

builddependencies = [
    ('CMake', '3.26.3'),
    ('Ninja', '1.11.1'),
    ('scikit-build', '0.17.6'),
    ('pybind11', '2.11.1'),
    ('Rust', '1.81.0'),
    ('conan', '1.60.2'),
    ('setuptools-rust', '1.11.0'),
]
dependencies = [
    ('Python', '3.11.3'),
    ('SciPy-bundle', '2023.07'),
    ('SymEngine-python', '0.11.0'),
    ('sympy', '1.12'),
    ('numba', '0.58.1'),
    ('dill', '0.3.7'),
    ('h5py', '3.9.0'),
    ('retworkx', '0.9.0'),
    ('networkx', '3.1'),
    ('rustworkx', '0.15.1'),
    ('scikit-learn', '1.4.2'),
    ('nlohmann_json', '3.11.2'),
    ('spdlog', '1.11.0'),
]

exts_list = [
    ('setuptools-scm', '8.3.1', {
        'source_tmpl': 'setuptools_scm-%(version)s.tar.gz',
        'checksums': ['3d555e92b75dacd037d32bafdf94f97af51ea29ae8c7b234cf94b7a5bd242a63'],
    }),
    ('stevedore', '5.3.0', {
        'checksums': ['9a64265f4060312828151c204efbe9b7a9852a0d9228756344dbc7e4023e375a'],
    }),
    ('qiskit', version, {
        'checksums': ['4901496df2d891c8b1b3d79f5b255da6343153cc7dcee1e2caae95be58b8b354'],
    }),
    ('qiskit-aer', '0.17.1', {
        # https://github.com/Qiskit/qiskit-aer/blob/main/CONTRIBUTING.md#building-with-mpi-support
        'use_pip': False,
        'buildcmd': 'bdist_wheel',
        'buildopts': "-- -DAER_MPI=True -DAER_THRUST_BACKEND=OMP",
        'installopts': " && pip install --no-deps --no-build-isolation --prefix=%(installdir)s dist/*.whl",
        'source_tmpl': 'qiskit_aer-%(version)s.tar.gz',
        'checksums': ['4de47d5a23e283e6cea44186002ab296212c4d837705c528818fbb6cfd28c185'],
    }),
]

moduleclass = 'quantum'
