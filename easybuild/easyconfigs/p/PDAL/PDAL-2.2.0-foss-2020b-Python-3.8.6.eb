easyblock = 'CMakeNinja'

name = 'PDAL'
version = '2.2.0'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://pdal.io/'
description = '''PDAL is a C++ BSD library for translating and manipulating point cloud data. 
                 It is very much like the GDAL library which handles raster and vector data'''

toolchain = {'name': 'foss', 'version': '2020b'}

source_urls = ['https://github.com/%(namelower)s/%(namelower)s/archive/']
sources = ['%(version)s.tar.gz']
checksums = ['d6c3f3551e7c2d332edc2c28afde499d7af7232faad98b3499faa348f3d51746']

builddependencies = [
    ('Ninja', '1.10.1'),
    ('CMake', '3.18.4'),
    ('binutils', '2.35'),
    ('pkg-config', '0.29.2'),
]

dependencies = [ 
    ('Python', '3.8.6'),
    ('GDAL', '3.2.1'),
    ('zstd', '1.4.5'),
    ('LASzip', '3.4.3'),
    ('PostgreSQL', '13.3'),
    ('OpenSSL', '1.1.1h'),
    ('libunwind', '1.4.0'),
]

sanity_check_paths = {
    'files': ['bin/pdal'],
    'dirs': ['lib/pkgconfig'],
}

moduleclass = 'data'

# modules needed to build interactively
# module load CMake GCC/9.3.0 GDAL zstd LASzip PostgreSQL OpenSSL libunwind Ninja
