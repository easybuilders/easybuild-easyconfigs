easyblock = 'MesonNinja'

name = 'picom'
version = '12.5'

homepage = 'https://github.com/yshui/picom'
description = "A lightweight compositor for X11, successor to compton, offering shadows, transparency, and vsync."

toolchain = {'name': 'GCCcore', 'version': '13.3.0'}

source_urls = ['https://github.com/yshui/picom/archive/refs/tags']
sources = ['v%(version)s.tar.gz']
checksums = ['627fa5d7c590df3ba8d2c41eb35d3859f7826bd28fa49e92a0e04fb60ed77904']

builddependencies = [
    ('binutils', '2.42'),
    ('Meson', '1.4.0'),
    ('Ninja', '1.12.1'),
    ('CMake', '3.29.3'),
    ('pkgconf', '2.2.0'),
]

dependencies = [
    ('X11', '20240607'),
    ('PCRE2', '10.43'),
    ('pixman', '0.43.4'),
    ('libev', '4.33'),
    ('libconfig', '1.8.1'),
    ('uthash', '2.3.0', '', SYSTEM),
    ('libepoxy', '1.5.10')
]

# Disable optional systemd/logind integration, not needed for VNC/Openbox
configopts = '-Ddbus=false '

sanity_check_paths = {
    'files': ['bin/picom'],
    'dirs': [],
}

sanity_check_commands = ['picom -h']

moduleclass = 'vis'
