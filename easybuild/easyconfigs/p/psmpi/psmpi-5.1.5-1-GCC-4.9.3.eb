easyblock = 'EB_MPICH2'

name = 'psmpi'
version = '5.1.5-1'

homepage = 'https://github.com/ParaStation/psmpi2'
description = """ParaStation MPI as part of the ParaStationV5 cluster suite provides robust, flexible and scalable communication and management functions for Linux-based compute clusters. Beside parallel applications based on the Message Passing Interface specification, version 2 (MPI2), also serial applications are supported.

The default optimisations of the MPI compiler wrappers are set by the environment variable JURECA_DEFAULT_MPI_WRAPPER_FLAGS 
"""

toolchain = {'version': '4.9.3', 'name': 'GCC'}

# toolchainopts = {'defaultopt': True}
sources = ['%(version)s.tar.gz']
source_urls = ['https://github.com/ParaStation/psmpi2/archive/']

dependencies = [
    ('pscom', '5.0.45-1', '', True),
]

hiddendependencies = [
    ('pscom', '5.0.45-1', '', True),
]

# Build shared libraries
configopts = ' --with-confset=gcc PSCOM_LDFLAGS=-L$EBROOTPSCOM/lib PSCOM_CPPFLAGS=-I$EBROOTPSCOM/include --with-mpichconf="--enable-static" '

modluafooter = 'family("mpi")'

moduleclass = 'mpi'
