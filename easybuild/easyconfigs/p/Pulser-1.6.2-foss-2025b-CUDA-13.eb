easyblock = 'PythonBundle'

name = 'Pulser'
version = '1.6.2'
versionsuffix = '-CUDA-%(cudaver)s'

homepage = 'https://github.com/pasqal-io/Pulser'
description = """Pulser-core provides the core
functionalities needed to create sequences with pulser."""

toolchain = {'name': 'foss', 'version': '2025b'}

builddependencies = [
    ('hatchling', '1.27.0'),
    ('poetry', '2.1.3'),
    ('pybind11', '3.0.0'),
    ('CMake', '4.0.3'),
]

dependencies = [
    ('Python', '3.13.5'),
    ('SciPy-bundle', '2025.07'),
    ('matplotlib', '3.10.5'),
    ('Qutip', '5.2.1'),
    ('pydantic', '2.11.9'),
    ('sympy', '1.14.0'),
    ('networkx', '3.5'),
    ('CUDA', '12.9.1', '', SYSTEM),
    ('PyTorch', '2.9.0', versionsuffix),
]

exts_list = [
    ('pyjwt', '2.10.1', {
        'modulename': 'jwt',
        'checksums': ['3cc5772eb20009233caf06e9d8a0577824723b44e6648ee0a2aedb6cf9381953'],
    }),
    ('backoff', '2.2.1', {
        'checksums': ['03f829f5bb1923180821643f8753b0502c3b682293992485b0eef2807afa5cba'],
    }),
    ('requests-mock', '1.12.1', {
        'checksums': ['e9e12e333b525156e82a3c852f22016b9158220d2f47454de9cae8a77d371401'],
    }),
    ('pulser_core', version, {
        'modulename': False,
        'source_tmpl': 'v%(version)s.tar.gz',
        'source_urls': ['https://github.com/pasqal-io/Pulser/archive/refs/tags/'],
        'start_dir': 'pulser-core',
        'checksums': ['b05ae586c1479b75741ae450d7a7ce8e680ad3b47650e7b45f22a9485693bd23'],
    }),
    ('auth0-python', '3.24.1', {
        'modulename': 'auth0',
        'checksums': ['62c2e177b9517879bd8632da9eb7668aedd5775fddea87b0e0e1e9a89b9dd096'],
    }),
    ('pulser_simulation', version, {
        'modulename': 'pulser_simulation',
        'source_tmpl': 'v%(version)s.tar.gz',
        'source_urls': ['https://github.com/pasqal-io/Pulser/archive/refs/tags/'],
        'start_dir': 'pulser-simulation',
        'checksums': ['b05ae586c1479b75741ae450d7a7ce8e680ad3b47650e7b45f22a9485693bd23'],
    }),
    ('pasqal_cloud', '0.20.5', {
        'modulename': 'pasqal_cloud',
        'source_tmpl': '%(version)s.tar.gz',
        'source_urls': ['https://github.com/pasqal-io/pasqal-cloud/archive/refs/tags/'],
        'start_dir': 'pasqal-cloud',
        'checksums': ['ee9a5ab30c3e79728be02fc861af9ac2a49ba3d96ef703506d718f22c312810e'],
    }),
    ('pulser_pasqal', '0.20.5', {
        'modulename': 'pulser_pasqal',
        'source_tmpl': '%(version)s.tar.gz',
        'source_urls': ['https://github.com/pasqal-io/pasqal-cloud/archive/refs/tags/'],
        'start_dir': 'pulser-pasqal',
        'checksums': ['ee9a5ab30c3e79728be02fc861af9ac2a49ba3d96ef703506d718f22c312810e'],
    }),
    ('emulators', '2.4.0', {
        'modulename': False,
        'source_tmpl': 'v%(version)s.tar.gz',
        'source_urls': ['https://github.com/pasqal-io/emulators/archive/refs/tags/'],
        'patches': ['emulators-2.4.0-fix.patch'],
        'checksums': [
            {'v%(version)s.tar.gz': 'a98028a6c526ecec3449a5cf9ecbbe3cef51ade559c320970523165a68727a11'},
            {'emulators-2.4.0-fix.patch': '669505e7ff9ac6c28c7da25ce01308dd003235df48fa138ce60242d69e457e52'},
        ],
    }),
    ('pulser', version, {
        'modulename': 'pulser',
        'source_tmpl': 'v%(version)s.tar.gz',
        'source_urls': ['https://github.com/pasqal-io/Pulser/archive/refs/tags/'],
        'checksums': ['b05ae586c1479b75741ae450d7a7ce8e680ad3b47650e7b45f22a9485693bd23'],
    }),
]

moduleclass = 'quantum'
