easyblock = 'PythonBundle'

name = 'pyannote'
version = '2023.06'
local_pytorch_version = '2.1.2'
versionsuffix = '-PyTorch-' + local_pytorch_version + '-CUDA-%(cudaver)s'

homepage = 'https://github.com/pyannote'
description = "pyannote is an open-source toolkit for speaker diarization."

toolchain = {'name': 'foss', 'version': '2023a'}

dependencies = [
    ('CUDA', '12.1.1', '', SYSTEM),
    ('Python', '3.11.3'),
    ('PyTorch-Lightning', '2.2.0.post0', '-CUDA-%(cudaver)s'),
    ('SciPy-bundle', '2023.07'),
    ('scikit-learn', '1.3.1'),
    ('PyYAML', '6.0'),
    ('Optuna', '3.5.0'),
    ('matplotlib', '3.7.2'),
    ('sympy', '1.12'),
    ('typer', '0.9.0'),
    ('einops', '0.7.0'),
    ('torchaudio', '2.2.0', versionsuffix),
    ('torch-audiomentations', '0.11.1', versionsuffix),
    ('huggingface-hub', '0.20.3'),
    ('asteroid-filterbanks', '0.4.0', versionsuffix),
    ('speechbrain', '0.5.16', versionsuffix),
    ('pytorch-metric-learning', '2.4.1', versionsuffix),
    ('semver', '3.0.2'),
    ('omegaconf', '2.3.0', '-Java-11'),
    ('lightning', '2.2.0.post0', versionsuffix),
]

use_pip = True


exts_list = [
    ('pyannote.core', '5.0.0', {
        'checksums': ['1a55bcc8bd680ba6be5fa53efa3b6f3d2cdd67144c07b6b4d8d66d5cb0d2096f'],
    }),
    ('pyannote.database', '5.0.1', {
        'checksums': ['980bdc910615380a17d8bd82805f9770006d050b2c7a946a520ade4627192681'],
    }),
    ('pyannote.metrics', '3.2.1', {
        'checksums': ['08024255a3550e96a8e9da4f5f4af326886548480de891414567c8900920ee5c'],
    }),
    ('pyannote.pipeline', '3.0.1', {
        'checksums': ['021794e26a2cf5d8fb5bb1835951e71f5fac33eb14e23dfb7468e16b1b805151'],
    }),
    ('pyannote.audio', '3.1.1', {
        'checksums': ['b6562d46b5d5d616c1887cafd5aab3f7d19ecf6b3312fc6c4f72f37332fcd408'],
    }),
]

sanity_pip_check = True

moduleclass = 'tools'
