easyblock = 'PythonBundle'

name = 'pySCENIC'
version = '0.9.7'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://github.com/aertslab/pySCENIC'
description = """pySCENIC is a lightning-fast python implementation of the SCENIC
pipeline (Single-Cell rEgulatory Network Inference and Clustering) which enables
biologists to infer transcription factors, gene regulatory networks and
cell types from single-cell RNA-seq data."""

toolchain = {'name': 'foss', 'version': '2018b'}

use_pip = True

dependencies = [
    ('Python', '3.6.6'),
    ('PyYAML', '3.13', versionsuffix),
    ('numba', '0.42.1', versionsuffix),
    ('Arrow', '0.12.0', versionsuffix),
    ('scikit-learn', '0.20.2', versionsuffix),
    ('tqdm', '4.31.1', versionsuffix),
    ('networkx', '2.2', versionsuffix),
    ('h5py', '2.8.0', versionsuffix),
    ('dask', '1.0.0', versionsuffix),
]

exts_list = [
    ('toolz', '0.9.0', {
        'source_urls': ['https://pypi.python.org/packages/source/t/toolz'],
        'checksums': ['929f0a7ea7f61c178bd951bdae93920515d3fbdbafc8e6caf82d752b9b3b31c9'],
    }),
    ('cytoolz', '0.9.0.1', {
        'source_urls': ['https://pypi.python.org/packages/source/c/cytoolz'],
        'checksums': ['84cc06fa40aa310f2df79dd440fc5f84c3e20f01f9f7783fc9c38d0a11ba00e5'],
    }),
    ('dill', '0.2.8.2', {
        'source_urls': ['https://pypi.python.org/packages/source/d/dill'],
        'checksums': ['624dc244b94371bb2d6e7f40084228a2edfff02373fe20e018bef1ee92fdd5b3'],
    }),
    ('multiprocessing_on_dill', '3.5.0a4', {
        'source_urls': ['https://pypi.python.org/packages/source/m/multiprocessing_on_dill'],
        'checksums': ['d6d50c300ff4bd408bb71eb78725e60231039ee9b3d0d9bb7697b9d0e15045e7'],
    }),
    ('attrs', '19.1.0', {
        'modulename': 'attr',
        'source_urls': ['https://pypi.python.org/packages/source/a/attrs'],
        'checksums': ['f0b870f674851ecbfbbbd364d6b5cbdff9dcedbc7f3f5e18a6891057f21fe399'],
    }),
    ('frozendict', '1.2', {
        'source_urls': ['https://pypi.python.org/packages/source/f/frozendict'],
        'checksums': ['774179f22db2ef8a106e9c38d4d1f8503864603db08de2e33be5b778230f6e45'],
    }),
    ('arboreto', '0.1.5', {
        'source_urls': ['https://pypi.python.org/packages/source/a/arboreto'],
        'checksums': ['a78c73b367eaae38dadeba150e52ac98aec6fc916df703ce61b79d27fe1015f9'],
    }),
    ('boltons', '19.1.0', {
        'source_urls': ['https://pypi.python.org/packages/source/b/boltons'],
        'checksums': ['c32b2d121331a9bc7c220050d4273f3aa359b7569cb4794188e71524603113dc'],
    }),
    ('interlap', '0.2.6', {
        'source_urls': ['https://pypi.python.org/packages/source/i/interlap'],
        'checksums': ['a8585a165bf7e94d4d262811b4cb00674059414c50afc7561c949b0feb78fa09'],
    }),
    ('umap-learn', '0.3.8', {
        'modulename': 'umap',
        'source_urls': ['https://pypi.python.org/packages/source/u/umap-learn'],
        'checksums': ['f688060bce5495c06cb3e52df0982a63bb7b7755393b9f30e08e0c1791520d15'],
    }),
    ('loompy', '2.0.17', {
        'source_urls': ['https://pypi.python.org/packages/source/l/loompy'],
        'checksums': ['fa608019cb29569704fefb07486f579e21bfc4dc5949fdf56b8e1b31ee6b2982'],
    }),
    (name, version, {
        'source_tmpl': '%(version)s.tar.gz',
        'source_urls': ['https://github.com/aertslab/pySCENIC/archive'],
        'checksums': ['d686428c22d5bb8f68614be0199bdebabbcc0cfb0da70ff82146ab28b615934c'],
    }),
]

sanity_check_paths = {
    'files': ['bin/pyscenic'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

moduleclass = 'bio'
