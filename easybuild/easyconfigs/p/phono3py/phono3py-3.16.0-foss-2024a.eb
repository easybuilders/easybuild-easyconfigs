easyblock = 'PythonPackage'

name = 'phono3py'
version = '3.16.0'

homepage = 'http://phonopy.github.io/phono3py/'
description = """A simulation package of phonon-phonon interaction related properties."""

toolchain = {'name': 'foss', 'version': '2024a'}
toolchainopts = {'pic': True, 'openmp': True}

sources = [SOURCE_TAR_GZ]
patches = [
    'phono3py-%(version)s_old_license_syntax.patch',
    'phono3py-%(version)s_update_phonopy_version.patch',
]

dependencies = [
    ('Python', '3.12.3'),
    ('phonopy', '2.40.0'),
]

sanity_check_paths = {
    'files': ['bin/phono3py'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

sanity_check_commands = ["phono3py --help"]

moduleclass = 'lib'
