##
# This file is an EasyBuild reciPY as per https://github.com/hpcugent/easybuild
# Author: Jordi Blasco <jordi.blasco@nesi.org.nz>
# New Zealand eScience Infrastructure (NeSI)
easyblock = 'ConfigureMake'

name = 'PFFT'
version = '20150317'

homepage = 'https://www-user.tu-chemnitz.de/~mpip/software.php?lang=en'
description = """PFFT is a software library for computing massively parallel, fast Fourier 
transformations on distributed memory architectures. PFFT can be understood as a generalization
of FFTW-MPI to multidimensional data decomposition."""

toolchain = {'name': 'intel', 'version': '2015a'}
toolchainopts = {'usempi': True}

git_commit_id = '7bc4852add'
sources = ['%s.tar.gz' % git_commit_id]
source_urls = ['https://github.com/mpip/pfft/archive']

dependencies = [
    ('FFTW', '3.3.4'),
    ('Autoconf', '2.69'),
]

preconfigopts = './bootstrap.sh && '
configopts = ' --with-fftw3-libdir=$EBROOTFFTW'

sanity_check_paths = {
    'files': ['lib/libpfft.so.0.0.0', 'lib/libpfft.a'],
    'dirs': [],
}

moduleclass = 'lib'
