easyblock = 'PythonBundle'

name = 'PyTorch-Extensions'
version = '2019.01'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://github.com/rusty1s'
description = """This is a bundle of extension libraries for PyTorch written by Matthias Fey."""

toolchain = {'name': 'foss', 'version': '2019a'}

builddependencies = [('binutils', '2.31.1')]
dependencies = [
    ('Python', '3.7.2'),
    ('PyTorch', '1.1.0', versionsuffix),
    ('scikit-learn', '0.20.3'),
    ('scikit-image', '0.15.0', versionsuffix),
    ('numba', '0.43.1'),
    ('h5py', '2.9.0'),
    ('RDFlib', '4.2.2'),
    ('googledrivedownloader', '0.4'),
    ('PLYfile', '0.7'),
]

exts_default_options = {
    'source_urls': [PYPI_SOURCE],
    'use_pip': True,
    'download_dep_fail': True,
    'sanity_pip_check': True,
}

exts_list = [
    ('Torch-Scatter', '1.3.1', {
        'source_tmpl': 'torch_scatter-%(version)s.tar.gz',
        'checksums': ['54cbad248350165ddc921ded3fe7a69be5d30c6536273a1a3282e375289f86ec'],
    }),
    ('Torch-Sparse', '0.4.0', {
        'source_tmpl': 'torch_sparse-%(version)s.tar.gz',
        'checksums': ['bf217539b4f714a1d6fac4d39ace3ad8033871717f44f8f365a2746056b9d805'],
    }),
    ('Torch-Cluster', '1.4.4', {
        'source_tmpl': 'torch_cluster-%(version)s.tar.gz',
        'checksums': ['7907f3f270116cb299bdd4f88de497a85b3b34cf127910ffe0a6131e16620123'],
    }),
    ('Torch-Spline-conv', '1.1.0', {
        'source_tmpl': 'torch_spline_conv-%(version)s.tar.gz',
        'checksums': ['e6029526205d1f7cb535389bebd81decf0649a20ea6a67688c02bd335a7f9339'],
    }),
    ('Torch-Geometric', '1.3.1', {
        'source_tmpl': 'torch_geometric-%(version)s.tar.gz',
        'checksums': ['910ed5013955e24bb8e2c336f0e3feae3e122ea3c9913102e5ed14b1efbdf89b'],
    }),
]

moduleclass = 'devel'
