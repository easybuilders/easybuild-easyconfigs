name = 'pocl'
version = '7.1'

homepage = 'http://portablecl.org'
description = """PoCL is a conformant implementation (for CPU and Level Zero GPU targets) of
the OpenCL 3.0 standard which can be easily adapted for new targets."""

toolchain = {'name': 'GCC', 'version': '14.3.0'}

source_urls = ['https://github.com/pocl/pocl/archive/']
sources = [V_VERSION_TAR_GZ]
checksums = ['1110057cb0736c74819ad65238655a03f7b93403a0ca60cdd8849082f515ca25']

builddependencies = [
    ('CMake', '3.31.8'),
    ('Ninja', '1.13.0'),
    ('pkgconf', '2.4.3'),
]

dependencies = [
    ('hwloc', '2.12.1'),
    ('libtool', '2.5.4'),
    ('libxml2', '2.14.3'),
    ('LLVM', '20.1.8'),
    ('glslang-SPIRV', '15.4.0'),
    ('libjpeg-turbo', '3.1.1'),
]

# Required to avoid pocl to pick up a different system LLVM during the build,
# likely leading to linker errors later on.
configopts = '-DCMAKE_CXX_FLAGS="-isystem $EBROOTLLVM/include" '
# Disable optional packages
configopts += '-DCMAKE_DISABLE_FIND_PACKAGE_OpenCV=TRUE '

moduleclass = 'lib'
