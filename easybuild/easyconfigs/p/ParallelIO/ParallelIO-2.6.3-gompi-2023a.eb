easyblock = 'CMakeMake'

name = 'ParallelIO'
version = '2.6.3'

homepage = 'https://github.com/NCAR/ParallelIO'
description = "A high-level Parallel I/O Library for structured grid applications"

toolchain = {'name': 'gompi', 'version': '2023a'}
toolchainopts = {'usempi': True}

source_urls = ['https://github.com/NCAR/%(name)s/archive/']
sources = ['pio2_5_10.tar.gz']
checksums = ['fac694827c81434a7766976711ba7179940e361e8ed0c189c7b397fd44d401de']

builddependencies = [
    ('CMake', '3.27.7', '', SYSTEM),
    ('pkgconf', '1.8.0'),
    ('Doxygen', '1.9.4'),
]
dependencies = [
    ('PnetCDF', '1.12.3'),
    ('netCDF-Fortran', '4.6.1', '-mpi'),
]

preconfigopts = "NETCDF_C=$EBROOTNETCDF NETCDF_F=$EBROOTNETCDFMINFORTRAN "
configopts = "-DPIO_ENABLE_TIMING=OFF "


sanity_check_paths = {
    'files': ['lib/libpiof.a', 'include/pio.mod'],
    'dirs': [],
}

modextravars = {'PIO': '%(installdir)s'}

moduleclass = 'data'
