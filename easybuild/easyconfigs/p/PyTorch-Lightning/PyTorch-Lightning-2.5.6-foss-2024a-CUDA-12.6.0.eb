easyblock = 'PythonBundle'

name = 'PyTorch-Lightning'
version = '2.5.6'
versionsuffix = '-CUDA-%(cudaver)s'

homepage = 'https://pytorchlightning.ai'
description = "PyTorch Lightning is the lightweight PyTorch wrapper for ML researchers."

toolchain = {'name': 'foss', 'version': '2024a'}

dependencies = [
    ('Python', '3.12.3'),
    ('CUDA', '12.6.0', '', SYSTEM),
    # dependencies from requirements/pytorch/base.txt
    ('PyTorch', '2.7.1', versionsuffix),
    ('tqdm', '4.66.5'),
    ('PyYAML', '6.0.2'),
    ('typing-extensions', '4.11.0'),
    # optional dependencies from requirements/pytorch/extra.txt
    ('bitsandbytes', '0.46.1', versionsuffix),
    ('tensorboardX', '2.6.4'),
    ('matplotlib', '3.9.2'),
    ('Hydra', '1.3.2'),
]

exts_list = [
    ('jsonargparse', '4.40.2', {
        'use_pip_extras': 'signatures,jsonnet',
        'checksums': ['91e775b4ffba72bc5bbdab39d2f3efeb8ca84285def706d534edeed621cf0cb7'],
    }),
    ('lightning-utilities', '0.15.2', {
        'source_tmpl': 'lightning_utilities-%(version)s.tar.gz',
        'checksums': ['cdf12f530214a63dacefd713f180d1ecf5d165338101617b4742e8f22c032e24'],
    }),
    ('torchmetrics', '1.8.2', {
        'checksums': ['cf64a901036bf107f17a524009eea7781c9c5315d130713aeca5747a686fe7a5'],
    }),
    ('pytorch-lightning', version, {
        'source_tmpl': 'pytorch_lightning-%(version)s.tar.gz',
        'checksums': ['c428faaceef74be50b870814d0d7e9f9c6ee748b8769a2afd3366bc69daf3a0f'],
    }),
]

moduleclass = 'ai'
