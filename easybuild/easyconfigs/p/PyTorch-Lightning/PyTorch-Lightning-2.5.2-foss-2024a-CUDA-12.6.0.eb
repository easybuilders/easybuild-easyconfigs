easyblock = 'PythonBundle'

name = 'PyTorch-Lightning'
version = '2.5.2'
versionsuffix = '-CUDA-%(cudaver)s'

homepage = 'https://pytorchlightning.ai'
description = "PyTorch Lightning is the lightweight PyTorch wrapper for ML researchers."

toolchain = {'name': 'foss', 'version': '2024a'}

builddependencies = [
    # ('flit', '3.9.0'),
    # ('poetry', '1.8.3'),
]

dependencies = [
    ('Python', '3.12.3'),
    ('CUDA', '12.6.0', '', SYSTEM),
    # dependencies from requirements/pytorch/base.txt
    ('PyTorch', '2.6.0', versionsuffix),
    ('tqdm', '4.66.5'),
    ('aiohttp', '3.10.10'),
    ('typing-extensions', '4.11.0'),
    # optional dependencies from requirements/pytorch/extra.txt
    ('bitsandbytes', '0.46.1', versionsuffix),
    ('tensorboardX', '2.6.4'),
    ('matplotlib', '3.9.2'),
    ('Hydra', '1.3.2'),
]

# dependencies from requirements/pytorch/base.txt
exts_list = [
    ('lightning-utilities', '0.14.3', {
        'source_tmpl': 'lightning_utilities-%(version)s.tar.gz',
        'checksums': ['37e2f83f273890052955a44054382c211a303012ee577619efbaa5df9e65e9f5'],
    }),
    ('torchmetrics', '1.7.3', {
        'checksums': ['08450a19cdb67ba1608aac0b213e5dc73033e11b60ad4719696ebcede591621e'],
    }),
    ('pytorch-lightning', version, {
        'source_tmpl': 'pytorch_lightning-%(version)s.tar.gz',
        'checksums': ['f817087d611be8d43b777dd4e543d72703e235510936677a13e6c29f7fd790e3'],
    }),
]

# sanity_check_paths = {
#     'files': [],
#     'dirs': ['bin', 'lib/python%(pyshortver)s/site-packages/dateutil-stubs'],
# }

moduleclass = 'lib'
