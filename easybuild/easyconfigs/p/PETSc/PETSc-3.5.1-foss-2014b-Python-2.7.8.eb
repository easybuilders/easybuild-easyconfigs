name = "PETSc"
version = "3.5.1"
versionsuffix = '-Python-2.7.8'

homepage = 'http://www.mcs.anl.gov/petsc'
description = """PETSc, pronounced PET-see (the S is silent), is a suite of data structures and routines for the scalable (parallel) solution
of scientific applications modeled by partial differential equations."""

toolchain = {'name': 'foss', 'version': '2014b'}
toolchainopts = {'usempi': True, 'pic': True}

source_urls = ['http://ftp.mcs.anl.gov/pub/petsc/release-snapshots']
sources = [SOURCELOWER_TAR_GZ]

patches = [
    'fix.patch',  # ignore failed ranlib check on use of '-c' argument
]

builddependencies = [
    ('binutils', '2.24'),
]

dependencies = [
    ('Boost', '1.55.0', versionsuffix),
    ('FIAT', '1.4.0', versionsuffix),
    ('METIS', '5.1.0'),
    ('ParMETIS', '4.0.3'),
    ('ScientificPython', '2.8.1', versionsuffix),
    ('SCOTCH', '6.0.0_esmumps'),
    ('SuiteSparse', '4.2.1', '-ParMETIS-4.0.3'),  # for CHOLMOD, UMFPACK
    ('Hypre', '2.8.0b'),
]

# petsc's makefile already does parallel things, it does not like it when you try to do it yourself
parallel = 1
moduleclass = 'numlib'
