easyblock = 'PackedBinary'

name = 'intel-XED'
version = '2025.06.08'

homepage = 'https://github.com/intelxed/xed'
description = """The Intel X86 Encoder Decoder (Intel XED) is a software library (and associated headers) for encoding
and decoding X86 (IA32 and Intel64) instructions. The decoder takes sequences of 1-15 bytes along with machine mode
information and produces a data structure describing the opcode, operands, and flags."""

toolchain = {'name': 'GCCcore', 'version': '14.2.0'}

source_urls = ['https://github.com/intelxed/xed/archive/refs/tags/']
sources = ['v%(version)s.tar.gz']
checksums = ['ef1d8662519d1d65051f933a849e9701b7f4a1d869cfdbc46eefa2d44a8c98de']

builddependencies = [
    ('binutils', '2.42'),
    ('Python', '3.13.1'),
    ('intel-mbuild', '2024.11.04'),
]

install_cmd = 'xed-%(version)s/mfile.py --prefix=%(installdir)s'

sanity_check_paths = {
    'files': ['lib/libxed.a'],
    'dirs': ['include/xed'],
}

moduleclass = 'tools'
