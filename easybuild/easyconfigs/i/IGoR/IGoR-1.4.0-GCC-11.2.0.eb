# Contribution from Imperial College Loncon / UK
# uploaded by J. Sassmannshausen

easyblock = 'ConfigureMake'

name = 'IGoR'
version = '1.4.0'

homepage = 'https://qmarcou.github.io/IGoR/'
description = """
IGoR is a C++ software designed to infer V(D)J recombination related processes from sequencing data such as:
    Recombination model probability distribution
    Hypermutation model
    Best candidates recombination scenarios
    Generation probabilities of sequences (even hypermutated)."""

toolchain = {'name': 'GCC', 'version': '11.2.0'}
toolchainopts = {'extra_cxxflags': '-pipe -g3'}

source_urls = ['https://github.com/qmarcou/IGoR/archive']
sources = ['%(version)s.tar.gz']
patches = ['igor-1.4.0.patch']
checksums = [
    '803315b0b55f78ec04852fb81b8167b2e57bc18f0df50bd2f5f507880b9707ff',   # v1.4.0.tar.gz
    '57246dc63eb1d9b6407ba0880225802cda146f2446530ba60f73ddf978f6268a',   # igor-1.4.0.patch
]

builddependencies = [
    ('Autotools', '20210726'),
    ('M4', '1.4.19'),
    ('binutils', '2.37'),
]

dependencies = [
    ('GSL', '2.7'),
    ('jemalloc', '5.2.1'),
    ('GSL', '2.7'),
    ('FlexiBLAS', '3.0.4'),
]

preconfigopts = "autoreconf -i &&"

sanity_check_commands = ["igor -version"]

sanity_check_paths = {
    'files': ['bin/igor', 'bin/igor-compute_pgen'],
    'dirs': ['share/igor']
}

moduleclass = 'bio'
