easyblock = 'CMakeMake'

name = 'EPA-ng'
version = '0.3.8'

homepage = 'https://github.com/pierrebarbera/epa-ng'
description = """EPA-ng - Fast, parallel, highly accurate Maximum Likelihood Phylogenetic
Placement, by the team behind RAxML(-ng)"""

toolchain = {'name': 'GCC', 'version': '12.3.0'}
toolchainopts = {'pic': True, 'openmp': True}

github_account = 'pierrebarbera'
source_urls = [GITHUB_SOURCE]
sources = [{
    'git_config': {
        'url': 'https://github.com/pierrebarbera',
        'repo_name': '%(namelower)s',
        'tag': 'v%(version)s',
        'recursive': True,
    },
    'filename': SOURCE_TAR_XZ,
}]
checksums = ['23b8f07743c0f4dbea17b67155b18bdbb98ff983782f4245f9b00e3e0a25a0ed']

builddependencies = [
    ('CMake', '3.26.3'),
    ('Bison', '3.8.2'),
    ('flex', '2.6.4'),
    ('pkgconf', '1.9.5'),
    ('Autotools', '20220317'),
]

runtest = 'test'

skipsteps = ['install']

postinstallcmds = ["cp -a %(start_dir)s/bin %(installdir)s"]

sanity_check_paths = {
    'files': ['bin/epa-ng'],
    'dirs': [],
}

sanity_check_commands = ['epa-ng --help']

moduleclass = 'bio'
