# Change path to the libdwarf headers
# Author: Maxim Masterov (SURF), Kenneth Hoste (HPC-UGent)

diff -ru extrae-4.0.6.orig/config/macros.m4 extrae-4.0.6/config/macros.m4
--- extrae-4.0.6.orig/config/macros.m4	2023-07-31 12:56:55.000000000 +0200
+++ extrae-4.0.6/config/macros.m4	2024-03-19 16:15:17.298991363 +0100
@@ -1693,8 +1693,8 @@
            if test -f "${DWARF_HOME}/include/libdwarf.h" -a \
                    -f "${DWARF_HOME}/include/dwarf.h" ; then
               libdwarf_found="yes"
-           elif test -f "${DWARF_HOME}/include/libdwarf/libdwarf.h" -a \
-                     -f "${DWARF_HOME}/include/libdwarf/dwarf.h" ; then
+           elif test -f "${DWARF_HOME}/include/libdwarf-0/libdwarf.h" -a \
+                     -f "${DWARF_HOME}/include/libdwarf-0/dwarf.h" ; then
               libdwarf_found="yes"
            else
               AC_MSG_ERROR([Cannot find DWARF header files in ${dwarf_paths}/include])
@@ -1705,8 +1705,8 @@
                    -f "${DWARF_HOME}/include/dwarf.h" ; then
               libdwarf_found="yes"
               DWARF_LIBSDIR="${DWARF_LIBSDIR_MULTIARCH}"
-           elif test -f "${DWARF_HOME}/include/libdwarf/libdwarf.h" -a \
-                     -f "${DWARF_HOME}/include/libdwarf/dwarf.h" ; then
+           elif test -f "${DWARF_HOME}/include/libdwarf-0/libdwarf.h" -a \
+                     -f "${DWARF_HOME}/include/libdwarf-0/dwarf.h" ; then
               libdwarf_found="yes"
               DWARF_LIBSDIR="${DWARF_LIBSDIR_MULTIARCH}"
            else
diff -ru extrae-4.0.6.orig/configure extrae-4.0.6/configure
--- extrae-4.0.6.orig/configure	2023-11-22 13:33:58.000000000 +0100
+++ extrae-4.0.6/configure	2024-03-19 16:15:17.303991362 +0100
@@ -32821,8 +32821,8 @@
            if test -f "${DWARF_HOME}/include/libdwarf.h" -a \
                    -f "${DWARF_HOME}/include/dwarf.h" ; then
               libdwarf_found="yes"
-           elif test -f "${DWARF_HOME}/include/libdwarf/libdwarf.h" -a \
-                     -f "${DWARF_HOME}/include/libdwarf/dwarf.h" ; then
+           elif test -f "${DWARF_HOME}/include/libdwarf-0/libdwarf.h" -a \
+                     -f "${DWARF_HOME}/include/libdwarf-0/dwarf.h" ; then
               libdwarf_found="yes"
            else
               as_fn_error $? "Cannot find DWARF header files in ${dwarf_paths}/include" "$LINENO" 5
@@ -32833,8 +32833,8 @@
                    -f "${DWARF_HOME}/include/dwarf.h" ; then
               libdwarf_found="yes"
               DWARF_LIBSDIR="${DWARF_LIBSDIR_MULTIARCH}"
-           elif test -f "${DWARF_HOME}/include/libdwarf/libdwarf.h" -a \
-                     -f "${DWARF_HOME}/include/libdwarf/dwarf.h" ; then
+           elif test -f "${DWARF_HOME}/include/libdwarf-0/libdwarf.h" -a \
+                     -f "${DWARF_HOME}/include/libdwarf-0/dwarf.h" ; then
               libdwarf_found="yes"
               DWARF_LIBSDIR="${DWARF_LIBSDIR_MULTIARCH}"
            else
Only in extrae-4.0.6: configure.orig
