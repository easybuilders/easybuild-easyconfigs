name = 'Extrae'
version = '4.0.6'

homepage = 'https://www.bsc.es/computer-sciences/performance-tools'
description = """Extrae is the core instrumentation package developed by
the Performance Tools group at BSC. Extrae is capable of instrumenting
applications based on MPI, OpenMP, pthreads, CUDA1, OpenCL1, and StarSs1
using different instrumentation approaches. The information gathered by
Extrae typically includes timestamped events of runtime calls,
performance counters and source code references. Besides, Extrae
provides its own API to allow the user to manually instrument his or her
application."""

toolchain = {'name': 'gompi', 'version': '2023a'}
toolchainopts = {'usempi': True}

source_urls = ['https://ftp.tools.bsc.es/%(namelower)s']
sources = ['%(namelower)s-%(version)s-src.tar.bz2']
patches = [
    'Extrae-4.0.6-change_libdwarf_path.patch',
    'Extrae-4.0.6_find-binutils-libs.patch',
]
checksums = [
    {'extrae-4.0.6-src.tar.bz2': '233be38035dd76f6877b1fd93d308e024e5d4ef5519d289f8e319cd6c58d0bc6'},
    {'Extrae-4.0.6-change_libdwarf_path.patch': '55f43b1a69d35ba567941d9f0f8ee92c6f490efb373f29c1472d3c4e1e544116'},
    {'Extrae-4.0.6_find-binutils-libs.patch': '0c3e7ba7326ffe247d5f45ba584a9dedb07a2b111c24417208e6cb23e94d548a'},
]

builddependencies = [
    ('Autotools', '20220317'),
]

dependencies = [
    ('zlib', '1.2.13'),
    ('Boost', '1.82.0'),
    ('libunwind', '1.6.2'),
    ('libxml2', '2.11.4'),
    ('libdwarf', '0.7.0'),
    ('PAPI', '7.0.1'),
]

runtest = 'check'

moduleclass = 'perf'
