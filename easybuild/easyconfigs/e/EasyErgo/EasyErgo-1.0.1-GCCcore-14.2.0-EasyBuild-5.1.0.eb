easyblock = 'PythonBundle'

name = 'EasyErgo'
version = '1.0.1'
local_eb_version = '5.1.0'
versionsuffix = f'-EasyBuild-{local_eb_version}'

homepage = 'https://github.com/c3se/easyergo'
description = """EasyErgo is a LSP server for writing easyconfig (.eb) files."""

toolchain = {'name': 'GCCcore', 'version': '14.2.0'}

builddependencies = [
    ('poetry', '2.1.2'),
    ('binutils', '2.42'),
]

dependencies = [
    ('Python', '3.13.1'),
    ('EasyBuild', local_eb_version, '', SYSTEM),
]

exts_list = [
    ('attrs', '25.3.0', {
        'checksums': ['75d7cefc7fb576747b2c81b4442d4d4a1ce0900973527c011d1030fd3bf4af1b'],
    }),
    ('cattrs', '24.1.3', {
        'checksums': ['981a6ef05875b5bb0c7fb68885546186d306f10f0f6718fe9b96c226e68821ff'],
    }),
    ('lsprotocol', '2023.0.1', {
        'checksums': ['cc5c15130d2403c18b734304339e51242d3018a05c4f7d0f198ad6e0cd21861d'],
    }),
    ('pygls', '1.3.1', {
        'checksums': ['140edceefa0da0e9b3c533547c892a42a7d2fd9217ae848c330c53d266a55018'],
    }),
    ('tree-sitter', '0.24.0', {
        'checksums': ['abd95af65ca2f4f7eca356343391ed669e764f37748b5352946f00f7fc78e734'],
    }),
    ('tree_sitter_python', '0.23.6', {
        'source_urls': ['https://github.com/tree-sitter/tree-sitter-python/releases/download/v%(version)s/'],
        'sources': [{'download_filename': 'tree-sitter-python.tar.xz', 'filename': '%(namelower)s-%(version)s.tar.xz'}],
        'checksums': ['bc7c1c922b14cb0edd75c0400a63ff260e09bd02684351ed5d38586b5771cd69'],
    }),
    ('easyergo', version, {
        'source_urls': ['https://github.com/c3se/easyergo/archive/refs/tags/'],
        'sources': ['v1.0.0.tar.gz'],
        'checksums': ['eec2c81c5036145ce67e4e71e251f5fcc9398b7fb2b46b381c31fa7b084f63c6'],
    }),
]

sanity_check_paths = {
    'files': ['bin/easyergo'],
    'dirs': [],
}

moduleclass = 'tools'
