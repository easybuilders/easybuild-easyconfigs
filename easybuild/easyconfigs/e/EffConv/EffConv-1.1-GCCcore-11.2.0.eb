easyblock = 'ConfigureMake'

name = 'EffConv'
version = '1.1'

homepage = 'https://irsa.ipac.caltech.edu/data/Planck/release_1/software/index.html'
description = """Software that convolves all-sky HEALPix maps with the spatially varying Planck effective beam."""

toolchain = {'name': 'GCCcore', 'version': '11.2.0'}

source_urls = ['https://irsa.ipac.caltech.edu/data/Planck/release_1/software']
sources = ['effconv-1.1.tar.gz']
patches = ['effconv_add_missing_fnc.patch']
checksums = [
    'db7c00c67999885f59277cac5ff0285a59d38225c6e0ac3ecb4fa14456cf4e72',  # effconv-1.1.tar.gz
    'c68325ae9ee59454586cfb06fe038befdee45d5c171c0b345893e4b3633406f3',  # effconv_add_missing_fnc.patch
]

builddependencies = [('binutils', '2.37', '', SYSTEM)]

dependencies = [('HEALPix', '3.82')]

configopts = '--with-healpix=${EBROOTHEALPIX} --with-cfitsio=${EBROOTCFITSIO}'

sanity_check_paths = {
    'files': ["bin/effConv"],
    'dirs': [],
}

moduleclass = 'astro'
