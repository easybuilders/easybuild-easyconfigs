easyblock = 'ConfigureMake'

name = 'ea-utils'
version = '1.1.2-686'

homepage = 'https://code.google.com/p/ea-utils'
description = """Command-line tools for processing biological sequencing data. Barcode demultiplexing,
 adapter trimming, etc."""

toolchain = {'name': 'ictce', 'version': '5.5.0'}

# download from https://drive.google.com/folderview?id=0B7KhouP0YeRAOTFWWGVFYkFSQjg&usp=sharing
sources = ['%(name)s.%(version)s.tar.gz']

dependencies = [
    ('zlib', '1.2.7'),
    ('ncurses', '5.9'),
    ('GSL', '1.16'),
]

patches = ['ea-utils-%(version)s_Makefile-fix.patch']

skipsteps = ['configure', 'build']

# $CXX, $CXXFLAGS, $CPPFLAGS, $PREFIX used in top dir ($CXX/$CXXFLAGS thanks to patch)
installopts = 'CXX="$CXX" CXXFLAGS="$CXXFLAGS -I." CPPFLAGS="$CXXFLAGS -I." PREFIX=%(installdir)s '
# $CC, $CFLAGS used by samtools part
installopts += 'CC="$CC" CFLAGS="$CFLAGS"'

sanity_check_paths = {
    'files': ['bin/%s' % x for x in ['alc', 'determine-phred', 'fastq-clipper', 'fastq-join', 'fastq-mcf',
                                     'fastq-multx', 'fastq-stats', 'fastx-graph', 'randomFQ', 'sam-stats', 'varcall']],
    'dirs': [],
}

moduleclass = 'bio'
