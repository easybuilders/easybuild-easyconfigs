##
# This file is an EasyBuild reciPY as per https://github.com/hpcugent/easybuild
#
# Copyright:: Copyright 2012-2013 University of Luxembourg/Luxembourg Centre for Systems Biomedicine
# Authors::   Cedric Laczny <cedric.laczny@uni.lu>, Fotis Georgatos <fotis.georgatos@uni.lu>
# License::   MIT/GPL
# $Id$
#
# This work implements a part of the HPCBIOS project and is a component of the policy:
# http://hpcbios.readthedocs.org/en/latest/HPCBIOS_2012-94.html
##

name = 'ELPA'
version = '2013.11'

homepage = 'http://elpa.rzg.mpg.de'
description = """Eigenvalue SoLvers for Petaflop-Applications ."""
toolchain = {'name': 'ictce', 'version': '5.5.0'} # tweaked by EasyBuild (was: {'name': 'impmkl', 'version': '1.0.1'} # tweaked by EasyBuild (was: {'name': 'ictce', 'version': '5.3.0'}))
toolchainopts = {'optarch': True, 'usempi': True}


sources = ['%sJUROPA3.tar.gz' % version]

patches = ['ELPA_fix-tests.patch']

configopts = '--with-generic-simple --disable-shared FCFLAGS="-I$EBROOTIMKL/mkl/include/intel64/lp64 $FCFLAGS" LIBS="$LIBSCALAPACK"'
makeopts = ' V=1 LIBS="$LIBSCALAPACK"' #FCFLAGS="-I$EBROOTIMKL/mkl/include/intel64/lp64 $FCFLAGS" LIBS="$LIBBLAS"'
start_dir = '%s_%s' % (name, version)

builddependencies = [('Automake', '1.13.4')]

parallel = 1

moduleclass = 'math'
