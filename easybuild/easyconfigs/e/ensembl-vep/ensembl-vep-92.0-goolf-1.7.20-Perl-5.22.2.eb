# This file is an EasyBuild reciPY as per https://easybuilders.github.io/easybuild/
# Author: Pablo Escobar Lopez
# sciCORE - University of Basel
# SIB Swiss Institute of Bioinformatics 

easyblock = 'PackedBinary'

name = 'ensembl-vep'
version = '92.0'
versionsuffix = "-Perl-%(perlver)s"

homepage = 'http://www.ensembl.org/info/docs/tools/vep/index.html'
description = """VEP determines the effect of your variants (SNPs, insertions, deletions, CNVs 
 or structural variants) on genes, transcripts, and protein sequence, as well as regulatory regions"""

toolchain = {'name': 'goolf', 'version': '1.7.20'}

source_urls = ['https://github.com/Ensembl/ensembl-vep/archive/release/']
sources = ['%(version)s.tar.gz']
checksums = ['7ea19d0ae8633d2448053e1f398265b813ff1d4ff62a017fbb4063a30cb02624']

unpack_options = '--strip-components=1'

dependencies = [
    ('Perl', '5.22.2'),
]

preinstallopts = 'export PERL5LIB=%(installdir)s && '
preinstallopts += 'export PATH=%(installdir)s/htslib:$PATH && '

install_cmd = 'cp -r %(builddir)s/* %(installdir)s && '
install_cmd += 'cd %(installdir)s && '
install_cmd += 'perl INSTALL.pl --NO_UPDATE --AUTO a'

modextrapaths = {
    'PATH': ['', 'htslib'],
    'LD_LIBRARY_PATH': '',
    'PERL5LIB': ['', 'modules'],
}

sanity_check_paths = {
    'files': ['vep', 'HTS.so'],
    'dirs': []
}

moduleclass = 'bio'
