easyblock = "CMakeMake"

name = "enet"
version = "1.3.14-20250312"
versionsuffix = '-gtkorvo'

homepage = 'https://github.com/GTkorvo/enet'
description = """ENet reliable UDP networking library.
This is a downstream branch of lsalzman's ENET software.
This version has expanded the client ID to handle more clients. """

toolchain = {'name': 'GCCcore', 'version': '13.2.0'}

_commit = "e19b84b1d98bd2806efea91787fe732e854d55f4"
sources = [{
    'filename': f'{name}-{_commit[:8]}.tar.xz',
    'git_config': {
        'url': 'https://github.com/GTkorvo',
        'repo_name': name,
        'commit': _commit,
    }
}]
checksums = ['26597e6c1bcbae8cee6cb4723bbb9f70ccea118ad52f30fc036748503919d6ba']

builddependencies = [
    ('binutils', '2.40'),
    ('CMake', '3.27.6'),
]

configopts = [
    ' -DBUILD_SHARED_LIBS=OFF',
    ' -DBUILD_SHARED_LIBS=ON',
]

sanity_check_paths = {
    'files': [
        'bin/%(name)s-config',
        'include/%(name)s/%(name)s.h',
        'lib/lib%(name)s.a', f'lib/lib%(name)s.{SHLIB_EXT}',
        'lib/pkgconfig/%(name)s.pc',
    ],
    'dirs': ['lib/cmake/%(name)s']
}

moduleclass = 'lib'
