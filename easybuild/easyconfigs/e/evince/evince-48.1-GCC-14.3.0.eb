# Author: Jasper Grimm (UoY)
easyblock = 'MesonNinja'

name = 'evince'
version = '48.1'

homepage = 'https://wiki.gnome.org/Apps/Evince'
description = """Evince is a document viewer for multiple document formats. The
 goal of evince is to replace the multiple document viewers that exist on the
 GNOME Desktop with a single simple application.
"""

toolchain = {'name': 'GCC', 'version': '14.3.0'}

source_urls = ['https://ftp.gnome.org/pub/GNOME/sources/%(name)s/%(version_major)s']
sources = [SOURCE_TAR_XZ]
checksums = ['7d8b9a6fa3a05d3f5b9048859027688c73a788ff6e923bc3945126884943fa10']

builddependencies = [
    ('Meson', '1.8.2'),
    ('Ninja', '1.13.0'),
    ('pkgconf', '2.4.3'),
    ('GI-DocGen', '2025.5'),
    ('CMake', '3.31.8'),
]

dependencies = [
    ('Python', '3.13.5'),
    ('Python-bundle-PyPI', '2025.07'),
    ('GLib', '2.85.3'),
    ('GTK3', '3.24.43'),
    ('libhandy', '1.8.3'),
    ('ITSTool', '2.0.7'),
    ('Gdk-Pixbuf', '2.42.12'),
    ('cairo', '1.18.4'),
    ('zlib', '1.3.1'),
    ('GObject-Introspection', '1.84.0'),
    ('GStreamer', '1.26.5'),
    ('gspell', '1.14.2'),
    ('libspectre', '0.2.12'),
    ('libarchive', '3.8.1'),
    ('poppler', '25.12.0'),
    ('Ghostscript', '10.05.1'),
    ('LibTIFF', '4.7.0'),
    ('libgxps', '0.3.2'),
    ('DBus', '1.16.2'),
    ('DjVuLibre', '3.5.29'),
    ('desktop-file-utils', '0.28'),
    # optional: kpathsea (path searching library for TeX-related files)
]

_bins = ['bin/%%(name)s%s' % x for x in ['', '-previewer', '-thumbnailer']]
_incs = ['include/evince', 'lib/evince', 'lib/pkgconfig']
_libs = ['lib/%s.%s' % (x, SHLIB_EXT) for x in ['libevdocument3', 'libevview3']] + ['libexec/evinced']

sanity_check_paths = {
    'files': _bins + _libs,
    'dirs': _incs,
}

sanity_check_commands = ['%(name)s --help']

moduleclass = 'vis'
