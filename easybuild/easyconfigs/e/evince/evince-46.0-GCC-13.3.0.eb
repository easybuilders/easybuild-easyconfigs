# Author: Jasper Grimm (UoY)
easyblock = 'MesonNinja'

name = 'evince'
version = '46.0'

homepage = 'https://wiki.gnome.org/Apps/Evince'
description = """Evince is a document viewer for multiple document formats. The
 goal of evince is to replace the multiple document viewers that exist on the
 GNOME Desktop with a single simple application.
"""

toolchain = {'name': 'GCC', 'version': '13.3.0'}

source_urls = ['https://ftp.gnome.org/pub/GNOME/sources/%(name)s/46']
sources = [SOURCE_TAR_XZ]
checksums = ['aff6af69392c04956bfad976dec5d1583b41d5a334e937995f7c3ca0740de221']

builddependencies = [
    ('Meson', '1.4.0'),
    ('Ninja', '1.12.1'),
    ('pkgconf', '2.2.0'),
    ('GI-DocGen', '2025.5'),
    ('CMake', '3.29.3'),
]

dependencies = [
    ('Python', '3.12.3'),
    ('Python-bundle-PyPI', '2024.06'),
    ('GLib', '2.80.4'),
    ('GTK3', '3.24.42'),
    ('libhandy', '1.8.2'),
    ('ITSTool', '2.0.7'),
    ('Gdk-Pixbuf', '2.42.11'),
    ('cairo', '1.18.0'),
    ('zlib', '1.3.1'),
    ('GObject-Introspection', '1.80.1'),
    ('GStreamer', '1.24.8'),
    ('gspell', '1.14.2'),
    ('libspectre', '0.2.12'),
    ('libarchive', '3.7.4'),
    ('poppler', '25.07.0'),
    ('Ghostscript', '10.03.1'),
    ('LibTIFF', '4.6.0'),
    ('libgxps', '0.3.2'),
    ('DBus', '1.15.8'),
    ('DjVuLibre', '3.5.29'),
    ('desktop-file-utils', '0.28'),
    # optional: kpathsea (path searching library for TeX-related files)
]

_bins = ['bin/%%(name)s%s' % x for x in ['', '-previewer', '-thumbnailer']]
_incs = ['include/evince', 'lib/evince', 'lib/pkgconfig']
_libs = ['lib/%s.%s' % (x, SHLIB_EXT) for x in ['libevdocument3', 'libevview3']] + ['libexec/evinced']

sanity_check_paths = {
    'files': _bins + _libs,
    'dirs': _incs,
}

sanity_check_commands = ['%(name)s --help']

moduleclass = 'vis'
