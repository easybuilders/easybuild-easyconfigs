##
# This file is an EasyBuild reciPY as per https://github.com/hpcugent/easybuild
# Author: Jordi Blasco <jordi.blasco@nesi.org.nz>
# New Zealand eScience Infrastructure (NeSI)
easyblock = 'ConfigureMake'

name = 'ETSF_IO'
version = '1.0.4'

homepage = 'http://www.etsf.eu/resources/software/libraries_and_tools'
description = """A library of F90 routines to read/write the ETSF file 
format has been written. It is called ETSF_IO and available under LGPL. """

toolchain = {'name': 'intel', 'version': '2015a'}

source_urls = ['http://www.etsf.eu/system/files']
sources = [SOURCELOWER_TAR_GZ]

configopts = "FC=$MPIF90 CC=$MPICC --with-netcdf-libs='-L$EBROOTNETCDF/lib -L$EBROOTNETCDFMINFORTRAN/lib -lnetcdf -lnetcdff' "
configopts += "--with-netcdf-incs='-I$EBROOTNETCDF/include -I$EBROOTNETCDFMINFORTRAN/include' "

dependencies = [ 
    ('netCDF', '4.3.2'),
    ('netCDF-Fortran', '4.4.0'),
]

sanity_check_paths = {
    'files': ["bin/etsf_io"], 
    'dirs': []
}

moduleclass = 'lib'
