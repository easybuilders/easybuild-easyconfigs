##
# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
# Author::   Denis Kristak (INUITS)
# Update:    Thomas Hoffmann (EMBL), Rafael Moretti (UiB)
##

easyblock = 'CMakeMake'

name = 'jxrlib'
version = '2019.10.9'

homepage = 'https://github.com/4creators/jxrlib'
description = """Open source implementation of jpegxr"""

toolchain = {'name': 'GCCcore', 'version': '13.3.0'}

source_urls = ['https://github.com/4creators/jxrlib/archive/refs/tags/v%(version)s']
sources = [SOURCE_TAR_GZ]
patches = [('jxrlib-1.1_cmake.patch', 1)]
checksums = [
    {'jxrlib-2019.10.9.tar.gz': '555c006e27c5cb66f99c05dcbb2feb197199ca9018dbd06d3467d37cd29a79cd'},
    {'jxrlib-1.1_cmake.patch': 'e96ea8b418fdab10e9cbc2f4cad95ca1f59a826ce7379c6a3192882050689a74'},
]

builddependencies = [
    ('binutils', '2.42'),
    ('CMake', '3.29.3'),
]

sanity_check_paths = {
    'files': ['bin/JxrDecApp', 'bin/JxrEncApp', "lib/libjpegxr.%s" % SHLIB_EXT],
    'dirs': [],
}

sanity_check_commands = ['JxrDecApp', 'JxrEncApp']

modextrapaths = {MODULE_LOAD_ENV_HEADERS: 'include/jxrlib'}

moduleclass = 'lib'
