##
# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
# Author::   Denis Kristak (INUITS)
# Update:    Thomas Hoffmann (EMBL), Rafael Moretti (UiB), Bob Dr√∂ge (UG)
##

easyblock = 'CMakeMake'

name = 'jxrlib'
version = '2019.10.9'

homepage = 'https://github.com/4creators/jxrlib'
description = """Open source implementation of jpegxr"""

toolchain = {'name': 'GCCcore', 'version': '14.3.0'}
toolchainopts = {'cstd': 'c++11'}

source_urls = ['https://github.com/4creators/jxrlib/archive/refs/tags/v%(version)s']
sources = [SOURCE_TAR_GZ]
patches = [
    ('jxrlib-2019.10.9_cmake.patch', 1),
    'jxrlib-2019.10.9_fix-pointer-type-mismatches.patch',
]
checksums = [
    {'jxrlib-2019.10.9.tar.gz': '555c006e27c5cb66f99c05dcbb2feb197199ca9018dbd06d3467d37cd29a79cd'},
    {'jxrlib-2019.10.9_cmake.patch': '2a051f5451f014e921e1fcc24ed6715ca9f33a3ec5c5ecb9ce859836ffdc77e3'},
    {'jxrlib-2019.10.9_fix-pointer-type-mismatches.patch':
     '29c7635fd44553ae39eeffeb43e3be5f20384af8f3e978dbadc09dc80b9689ff'},
]

builddependencies = [
    ('binutils', '2.44'),
    ('CMake', '4.0.3'),
]

sanity_check_paths = {
    'files': ['bin/JxrDecApp', 'bin/JxrEncApp', "lib/libjpegxr.%s" % SHLIB_EXT],
    'dirs': [],
}

sanity_check_commands = ['JxrDecApp', 'JxrEncApp']

modextrapaths = {MODULE_LOAD_ENV_HEADERS: 'include/jxrlib'}

moduleclass = 'lib'
