easyblock = 'ConfigureMake'

name = 'JPEG-NCCS'
version = '9b'

homepage = 'https://portal.nccs.nasa.gov/datashare/astg/nuwrf/baselibs/'
description = """Independent JPEG Group's JPEG software from NCCS repository."""

toolchain = {'name': 'GCCcore', 'version': '14.3.0'}

source_urls = ['https://portal.nccs.nasa.gov/datashare/astg/nuwrf/baselibs/']
sources = [
    {'download_filename': 'jpegsrc.v%(version)s.tar.gz',
     'filename': SOURCE_TAR_GZ}
]
checksums = ['240fd398da741669bf3c90366f58452ea59041cacc741a489b99f2f6a0bad052']

builddependencies = [('binutils', '2.44')]

runtest = 'test'

sanity_check_paths = {
    'files': ['bin/jpegtran', 'lib/libjpeg.a', f'lib/libjpeg.{SHLIB_EXT}'],
    'dirs': ['bin', 'include', 'lib'],
}

sanity_check_commands = ["jpegtran --help 2>&1 | grep ^usage"]

moduleclass = 'lib'
