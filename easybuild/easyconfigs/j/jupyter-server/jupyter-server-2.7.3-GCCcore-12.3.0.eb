easyblock = 'PythonBundle'

name = 'jupyter-server'
version = "2.7.3"

homepage = 'https://jupyter.org/'
description = """
  The Jupyter Server provides the backend (i.e. the core services, APIs, and REST
  endpoints) for Jupyter web applications like Jupyter notebook, JupyterLab, and
  Voila.
"""

toolchain = {'name': 'GCCcore', 'version': '12.3.0'}

builddependencies = [
    ('binutils', '2.40'),
    ('maturin', '1.1.0'),
    ('hatch-jupyter-builder', '0.8.3'),
    ('hatch-nodejs-version', '0.3.2'),
]
dependencies = [
    ('Python', '3.11.3'),
    ('IPython', '8.16.1'),
    ('PyYAML', '6.0'),
    ('PyZMQ', '25.1.1'),
    ('tornado', '6.3.2'),
    ('jsonschema', '4.19.1'),
    ('anyio', '4.0.0'),
    ('prometheus-client', '0.17.1'),
]

sanity_pip_check = True
use_pip = True

# WARNING: the versions of ipywidgets, widgetsnbextension and jupyterlab_widgets are tied between them
# use the versions published in a single release commit instead of blindly pushing to last available version,
# see for instance https://github.com/jupyter-widgets/ipywidgets/commit/b728926f58ed3ffef08f716998ac6c226dafc1aa

exts_list = [
    ('websocket-client', '1.6.4', {
        'modulename': 'websocket',
        'checksums': ['b3324019b3c28572086c4a319f91d1dcd44e6e11cd340232978c684a7650d0df'],
    }),
    ('terminado', '0.17.1', {
        'checksums': ['6ccbbcd3a4f8a25a5ec04991f39a0b8db52dfcd487ea0e578d977e6752380333'],
    }),
    ('Send2Trash', '1.8.2', {
        'checksums': ['c132d59fa44b9ca2b1699af5c86f57ce9f4c5eb56629d5d55fbb7a35f84e2312'],
    }),
    ('overrides', '7.4.0', {
        'checksums': ['9502a3cca51f4fac40b5feca985b6703a5c1f6ad815588a7ca9e285b9dca6757'],
    }),
    ('jupyter_core', '5.3.2', {
        'checksums': ['0c28db6cbe2c37b5b398e1a1a5b22f84fd64cd10afc1f6c05b02fb09481ba45f'],
    }),
    ('fastjsonschema', '2.18.1', {
        'checksums': ['06dc8680d937628e993fa0cd278f196d20449a1adc087640710846b324d422ea'],
    }),
    ('tinycss2', '1.2.1', {
        'checksums': ['8cff3a8f066c2ec677c06dbc7b45619804a6938478d9d73c284b29d14ecb0627'],
    }),
    ('pandocfilters', '1.5.0', {
        'checksums': ['0b679503337d233b4339a817bfc8c50064e2eff681314376a47cb582305a7a38'],
    }),
    ('mistune', '3.0.2', {
        'checksums': ['fc7f93ded930c92394ef2cb6f04a8aabab4117a91449e72dcc8dfa646a508be8'],
    }),
    ('deprecation', '2.1.0', {
        'checksums': ['72b3bde64e5d778694b0cf68178aed03d15e15477116add3fb773e581f9518ff'],
    }),
    ('jupyter_packaging', '0.12.3', {
        'checksums': ['9d9b2b63b97ffd67a8bc5391c32a421bc415b264a32c99e4d8d8dd31daae9cf4'],
    }),
    ('jupyterlab_pygments', '0.2.2', {
        'checksums': ['7405d7fde60819d905a9fa8ce89e4cd830e318cdad22a0030f7a901da705585d'],
    }),
    ('defusedxml', '0.7.1', {
        'checksums': ['1bb3032db185915b62d7c6209c5a8792be6a32ab2fedacc84e01b52c51aa3e69'],
    }),
    ('bleach', '6.1.0', {
        'checksums': ['0a31f1837963c41d46bbf1331b8778e1308ea0791db03cc4e7357b97cf42a8fe'],
    }),
    ('nbformat', '5.9.2', {
        'checksums': ['5f98b5ba1997dff175e77e0c17d5c10a96eaed2cbd1de3533d1fc35d5e111192'],
    }),
    ('nbclient', '0.8.0', {
        'checksums': ['f9b179cd4b2d7bca965f900a2ebf0db4a12ebff2f36a711cb66861e4ae158e55'],
    }),
    ('jupyter_client', '8.3.1', {
        'checksums': ['60294b2d5b869356c893f57b1a877ea6510d60d45cf4b38057f1672d85699ac9'],
    }),
    ('nbconvert', '7.9.2', {
        'checksums': ['e56cc7588acc4f93e2bb5a34ec69028e4941797b2bfaf6462f18a41d1cc258c9'],
    }),
    ('jupyter_server_terminals', '0.4.4', {
        'checksums': ['57ab779797c25a7ba68e97bcfb5d7740f2b5e8a83b5e8102b10438041a7eac5d'],
    }),
    ('rfc3986_validator', '0.1.1', {
        'checksums': ['3d44bde7921b3b9ec3ae4e3adca370438eccebc676456449b145d533b240d055'],
    }),
    ('rfc3339_validator', '0.1.4', {
        'checksums': ['138a2abdf93304ad60530167e51d2dfb9549521a836871b88d7f4695d0022f6b'],
    }),
    ('python-json-logger', '2.0.7', {
        'modulename': 'pythonjsonlogger',
        'checksums': ['23e7ec02d34237c5aa1e29a070193a4ea87583bb4e7f8fd06d3de8264c4b2e1c'],
    }),
    ('jupyter_events', '0.7.0', {
        'checksums': ['7be27f54b8388c03eefea123a4f79247c5b9381c49fb1cd48615ee191eb12615'],
    }),
    ('argon2-cffi-bindings', '21.2.0', {
        'modulename': '_argon2_cffi_bindings',
        'checksums': ['bb89ceffa6c791807d1305ceb77dbfacc5aa499891d2c55661c6459651fc39e3'],
    }),
    ('argon2_cffi', '23.1.0', {
        'modulename': 'argon2',
        'checksums': ['879c3e79a2729ce768ebb7d36d4609e3a78a4ca2ec3a9f12286ca057e3d0db08'],
    }),
    ('jupyter_server', version, {
        'checksums': ['d4916c8581c4ebbc534cebdaa8eca2478d9f3bfdd88eae29fcab0120eac57649'],
    }),
    ('jupyterlab_widgets', '3.0.9', {
        'checksums': ['6005a4e974c7beee84060fdfba341a3218495046de8ae3ec64888e5fe19fdb4c'],
    }),
    ('widgetsnbextension', '4.0.9', {
        'checksums': ['3c1f5e46dc1166dfd40a42d685e6a51396fd34ff878742a3e47c6f0cc4a2a385'],
    }),
    ('comm', '0.1.4', {
        'checksums': ['354e40a59c9dd6db50c5cc6b4acc887d82e9603787f83b68c01a80a923984d15'],
    }),
    ('ipywidgets', '8.1.1', {
        'checksums': ['40211efb556adec6fa450ccc2a77d59ca44a060f4f9f136833df59c9f538e6e8'],
    }),
    ('notebook_shim', '0.2.3', {
        'checksums': ['f69388ac283ae008cd506dda10d0288b09a017d822d5e8c7129a152cbd3ce7e9'],
    }),
    ('nest_asyncio', '1.5.8', {
        'checksums': ['25aa2ca0d2a5b5531956b9e273b45cf664cae2b145101d73b86b199978d48fdb'],
    }),
    ('ipykernel', '6.25.2', {
        'checksums': ['f468ddd1f17acb48c8ce67fcfa49ba6d46d4f9ac0438c1f441be7c3d1372230b'],
    }),
    ('ipython_genutils', '0.2.0', {
        'checksums': ['eb2e116e75ecef9d4d228fdc66af54269afa26ab4463042e33785b887c628ba8'],
    }),
    ('debugpy', '1.8.0', {
        'source_tmpl': '%(name)s-%(version)s-py2.py3-none-any.whl',
        'checksums': ['9c9b0ac1ce2a42888199df1a1906e45e6f3c9555497643a85e0bf2406e3ffbc4'],
    }),
]

sanity_check_paths = {
    'files': ['bin/jupyter'],
    'dirs': ['share/jupyter', 'etc/jupyter'],
}

sanity_check_commands = ['jupyter --help']

modextrapaths = {
    'JUPYTER_CONFIG_PATH': 'etc/jupyter',
    'JUPYTER_PATH': 'share/jupyter',
}

moduleclass = 'tools'
