easyblock = 'CMakeMake'

name = 'rocm_bandwidth_test'
version = '1.4.0'
_rocm_version = '6.4.1'

homepage = 'https://github.com/ROCm/rocm_bandwidth_test'
description = """ROCm Bandwidth Test is designed to capture the performance characteristics
of buffer copying and kernel read and write operations. The benchmark help screen shows various
options for initiating copy, read, and write operations. In addition to this, you can also query
the system topology in terms of memory pools and their agents."""
docurls = ['https://rocm.docs.amd.com/projects/rocm_bandwidth_test/en/latest/']

toolchain = {'name': 'rocm-compilers', 'version': '19.0.0-ROCm-6.4.1'}

github_account = 'ROCm'
source_urls = [GITHUB_SOURCE]
sources = [f'rocm-{_rocm_version}.tar.gz']
checksums = ['6910f52af9416802245d4fb6406274fd2bde6e9c287cc2d602adf682ecf98e4e']

builddependencies = [
    ('binutils', '2.42'),
    ('CMake', '3.31.3'),
]

sanity_check_paths = {
    'files': ['bin/rocm-bandwidth-test'],
    'dirs': ['share/doc/rocm-bandwidth-test'],
}
sanity_check_commands = [
    'rocm-bandwidth-test --help'
]

moduleclass = 'tools'
