easyblock = 'MakeCp'

name = 'fastStructure'
version = 'f94d4e53'

homepage = 'http://rajanil.github.io/fastStructure/'
description = """fastStructure is an algorithm for inferring population structure from large SNP genotype data. It is
 based on a variational Bayesian framework for posterior inference and is written in Python2.x. """

toolchain = {'name': 'intel', 'version': '2014b'}

source_urls = ["https://github.com/rajanil/fastStructure/archive/"]
sources = ['%(version)s.tar.gz']

patches = ['shebang.patch']

prebuildopts = 'cd vars && python setup.py build_ext --inplace && cd .. && python setup.py build_ext --inplace '
prebuildopts += ' && chmod +x structure.py ||'
files_to_copy = ['chooseK.py', 'distruct.py', 'fastStructure.pyx', 'fastStructure.so', 'parse_bed.pyx', 'parse_bed.so',
    'parse_str.pyx', 'parse_str.so', 'README.md', 'setup.py', 'structure.py', 'vars']

dependencies = [
    ('Python', '2.7.8'),
    ('GSL', '1.16'),
]

modextrapaths = {'PATH': '.'}
sanity_check_paths = {
    'files': ["structure.py"],
    'dirs': [],
}

moduleclass = 'bio'
