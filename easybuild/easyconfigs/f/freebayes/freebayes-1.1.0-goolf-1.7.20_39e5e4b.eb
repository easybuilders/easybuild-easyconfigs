# This file is an EasyBuild reciPY as per https://github.com/hpcugent/easybuild
# Author: Pablo Escobar Lopez
# sciCORE - University of Basel
# SIB Swiss Institute of Bioinformatics

easyblock = 'MakeCp'

name = 'freebayes'
version = '1.1.0'
versionsuffix = '_39e5e4b'

homepage = 'https://github.com/ekg/freebayes'
description = """ Bayesian haplotype-based polymorphism discovery and genotyping. """

toolchain = {'name': 'goolf', 'version': '1.7.20'}

# no direct download url. As described in documentation the download has been done with
# $> git clone --recursive git://github.com/ekg/freebayes.git
# Then compressed and placed in the sources folder with name "freebayes-1.1.0_39e5e4b.tar.gz"
sources = ['%(name)s-%(version)s%(versionsuffix)s.tar.gz']

patches = ['freebayes-%(version)s.patch']

builddependencies = [('CMake', '3.4.3')]

dependencies = [
    ('zlib', '1.2.8'),
]

parallel = 1

#files_to_copy = ["bin", "README.md", "examples", "scripts", "python"]
files_to_copy = ["*"]

sanity_check_paths = {
        'files': ["bin/freebayes", "bin/bamleftalign"],
        'dirs': [""]
}

# add scripts dir and vcflib binaries to PATH
modextrapaths = { 
    'PATH': ['scripts', 'vcflib/bin'],
    'LD_LIBRARY_PATH': 'vcflib/tabixpp/htslib',
}

moduleclass = 'bio'
