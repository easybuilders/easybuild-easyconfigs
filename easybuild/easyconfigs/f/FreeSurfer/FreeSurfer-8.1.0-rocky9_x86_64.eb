name = 'FreeSurfer'
version = '8.1.0'
versionsuffix = '-rocky9_x86_64'

homepage = 'https://surfer.nmr.mgh.harvard.edu/'
description = """FreeSurfer is a set of tools for analysis and visualization
of structural and functional brain imaging data.  FreeSurfer contains a fully
automatic structural imaging stream for processing cross sectional and
longitudinal data."""

toolchain = SYSTEM

source_urls = ['https://surfer.nmr.mgh.harvard.edu/pub/dist/freesurfer/%(version)s/']
sources = ['%(namelower)s-linux%(versionsuffix)s-%(version)s.tar.gz']
checksums = ['6158acc772fcbb5220c89e6405e8b56e4618701b13b6bbe6e8da77695f5e5546']

dependencies = [('MCR', 'R2019b.8')]

postinstallcmds = ["ln -s $EBROOTMCR/v97 %(installdir)s/MCRv97"]

license_text = """email@example.com
00000
g1bb3r1sh
"""

# Prepend system libs so FreeSurfer binaries pick up the system libstdc++.so.6 first.
# This avoids GLIBCXX_* symbol errors caused by the older libstdc++ bundled with MCR.
modextrapaths = {'LD_LIBRARY_PATH': ['/usr/lib64']}

moduleclass = 'bio'
