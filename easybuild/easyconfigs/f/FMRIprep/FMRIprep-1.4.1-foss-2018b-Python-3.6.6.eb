easyblock = 'PythonBundle'

name = 'FMRIprep'
version = '1.4.1'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://fmriprep.readthedocs.io'
description = """FMRIprep is a functional magnetic resonance imaging (fMRI) data preprocessing pipeline that is
 designed to provide an easily accessible, state-of-the-art interface that is robust to variations in scan
 acquisition protocols and that requires minimal user input, while providing easily interpretable and comprehensive
 error and output reporting."""

toolchain = {'name': 'foss', 'version': '2018b'}

dependencies = [
    ('Python', '3.6.6'),
    ('FSL', '5.0.11', versionsuffix),
    ('ANTs', '2.3.1', versionsuffix),
    ('AFNI', '18.3.00', versionsuffix),
    ('C3D', '1.0.0', '', True),
    ('FreeSurfer', '6.0.1', '-centos6_x86_64', True),
    ('ICA-AROMA', '0.4.4-beta', versionsuffix),
    ('Seaborn', '0.9.0', versionsuffix),
    ('PyYAML', '3.13', versionsuffix),
    ('scikit-learn', '0.20.0', versionsuffix),
    ('scikit-image', '0.14.1', versionsuffix),
    ('Nipype', '1.1.3', versionsuffix),
]

use_pip = True

exts_default_options = {'source_urls': [PYPI_SOURCE]}

exts_list = [
    ('versioneer', '0.18', {
        'checksums': ['ead1f78168150011189521b479d3a0dd2f55c94f5b07747b484fd693c3fbf335'],
    }),
    ('indexed_gzip', '0.8.10', {
        'checksums': ['37957f14e70125d3e1bcb5ed83e7bca3a00212f4411e4f9af22cc2a626778616'],
    }),
    ('patsy', '0.5.1', {
        'checksums': ['f115cec4201e1465cd58b9866b0b0e7b941caafec129869057405bfe5b5e3991'],
    }),
    ('statsmodels', '0.10.1', {
        'checksums': ['320659a80f916c2edf9dfbe83512d9004bb562b72eedb7d9374562038697fa10'],
    }),
    ('svgutils', '0.3.1', {
        'checksums': ['cd52474765fd460ad2389947f77589de96142f6f0ce3f61e08ccfabeac2ff8af'],
    }),
    ('nilearn', '0.5.2', {
        'checksums': ['18b763d641e6903bdf8512e0ec5cdc14133fb4679e9a15648415e9be62c81b56'],
    }),
    # sklearn is a dummy module, actual dependency is resolved by scikit-learn stand-alone module...
    ('sklearn', '0.0', {
        'checksums': ['e23001573aa194b834122d2b9562459bf5ae494a2d59ca6b8aa22c85a44c0e31'],
    }),
    ('MarkupSafe', '1.1.1', {
        'checksums': ['29872e92839765e546828bb7754a68c418d927cd064fd4708fab9fe9c8bb116b'],
    }),
    ('Jinja2', '2.10.1', {
        'checksums': ['065c4f02ebe7f7cf559e49ee5a95fb800a9e4528727aec6f24402a5374c65013'],
    }),
    ('niworkflows', '0.10.2', {
        'checksums': ['5a2ad0cbbc6c3058e316d34a18b0453fef5106206dab9d80b39c149fb32956b7'],
    }),
    ('nitime', '0.8.1', {
        'checksums': ['269eae522f613c9ca8c3d62b66074a76b40d9484f468b4b8525f7c9342e96341'],
    }),
    ('num2words', '0.5.10', {
        'checksums': ['37cd4f60678f7e1045cdc3adf6acf93c8b41bf732da860f97d301f04e611cc57'],
    }),
    ('grabbit', '0.2.6', {
        'checksums': ['134fdad2d079693f8836f1074241d01ba5ed38f768c26279a3fe39afb6757f5b'],
    }),
    ('pybids', '0.9.3', {
        'modulename': 'bids',
        'checksums': ['89bfa15c145732bf120874e7af1559fd12dfb2f39ac5bb823a3e3d477b76775e'],
    }),
    ('lockfile', '0.12.2', {
        'checksums': ['6aed02de03cba24efabcd600b30540140634fc06cfa603822d508d5361e9f799'],
    }),
    ('duecredit', '0.7.0', {
        'checksums': ['8a13be317afcf56bdccba6a5d3d82c2f4e3509ffa1aff47d61c1a91e6d454010'],
    }),
    (name, version, {
        'source_tmpl': 'fmriprep-%(version)s.tar.gz',
        'checksums': ['ed25582ce739afbd1887954303c5fe3e648eb1e7d18de017ceff0ff3f6e24d4d'],
    }),
]

sanity_check_paths = {
    'files': ['bin/fmriprep'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

moduleclass = 'bio'
