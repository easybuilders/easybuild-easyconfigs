# This easyconfig was created by the BEAR Software team at the University of Birmingham.
easyblock = 'MakeCp'

name = 'FlashPCA'
# 2.0 is from 2016 - to build against the more recent deps requires a more recent commit
version = '20200910'
_githash = 'b8044f1'

homepage = "https://github.com/gabraham/flashpca"
description = """Fast Principal Component Analysis of Large-Scale Genome-Wide Data"""

toolchain = {'name': 'foss', 'version': '2020b'}

source_urls = ['https://github.com/gabraham/flashpca/archive']
sources = ['%s.tar.gz' % _githash]
checksums = ['d92e6d4a2a813d5a2cb1ae2313dd31b98f34882343ee42ec1fd04e9cc8c8a2b1']

dependencies = [
    ('Boost', '1.74.0'),
    ('Eigen', '3.3.8'),
    ('SpectrA', '0.9.0'),
    ('PLINK', '2.00-alpha2-x86_64', '', True),
]

buildopts = 'all EIGEN_INC=$EBROOTEIGEN BOOST_INC=$EBROOTBOOST/include BOOST_LIB=$EBROOTBOOST/lib '
buildopts += 'SPECTRA_INC=$EBROOTSPECTRA/include/Spectra'

files_to_copy = [(['%(namelower)s'], 'bin')]

sanity_check_paths = {
    'files': ['bin/%(namelower)s'],
    'dirs': [],
}

sanity_check_commands = ['%(namelower)s --help']

moduleclass = 'bio'
