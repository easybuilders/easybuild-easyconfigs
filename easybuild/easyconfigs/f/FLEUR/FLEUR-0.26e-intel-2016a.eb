easyblock = 'MakeCp'

name = 'FLEUR'
version = '0.26e'

homepage = 'http://www.flapw.de/'
description = """FLEUR is a feature-full, freely available FLAPW (full potential linearized augmented planewave) code,
 based on density-functional theory."""

toolchain = {'name': 'intel', 'version': '2016a'}

# dowload requires registration, see http://www.flapw.de/pm/index.php?n=FLEUR.Downloads
sources = ['v%s.tgz' % version.split('.')[1]]

builddependencies = [('imake', '1.0.7')]

dependencies = [
    ('zlib', '1.2.8'),
    ('Szip', '2.1'),
    ('HDF5', '1.8.16'),
    ('Wannier90', '2.0.1'),
]

prebuildopts = "imake && "
buildopts = "fleur.x inpgen.x"

# parallel build tends to fail
parallel = 1

files_to_copy = [(['fleur.x', 'inpgen.x'], 'bin')]

sanity_check_paths = {
    'files': ['bin/fleur.x', 'bin/inpgen.x'],
    'dirs': [],
}

moduleclass = 'chem'
