easyblock = 'PythonPackage'

name = 'FFCx'
version = '0.9.0'

homepage = 'https://github.com/FEniCS/ffcx'

description = """
FFCx is a new version of the FEniCS Form Compiler. It is being actively developed and is compatible with DOLFINx
"""

toolchain = {'name': 'foss', 'version': '2023b'}

source_urls = ['https://github.com/FEniCS/ffcx/archive/refs/tags/']
sources = ['v%(version)s.tar.gz']
checksums = ['afa517272a3d2249f513cb711c50b77cf8368dd0b8f5ea4b759142229204a448']

builddependencies = [
    ('CMake', '3.27.6'),
    ('scikit-build-core', '0.10.7'),
]

dependencies = [
    ('Python', '3.11.5'),
    ('SciPy-bundle', '2023.11'),
    ('pybind11', '2.11.1'),
    ('Basix', '0.9.0'),
    ('UFL', '2024.2.0'),
]

use_pip = True
sanity_pip_check = True
download_dep_fail = True

sanity_check_commands = [
    'python -c "import ffcx"',
]

moduleclass = 'numlib'
