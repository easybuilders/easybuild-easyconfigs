easyblock = 'Binary'

name = 'FlashPCA2'
version = '2.0'

homepage = 'https://github.com/gabraham/flashpca'
description = """Fast principal component analysis of large-scale genotype datasets."""

toolchain = SYSTEM

source_urls = ['https://github.com/gabraham/flashpca/releases/download/v%(version)s/']
sources = ['flashpca_x86-64.gz']
checksums = ['87f523e8d64a447797f4ca50e09725245d80c108e8283bf632bfb3e71fbb3d02']

dependencies = []

install_cmds = [
    # put the gz in place first
    "mkdir -p %(installdir)s/bin",
    "cp %(builddir)s/flashpca_x86-64.gz %(installdir)s/bin/",
    # then inflate to the final binary
    "gunzip -f %(installdir)s/bin/flashpca_x86-64.gz",
    "chmod 755 %(installdir)s/bin/flashpca_x86-64",
    # convenience symlink
    "cd %(installdir)s/bin && mv flashpca_x86-64 flashpca",
]

sanity_check_paths = {
    'files': ['bin/flashpca'],
    'dirs': []
}

sanity_check_commands = [
    "flashpca --help"
]

moduleclass = 'bio'
