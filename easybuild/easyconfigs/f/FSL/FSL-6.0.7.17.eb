easyblock = 'Conda'

name = 'FSL'
version = '6.0.7.17'

homepage = 'https://www.fmrib.ox.ac.uk/fsl/'
description = """FSL is a comprehensive library of analysis tools for FMRI, MRI and DTI brain imaging data."""

source_urls = ['https://fsl.fmrib.ox.ac.uk/fsldownloads/fslconda/releases/']
sources = ['fsl-%(version)s_linux-64.yml']
checksums = ['42892113183166822d114fcda6607c2da073c561dd3b5b59589f9433b95e0ed8']

toolchain = SYSTEM

builddependencies = [('Miniforge3', '24.11.3-0')]

environment_file = 'fsl-%(version)s_linux-64.yml'

sanity_check_paths = {
    'files': ['bin/flirt', 'bin/fsl', 'bin/fslpython', 'bin/imcp', 'bin/fsl_sub', 'lib/libfsl-surface.%s' % SHLIB_EXT],
    'dirs': ['include/fslsurface', 'lib/python3.12/site-packages'],
}

sanity_check_commands = [
    "source $FSLDIR/etc/fslconf/fsl.sh && fslpython --help",
    "python -c 'import fsl'",
]

modextravars = {
    'FSLDIR': '%(installdir)s',
}

modloadmsg = "To start using FSL, first run 'source $FSLDIR/etc/fslconf/fsl.sh'"

moduleclass = 'bio'
