easyblock = 'ConfigureMake'

name = 'treePL'
version = '1.0-20250627'

homepage = 'https://github.com/blackrim/treePL/wiki'
description = """
treePL is a phylogenetic penalized likelihood program.
"""

toolchain = {'name': 'gompi', 'version': '2024a'}
toolchainopts = {'openmp': True, 'usempi': True, 'pic': True}
_commit = '1f5c99f088227c7c8dacdf343e5d1ab23405009b'
github_account = 'blackrim'

source_urls = [GITHUB_SOURCE]
sources = [{'download_filename': f'{_commit}.tar.gz', 'filename': SOURCE_TAR_GZ}]
patches = ['%(name)s_honor_prefix.patch']
checksums = [
    {'treePL-1.0-20250627.tar.gz': '6701d7575f586cc83534402991846512287a962ae9408004a013cf035c7b4170'},
    {'treePL_honor_prefix.patch': '4ebe932d19b8a9c2290c97bb8e6b1d502ed304fc1951447708a68edacec3d68a'},
]

builddependencies = [
    ('Autotools', '20231222'),
    ('binutils', '2.42'),
    ('make', '4.4.1'),
]

dependencies = [
    ('NLopt', '2.7.1'),
    ('ADOL-C', '2.7.2'),
]


start_dir = 'src'

preconfigopts = "autoreconf -f -i && "

sanity_check_paths = {
    'files': ['bin/treePL'],
    'dirs': [],
}

sanity_check_commands = [
]

moduleclass = 'bio'
