# This easyconfig was created by the BEAR Software team at the University of Birmingham.
easyblock = 'PythonBundle'

name = 'TC-Python'
version = '2022a'

homepage = "https://www.thermocalc.com"
description = """TC-Python is a Python language-based SDK available with Thermo-Calc that allows users to openly
 couple Thermo-Calc calculations with other software. The SDK is built in the popular language Python to give
 Thermo-Calc users access to many other programs, such as numerical packages like NumPy and SciPy, which can now be
 used in combination with our calculations.
 It is truly a tool for Integrated Computational Materials Engineering (ICME)."""

toolchain = {'name': 'foss', 'version': '2021a'}

dependencies = [
    ('Python', '3.9.5'),
    ('Thermo-Calc', '2022a'),
]

use_pip = True

# In order to locate this wheel, it must first be copied from the Thermo-Calc directory:
# 1. Build the Thermo-Calc version specified above
# 2. Module load Thermo-Calc
# 3. `cp ${EBROOTTHERMOMINCALC}/SDK/TC-Python/TC_Python-2022.1.25418.139-py3-none-any.whl <easybuild-sources>`

exts_default_options = {
    'source_urls': [PYPI_SOURCE],
    'sanity_pip_check': True,
}

exts_list = [
    ('py4j', '0.10.9.3', {
        'checksums': ['0d92844da4cb747155b9563c44fc322c9a1562b3ef0979ae692dbde732d784dd'],
    }),
    ('jproperties', '2.1.1', {
        'checksums': ['40b71124e8d257e8954899a91cd2d5c0f72e0f67f1b72048a5ba264567604f29'],
    }),
    (name, version, {
        'modulename': 'tc_python',
        'source_tmpl': 'TC_Python-2022.1.25418.139-py3-none-any.whl',
        'unpack_sources': False,
        'checksums': ['b1ecf28214058e7f9c81beb3bdd2dc638834ee4a6416d473ad348a1bb85db98d'],
    }),
]

moduleclass = 'cae'

# Need to ensure that only members of the p-thermocalc group can access the module
local_bham_group = "p-thermocalc"
