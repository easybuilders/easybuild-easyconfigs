# Contribution from the NIHR Biomedical Research Centre
# Guy's and St Thomas' NHS Foundation Trust and King's College London
# uploaded by J. Sassmannshausen

easyblock = 'CMakeMake'

name = 'UShER'
version = '0.4.1'

homepage = 'https://github.com/yatisht/usher'
description = """UShER is now a package consisting of a family of programs for 
rapid phylogenetic analyses, particularly suitable for the SARS-CoV-2 genomes.

The tool faToVcf and other tools can be loaded additonally via the Kent_tools
module."""

toolchain = {'name': 'gompi', 'version': '2020b'}

github_account = 'yatisht'
source_urls = [GITHUB_SOURCE]
sources = ['v%(version)s.tar.gz']
patches = ['%(namelower)s-%(version)s-CMake.patch']

checksums = [
    '61acdeaec61f2b376704b4a519bba44b7cffdebf315f8126aba0a80ac3268b0e',   # user-0.4.1.tar.gz
    'e96dbf13f7fc4cd8d23ffec79c8068447343977e4e56b17689ec5009be4ce631',   # usher-0.4.1-CMake.patch
]

builddependencies = [
    ('CMake', '3.18.4'),
]

dependencies = [
    ('tbb', '2020.3'),
    ('protobuf', '3.14.0'),
    ('MAFFT', '7.475', '-with-extensions'),
    ('Boost', '1.74.0'),
    ('Python', '3.8.6'),
    ('zlib', '1.2.11'),
]

# The conversion tool faToVcf, which is part of the GitHb installation, is part
# of the Kent_tools and can be loaded seperately. 

sanity_check_paths = {
    'files': ['bin/%s' % x for x in ['matOptimize', 'matUtils', 'ripples', 'usher']],
    'dirs': [],
}

sanity_check_commands = [('%(namelower)s', '--help')]

moduleclass = 'bio'
