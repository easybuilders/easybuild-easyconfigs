# Contribution from the NIHR Biomedical Research Centre
# Guy's and St Thomas' NHS Foundation Trust and King's College London
# uploaded by J. Sassmannshausen

easyblock = 'CMakeMake'

name = 'UShER'
version = '0.4.1'

homepage = 'https://github.com/yatisht/usher'
description = """UShER is now a package consisting of a family of programs for 
rapid phylogenetic analyses, particularly suitable for the SARS-CoV-2 genomes."""

toolchain = {'name': 'gompi', 'version': '2020b'}

github_account = 'yatisht'
source_urls = [GITHUB_SOURCE]
sources = ['v%(version)s.tar.gz']
patches = ['%(namelower)s-isnan-CMake.patch']
checksums = [
     '61acdeaec61f2b376704b4a519bba44b7cffdebf315f8126aba0a80ac3268b0e',
     'c0a841bd29343057be8a2f1944aa6226cf4f4216bb641366b93250994c1ae937',   # usher-isnan-CMake.patch
]

builddependencies = [
    ('CMake', '3.18.4'),
]
dependencies = [
    ('tbb', '2020.3'),
    ('protobuf', '3.14.0'),
    ('MAFFT', '7.475', '-with-extensions'),
    ('Boost', '1.74.0'),
    ('Python', '3.8.6'),
    ('zlib', '1.2.11'),
    ('Kent_tools', '411'),
]

sanity_check_paths = {
    'files': ['bin/%s' % x for x in ['matOptimize', 'matUtils', 'ripples', 'usher']],  
    'dirs': [],
}

sanity_check_commands = [('%(namelower)s', '--help')]

moduleclass = 'bio'
