easyblock = 'PythonBundle'

name = 'ucx-py'
version = '0.40.00'

github_account = 'rapidsai'

homepage = "https://ucx-py.readthedocs.io"
description = """UCX-Py is the Python interface for UCX, a low-level high-performance networking library.
UCX and UCX-Py supports several transport methods including InfiniBand and NVLink
while still using traditional networking protocols like TCP."""

toolchain = {'name': 'gfbf', 'version': '2023b'}
toolchainopts = {'pic': True, 'lowopt': True}

dependencies = [
    ('Python', '3.11.5'),
    ('PyYAML', '6.0.1'),
    ('SciPy-bundle', '2023.11'),
    ('UCX', '1.15.0'),
]

use_pip = True
sanity_pip_check = True

exts_list = [
    ('pynvml', '11.5.3', {
        'checksums': ['183d223ae487e5f00402d8da06c68c978ef8a9295793ee75559839c6ade7b229'],
    }),
    ('rapids-dependency-file-generator', '1.16.0', {
        'source_urls': ['https://github.com/%(github_account)s/dependency-file-generator/archive'],
        'sources': ['v%(version)s.tar.gz'],
        'checksums': ['b49989947a8e9e7f722762758d536f74cc2f72d680d3939da225d58a36c235df'],
    }),
    ('rapids-build-backend', '0.3.2', {
        'source_urls': ['https://github.com/%(github_account)s/%(name)s/archive'],
        'sources': ['v%(version)s.tar.gz'],
        'checksums': ['11ed069adf2b6b70b8f45e5d8e3947ed8f669e4cd7e7245f491b86f0c1f0a01d'],
    }),
    (name, version, {
        'modulename': 'ucp',
        'source_urls': ['https://github.com/%(github_account)s/%(name)s/archive'],
        'sources': ['v%(version)s.tar.gz'],
        'checksums': ['283692e775202995d7a3326e4de17d4b728635a71ee1e7a12d330680dadcc8c4'],
    }),
]

moduleclass = 'lib'
