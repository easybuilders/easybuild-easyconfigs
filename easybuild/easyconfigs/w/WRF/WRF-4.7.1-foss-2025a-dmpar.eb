name = 'WRF'
version = '4.7.1'
versionsuffix = '-dmpar'

homepage = 'https://www.mmm.ucar.edu/models/wrf'
description = """The Weather Research and Forecasting (WRF) Model is a next-generation mesoscale
 numerical weather prediction system designed to serve both operational forecasting and atmospheric
 research needs."""

toolchain = {'name': 'foss', 'version': '2025a'}
toolchainopts = {'opt': False}  # don't use agressive optimization, stick to -O2

source_urls = [GITHUB_RELEASE]
sources = ['v%(version)s.tar.gz']

checksums = [
    {'v4.7.1.tar.gz': '11186188b033d26332e31769c1f7aff9349406920a7f72eeb256d5881f7223f4'},
]

# csh is used by WRF install scripts
builddependencies = [
    ('Autotools', '20240712'),
    ('tcsh', '6.24.16'),
    ('time', '1.9'),
    ('Perl', '5.40.0'),
]
dependencies = [
    ('JasPer', '4.2.5'),
    ('netCDF', '4.9.3'),
    ('netCDF-Fortran', '4.6.2'),
]

preconfigopts = "export NETCDF=$EBROOTNETCDFMINFORTRAN && export NETCDF_C=$EBROOTNETCDF &&"

# limit parallel build to 20
maxparallel = 20

github_account = '%(namelower)s-model'
buildtype = 'dmpar'

moduleclass = 'geo'
